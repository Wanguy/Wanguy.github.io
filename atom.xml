<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Gavin&#39;s Blog</title>
  
  <subtitle>æ„¿ä½ ç»§ç»­æˆé•¿</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://marara.xin/"/>
  <updated>2019-04-22T01:41:28.161Z</updated>
  <id>https://marara.xin/</id>
  
  <author>
    <name>Gavin</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>æ”¯æŒå‘é‡æœºï¼ˆSVMï¼‰</title>
    <link href="https://marara.xin/2019/04/21/SVM/"/>
    <id>https://marara.xin/2019/04/21/SVM/</id>
    <published>2019-04-21T08:39:10.000Z</published>
    <updated>2019-04-22T01:41:28.161Z</updated>
    
    <content type="html"><![CDATA[<h2 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h2><ul><li>æ”¯æŒå‘é‡æœºä¸ä¸Šä¸–çºª90å¹´ä»£æ­£å¼ç”±Vapnikå’ŒCortesæ­£å¼å‘è¡¨ï¼Œåœ¨æ–‡æœ¬åˆ†ç±»ä»»åŠ¡ä¸­æ˜¾ç¤º å‡ºå“è¶Šæ€§èƒ½ï¼Œå¾ˆå¿«æˆä¸ºæœºå™¨å­¦ä¹ ä¸»æµæŠ€æœ¯ï¼Œç›´æ¥æ€èµ·äº†2000å¹´å‰åç»Ÿè®¡å­¦ä¹ çš„é«˜æ½®ã€‚</li><li>æ”¯æŒå‘é‡æœºæ€æƒ³ç›´è§‚ï¼Œä½†ç»†èŠ‚å¤æ‚ï¼Œæ¶µç›–å‡¸ä¼˜åŒ–ï¼Œæ ¸å‡½æ•°ï¼Œæ‹‰æ ¼æœ—æ—¥ç®—å­ç­‰ç†è®º</li><li>æ”¯æŒå‘é‡æœº ï¼ˆsupport vector machineï¼‰ï¼š <ul><li>äºŒåˆ†ç±»æ¨¡å‹ï¼Œä¹Ÿå¯ç”¨äºå›å½’åˆ†æ</li><li>å­¦ä¹ ç­–ç•¥ï¼š æœ€å¤§é—´éš”åŒ– </li><li>å‡¸ä¼˜åŒ–ï¼Œå¯¹å¶ï¼ŒKKTæ¡ä»¶</li></ul></li></ul><a id="more"></a><h2 id="æœºå™¨å­¦ä¹ ç®—æ³•åˆ†ç±»"><a href="#æœºå™¨å­¦ä¹ ç®—æ³•åˆ†ç±»" class="headerlink" title="æœºå™¨å­¦ä¹ ç®—æ³•åˆ†ç±»"></a>æœºå™¨å­¦ä¹ ç®—æ³•åˆ†ç±»</h2><ul><li><p>å›å½’ï¼ˆç›‘ç£å­¦ä¹ ï¼‰ï¼š</p><ul><li>çº¿æ€§å›å½’ ï¼ˆlinear regressionï¼‰ </li><li>å†³ç­–æ ‘å›å½’ ï¼ˆdecision tree regressionï¼‰</li><li><span style="color:red">æ”¯æŒå‘é‡å›å½’ ï¼ˆsupport vector regressionï¼‰<span></span></span></li><li>ç¥ç»ç½‘ç»œ ï¼ˆneural networkï¼‰</li></ul></li><li>åˆ†ç±» ï¼ˆç›‘ç£å­¦ä¹ ï¼‰ï¼š<ul><li>é€»è¾‘å›å½’ ï¼ˆlogistic regressionï¼‰</li><li>å†³ç­–æ ‘åˆ†ç±»ï¼ˆdecision tree classificationï¼‰ </li><li><span style="color:red">æ”¯æŒå‘é‡æœº ï¼ˆsupport vector machineï¼‰<span></span></span></li><li>æœ´ç´ è´å¶æ–¯ ï¼ˆnaive Bayesï¼‰ </li></ul></li><li>èšç±»ï¼ˆåŠç›‘ç£å­¦ä¹ ï¼‰ï¼š <ul><li>K å‡å€¼ ï¼ˆK-meansï¼‰</li></ul></li></ul><h2 id="çº¿æ€§åˆ†ç±»"><a href="#çº¿æ€§åˆ†ç±»" class="headerlink" title="çº¿æ€§åˆ†ç±»"></a>çº¿æ€§åˆ†ç±»</h2><p>åˆ†ç±»ç®—æ³•çš„èµ·æºï¼š é€»è¾‘å›å½’</p><script type="math/tex; mode=display">h_{\theta}(x)=\frac{1}{1+e^{-f(x)}}</script><script type="math/tex; mode=display">P(y=1 | x ; \theta)=h_{\theta}(x)</script><script type="math/tex; mode=display">P(y=0 | x ; \theta)=1-h_{\theta}(x)</script><p><img src="https://i.loli.net/2019/04/21/5cbc35afcaf15.png" width="500"></p><script type="math/tex; mode=display">f(x)=w^{T} x+b</script><p>$ğ‘¤$: æƒé‡ </p><p>$ğ‘$: æˆªè·ï¼ˆä½ç§»ï¼‰</p><h3 id="å¦‚ä½•å†³å®šæœ€å¥½çš„å‚æ•°ï¼š-ğ‘¤-amp-ğ‘"><a href="#å¦‚ä½•å†³å®šæœ€å¥½çš„å‚æ•°ï¼š-ğ‘¤-amp-ğ‘" class="headerlink" title="å¦‚ä½•å†³å®šæœ€å¥½çš„å‚æ•°ï¼š$ğ‘¤$ &amp; $ğ‘$"></a>å¦‚ä½•å†³å®šæœ€å¥½çš„å‚æ•°ï¼š$ğ‘¤$ &amp; $ğ‘$</h3><p><img src="https://i.loli.net/2019/04/21/5cbc35bd761f4.png" width="300"></p><blockquote><p>æ”¯æŒå‘é‡æœºçš„æ ¸å¿ƒæ€æƒ³ï¼š æœ€å¤§é—´éš”åŒ–ï¼Œ æœ€ä¸å—åˆ°å™ªå£°çš„å¹²æ‰°</p></blockquote><ul><li><p>SVMåˆ’åˆ†çš„è¶…å¹³é¢ï¼š</p><script type="math/tex; mode=display">w^{T} x+b=0</script><p>$\boldsymbol{w}=\left(w_{1}, w_{2}, \dots, w_{d}\right)$ä¸ºæ³•å‘é‡ï¼Œå†³å®šè¶…å¹³é¢æ–¹å‘</p></li><li><p>å‡è®¾è¶…å¹³é¢å°†æ ·æœ¬æ­£ç¡®åˆ’åˆ†</p></li><li><script type="math/tex; mode=display">\left\{\begin{array}{l}{w^{T} x+b \geq 1, y=+1} \\ {w^{T} x+b \leq-1, y=-1}\end{array}\right.</script></li></ul><ul><li>è·ç¦»è¶…å¹³é¢æœ€è¿‘çš„å‡ ä¸ªç‚¹å«åšæ”¯æŒå‘é‡</li><li>é—´éš”ï¼ˆmarginï¼‰ï¼š$r=\frac{2}{| | w| |}$</li></ul><p><img src="https://i.loli.net/2019/04/21/5cbc35afd510f.png" width="500"></p><ul><li>æ”¯æŒå‘é‡æœºï¼š æœ€å¤§é—´éš”åŒ–</li><li>çº¦æŸæ¡ä»¶:</li></ul><script type="math/tex; mode=display">\begin{array}{c}{\max _{w, b} \frac{2}{\|w\|}} \\ {\text { s.t. } y_{i}\left(w^{T} x_{i}+b\right) \geq 1}\end{array}\\\left(x_{i}, y_{i}\right) \in D å±äºæ ·æœ¬ç©ºé—´</script><p>â€‹    ç­‰ä»·äº</p><script type="math/tex; mode=display">\begin{array}{c}{\min _{w, b} \frac{1}{2}\|w\|^{2}} \\ {\text { s.t. } y_{i}\left(w^{T} x_{i}+b\right) \geq 1}\end{array}\\\left(x_{i}, y_{i}\right) \in D å±äºæ ·æœ¬ç©ºé—´</script><p>æ”¯æŒå‘é‡æœºçš„æœ€åŸºæœ¬è¡¨è¾¾å½¢å¼ï¼Œ æ˜¯ä¸€ä¸ªçº¿æ€§çº¦æŸçš„å‡¸äºŒæ¬¡è§„åˆ’é—®é¢˜ï¼Œ æœ‰æœ€ä¼˜è§£</p><script type="math/tex; mode=display">D=\left\{\left(x_{1}, y_{1}\right),\left(x_{2}, y_{2}\right), \ldots,\left(x_{n}, y_{n}\right)\right\}, y_{i} \in\{-1,+1\}</script><h3 id="å‡¸å‡½æ•°"><a href="#å‡¸å‡½æ•°" class="headerlink" title="å‡¸å‡½æ•°"></a>å‡¸å‡½æ•°</h3><p>å‡¸å‡½æ•°ï¼šè®¾$ f(x)$ ä¸ºå®šä¹‰åœ¨$n$ç»´æ¬§å¼ç©ºé—´ä¸­æŸä¸ªå‡¸é›† $S$ ä¸Šçš„å‡½æ•°ï¼Œè‹¥å¯¹äºä»»</p><p>ä½•å®æ•°$ğ›¼ 0 &lt; ğ›¼ &lt; 1 $ä»¥åŠ $S$ ä¸­çš„ä¸åŒä¸¤ç‚¹ $x$ , $y$ , å‡æœ‰ï¼š</p><script type="math/tex; mode=display">f\left((1-\alpha) x_{0}+\alpha x_{1}\right) \leq(1-\alpha) f\left(x_{0}\right)+\alpha f\left(x_{1}\right)</script><p>é‚£ä¹ˆï¼Œ $ğ‘“(ğ‘¥)$ ä¸ºå®šä¹‰åœ¨å‡¸é›† $S$ ä¸Šçš„å‡¸å‡½æ•°</p><p><img src="https://i.loli.net/2019/04/21/5cbc35bdb1598.png" width="500"></p><p><img src="https://i.loli.net/2019/04/21/5cbc35afb6756.png" width="500"></p><blockquote><p>å·¦è¾¹ä¸ºå‡¸å‡½æ•°ï¼Œå³è¾¹ä¸ºéå‡¸å‡½æ•°</p></blockquote><h3 id="å‡¸ä¼˜åŒ–"><a href="#å‡¸ä¼˜åŒ–" class="headerlink" title="å‡¸ä¼˜åŒ–"></a>å‡¸ä¼˜åŒ–</h3><p>å¸¸è§çš„å‡¸å‡½æ•°ï¼š</p><ul><li>ä»¿å°„å‡½æ•°ï¼ˆaffine functionï¼‰ï¼š$w^{T} x+b$</li><li>äºŒæ¬¡å‡½æ•°ï¼ˆquadratic functionï¼‰ï¼š$x^{T} A x+b x+c$ï¼ˆ$A$ ä¸ºåŠæ­£å®šçŸ©é˜µï¼‰</li><li>æœ€å°å¹³æ–¹å·®å‡½æ•°ï¼ˆleast squareï¼‰ï¼š$| | y-A x| |_{2}^{2}$ï¼ˆ$A ^T A$ æ€»æ˜¯åŠæ­£å®šçŸ©é˜µï¼‰</li><li>max å‡½æ•°ï¼š$\max \left(x_{1}, x_{2}, \ldots, x_{n}\right)$</li></ul><p>æœ‰çº¦æŸæ¡ä»¶çš„å‡¸ä¼˜åŒ–é—®é¢˜ï¼š</p><script type="math/tex; mode=display">\begin{array}{c}{\min _{x} f(x)} \\ {\text { s.t. } g_{i}(x) \leq 0, i=1,2, \ldots, m} \\ {h_{j}(x)=0, j=1,2, \dots, n}\end{array}</script><p>å¦‚æœ $f(x)$, $g(x)$ ä¸ºå‡¸å‡½æ•°ï¼Œ$h(x)$ ä¸ºä»¿å°„å‡½æ•°æ—¶ï¼Œ è¿™æ˜¯ä¸€ä¸ªå‡¸ä¼˜åŒ–çš„é—®é¢˜ã€‚</p><p>å¯¹äºæ”¯æŒå‘é‡æœºï¼š</p><script type="math/tex; mode=display">\begin{array}{c}{\min _{w, b} \frac{1}{2}| | w| |^{2}} \\ {\text {s.t.} y_{i}\left(w^{T} x_{i}+b\right) \geq 1}\end{array}</script><p>SVM æ˜¯ä¸€ä¸ªå‡¸äºŒæ¬¡è§„åˆ’é—®é¢˜ï¼Œ æœ‰æœ€ä¼˜è§£</p><h2 id="æ‹‰æ ¼æœ—æ—¥å¯¹å¶"><a href="#æ‹‰æ ¼æœ—æ—¥å¯¹å¶" class="headerlink" title="æ‹‰æ ¼æœ—æ—¥å¯¹å¶"></a>æ‹‰æ ¼æœ—æ—¥å¯¹å¶</h2><p>æ‹‰æ ¼æœ—æ—¥ä¹˜å­æ³•ï¼ˆLagrange multipliersï¼‰</p><ul><li>ä¸€ç§å¯»æ‰¾å¤šå…ƒå‡½æ•°åœ¨ä¸€ç»„çº¦æŸæ¡ä»¶ä¸‹çš„æå€¼çš„æ–¹æ³•ã€‚é€šè¿‡å¼•å…¥æ‹‰æ ¼æœ—æ—¥ä¹˜å­ï¼Œå¯å°†æœ‰ $d$ ä¸ªå˜é‡å’Œ $k$ ä¸ªçº¦æŸæ¡ä»¶çš„æœ€ä¼˜åŒ–é—®é¢˜è½¬åŒ–ä¸º $d+k$ ä¸ªå˜é‡çš„æ— çº¦æŸä¼˜åŒ–é—®é¢˜æ±‚è§£ã€‚</li><li>å°†åŸé—®é¢˜çš„çº¦æŸè§„åˆ’é—®é¢˜è½¬åŒ–ä¸ºå¯¹å¶é—®é¢˜ï¼Œæ˜“äºæ±‚è§£</li></ul><h3 id="æ‹‰æ ¼æœ—æ—¥ä¹˜å­ï¼šç­‰å¼çº¦æŸ"><a href="#æ‹‰æ ¼æœ—æ—¥ä¹˜å­ï¼šç­‰å¼çº¦æŸ" class="headerlink" title="æ‹‰æ ¼æœ—æ—¥ä¹˜å­ï¼šç­‰å¼çº¦æŸ"></a>æ‹‰æ ¼æœ—æ—¥ä¹˜å­ï¼šç­‰å¼çº¦æŸ</h3><p><img src="https://i.loli.net/2019/04/21/5cbc35afcbb05.png" width="300"></p><p>å¯¹äºç­‰å¼çº¦æŸé—®é¢˜ï¼š</p><script type="math/tex; mode=display">\begin{array}{c}{\min f(x)} \\ {\text {s.t.} g_{i}(x)=0}\end{array}</script><p>é‚£ä¹ˆå¿…ç„¶æœ‰ï¼š</p><ol><li>çº¦æŸæ›²é¢ä¸Šçš„ä»»ä¸€ç‚¹ $x$, è¯¥ç‚¹çš„æ¢¯åº¦$\nablağ‘”( ğ‘¥)$ æ­£äº¤äºçº¦æŸæ›²é¢</li><li>åœ¨æœ€ä¼˜ç‚¹$ğ‘¥ ^âˆ—$ ,$\nablağ‘“ (ğ‘¥)^ âˆ—$ ä¹Ÿæ­£äº¤äºæ›²é¢</li></ol><p>åˆ™å­˜åœ¨$\lambda \neq 0$ :</p><script type="math/tex; mode=display">\nabla f\left(x^{*}\right)+\lambda \nabla g\left(x^{*}\right)=0</script><p>å¯å®šä¹‰æ‹‰æ ¼æœ—æ—¥å‡½æ•°, ğœ† ä¸ºæ‹‰æ ¼æœ—æ—¥ä¹˜å­ï¼š</p><script type="math/tex; mode=display">L(x, \lambda)=f(x)+\lambda g(x)</script><p>åŒæ—¶ï¼š</p><script type="math/tex; mode=display">\nabla_{x} L(x, \lambda)=0 ; \quad \nabla_{\lambda} L(x, \lambda)=0</script><h3 id="æ‹‰æ ¼æœ—æ—¥ä¹˜å­ï¼šä¸ç­‰å¼çº¦æŸ"><a href="#æ‹‰æ ¼æœ—æ—¥ä¹˜å­ï¼šä¸ç­‰å¼çº¦æŸ" class="headerlink" title="æ‹‰æ ¼æœ—æ—¥ä¹˜å­ï¼šä¸ç­‰å¼çº¦æŸ"></a>æ‹‰æ ¼æœ—æ—¥ä¹˜å­ï¼šä¸ç­‰å¼çº¦æŸ</h3><p><img src="https://i.loli.net/2019/04/21/5cbc35bd8e91c.png" width="300"></p><p>å¯¹äºä¸ç­‰å¼çº¦æŸé—®é¢˜ï¼š</p><script type="math/tex; mode=display">\begin{array}{c}{\min f(x)} \\ {\text { s.t. } g_{i}(x) \leq 0}\end{array}</script><ol><li>$g(x)&lt;0$ï¼Œçº¦æŸä¸èµ·ä½œç”¨ï¼Œç›´æ¥æ±‚è§£ $\nabla f(x)=0, \lambda=0$</li><li>$g(x)=0, \nabla f\left(x^{<em>}\right)+\lambda \nabla g\left(x^{</em>}\right)=0, \lambda&gt;0$<br>é‚£ä¹ˆæ‹‰æ ¼æœ—æ—¥å‡½æ•°ä¸ºï¼š<script type="math/tex; mode=display">L(x, \lambda)=f(x)+\lambda g(x)</script>åŒæ—¶éœ€è¦æ»¡è¶³çš„æ¡ä»¶ä¸ºï¼š<script type="math/tex; mode=display">\begin{array}{c}{\nabla_{x} L(x, \lambda)=0} \\ {\nabla_{\lambda} L(x, \lambda)=0} \\ {\lambda g(x)=0} \\ {\lambda \geq 0}\end{array}\\g(x) \leq 0</script></li></ol><p>å³Karush-Kuhn-Tucker (KKT) æ¡ä»¶</p><h3 id="æ‹‰æ ¼æœ—æ—¥å¯¹å¶-1"><a href="#æ‹‰æ ¼æœ—æ—¥å¯¹å¶-1" class="headerlink" title="æ‹‰æ ¼æœ—æ—¥å¯¹å¶"></a>æ‹‰æ ¼æœ—æ—¥å¯¹å¶</h3><p>å¹¿ä¹‰æ‹‰æ ¼æœ—æ—¥å‡½æ•°ï¼š</p><script type="math/tex; mode=display">\begin{array}{c}{\min _{x} f(x)} \\ {\text { s.t. } g_{i}(x) \leq 0, i=1,2, \ldots, n} \\ {h_{j}(x)=0, j=1,2, \ldots, m}\end{array}</script><script type="math/tex; mode=display">L(x, u, \lambda)=f(x)+\sum_{i=1}^{n} \mu_{i} g_{i}(x)+\sum_{i=1}^{m} \lambda_{j} h_{j}(x)</script><p>æ»¡è¶³ KKT æ¡ä»¶ï¼š</p><script type="math/tex; mode=display">\left\{\begin{array}{c}{\nabla_{x, \mu, \lambda} L(x, \mu, \lambda)=0} \\ {g_{i}(x) \leq 0} \\ {\mu_{i} \geq 0} \\ {\mu_{i} g_{i}(x)=0}\end{array}\right.</script><p>æ„é€ æ‹‰æ ¼æœ—æ—¥ä¹˜å­ï¼š</p><script type="math/tex; mode=display">\begin{array}{c}{\min _{x} f(x)} \\ {\text { s.t. } g_{i}(x) \leq 0, i=1,2, \ldots, n} \\ {h_{j}(x)=0, j=1,2, \ldots, m}\end{array}</script><script type="math/tex; mode=display">L(x, u, \lambda)=f(x)+\sum_{i=1}^{n} \mu_{i} g_{i}(x)+\sum_{i=1}^{m} \lambda_{j} h_{j}(x)\left(\mu_{i} \geq 0\right)</script><p>ä¸»é—®é¢˜ï¼ˆprimal problemï¼‰ï¼š$p^{*}=\min _{x} \max _{\mu, \lambda} L(x, \mu, \lambda)$</p><p>å…¶å¯¹å¶é—®é¢˜ï¼ˆdual problemï¼‰ï¼š$d^{*}=\max _{\mu, \lambda} \min _{x} L(x, \mu, \lambda)$</p><p>é€šå¸¸ï¼š$d^{<em>} \leq p^{</em>}$ å³å¯¹å¶é—®é¢˜çš„æœ€ä¼˜è§£æ˜¯åŸå§‹ä¸»é—®é¢˜æœ€ä¼˜è§£çš„ä¸‹é™ï¼ˆå¼±å¯¹å¶æ€§ï¼‰</p><p>ä½†è‹¥æ»¡è¶³KKT æ¡ä»¶çš„æ–¹ç¨‹ç»„çš„è§£ï¼š</p><script type="math/tex; mode=display">\begin{array}{l}{\nabla_{x, \mu, \lambda} L(x, \mu, \lambda)=0} \\ {g_{i}(x) \leq 0} \\ {\mu_{i} \geq 0} \\ {\mu_{i} g_{i}(x)=0}\end{array}</script><p>æ­¤æ—¶ $ğ‘‘ ^âˆ— = ğ‘ ^âˆ—$ å¼ºå¯¹å¶æ€§ï¼ŒåŸå§‹é—®é¢˜å’Œå¯¹å¶é—®é¢˜æœ€ä¼˜è§£ä¸¥æ ¼ç›¸ç­‰</p><blockquote><p>æ”¯æŒå‘é‡æœºï¼šåˆ©ç”¨æ‹‰æ ¼æœ—æ—¥å¯¹å¶å’ŒKKTæ¡ä»¶æ±‚è§£çš„ç»å…¸å¯¹å¶é—®é¢˜</p></blockquote><h3 id="æ”¯æŒå‘é‡æœºçš„å¯¹å¶é—®é¢˜"><a href="#æ”¯æŒå‘é‡æœºçš„å¯¹å¶é—®é¢˜" class="headerlink" title="æ”¯æŒå‘é‡æœºçš„å¯¹å¶é—®é¢˜"></a>æ”¯æŒå‘é‡æœºçš„å¯¹å¶é—®é¢˜</h3><p>æ”¯æŒå‘é‡æœºæœ€å¤§é—´éš”åŒ–ä¸‹çš„æŸå¤±å‡½æ•°ï¼š</p><script type="math/tex; mode=display">\begin{array}{c}{\min _{w, b} \frac{1}{2}| | w| |^{2}} \\ {\text { s.t. } y_{i}\left(\boldsymbol{w}^{T} \boldsymbol{x}_{i}+b\right) \geq 1, i=1,2,3, \ldots, m}\end{array}</script><p>é‚£ä¹ˆçº¦æŸå¯ä»¥å†™ä¸ºï¼š</p><script type="math/tex; mode=display">g_{i}(\boldsymbol{w})=1-y_{i}\left(\boldsymbol{w}^{T} x_{i}+b\right) \leq 0</script><p>æ„é€ æ‹‰æ ¼æœ—æ—¥å‡½æ•°ï¼š</p><script type="math/tex; mode=display">L(\boldsymbol{w}, b, \boldsymbol{\lambda})=\frac{1}{2}| | \boldsymbol{w}| |^{2}+\sum_{i=1}^{m} \lambda_{i}\left(1-y_{i}\left(\boldsymbol{w}^{T} \boldsymbol{x}_{\boldsymbol{i}}+b\right)\right)</script><p>æ‰¾åˆ°å¯¹å¶é—®é¢˜çš„å½¢å¼ï¼š</p><script type="math/tex; mode=display">\nabla_{w} L(\boldsymbol{w}, b, \boldsymbol{\lambda})=0 \Rightarrow \boldsymbol{w}=\sum_{i=1}^{m} \lambda_{i} y_{i} \boldsymbol{x}_{i}</script><script type="math/tex; mode=display">\nabla_{b} L(\boldsymbol{w}, b, \lambda)=0 \Rightarrow 0=\sum_{i=1}^{m} \lambda_{i} y_{i}</script><p><img src="https://i.loli.net/2019/04/21/5cbc35bd8e91c.png" width="500"></p><p>é‚£ä¹ˆä»£å…¥æ‹‰æ ¼æœ—æ—¥å‡½æ•°å¯ä»¥å¾—åˆ°å…¶å¯¹å¶é—®é¢˜ï¼š</p><script type="math/tex; mode=display">\max _{\lambda} W(\lambda)=\max _{\lambda} \min _{w, b} L(w, b, \lambda)=\sum_{i=1}^{m} \lambda_{i}-\frac{1}{2} \sum_{i=1}^{m} y_{i} y_{j} \lambda_{i} \lambda_{j} x_{i}^{T} x_{j}\\\begin{array}{c}{\text { s.t. } \sum_{i=1}^{m} \lambda_{i} y_{i}=0} \\ {\lambda_{i} \geq 0, i=1,2, \ldots, m}\end{array}</script><p>ä¸Šè¿°è¿‡ç¨‹æ»¡è¶³KKTæ¡ä»¶ï¼š</p><script type="math/tex; mode=display">\begin{array}{c}{\lambda_{i} \geq 0} \\ {1-y_{i} f\left(x_{i}\right) \leq 0} \\ {\lambda_{i}\left(1-y_{i} f\left(x_{i}\right)\right)=0}\end{array}</script><script type="math/tex; mode=display">f(\boldsymbol{x})=\boldsymbol{w}^{T} \boldsymbol{x}+b=\sum_{i=1}^{m} \lambda_{i} y_{i} \boldsymbol{x}_{\boldsymbol{i}}^{T} \boldsymbol{x}+b</script><script type="math/tex; mode=display">\begin{array}{c}{\lambda_{i} \geq 0} \\ {1-y_{i} f\left(x_{i}\right) \leq 0} \\ {\lambda_{i}\left(1-y_{i} f\left(x_{i}\right)\right)=0}\end{array}</script><p>å¦‚æœ$ y_{i} f\left(x_{i}\right)&gt;1$, é‚£ä¹ˆ$ğœ† _i = 0$, å¯¹äº$ğ‘“(ğ‘¥)$ æ²¡æœ‰è´¡çŒ®</p><h2 id="æ ¸å‡½æ•°ï¼ˆKernelï¼‰"><a href="#æ ¸å‡½æ•°ï¼ˆKernelï¼‰" class="headerlink" title="æ ¸å‡½æ•°ï¼ˆKernelï¼‰"></a>æ ¸å‡½æ•°ï¼ˆKernelï¼‰</h2><p>å‡è®¾æœ‰ä¸ªæ˜ å°„å‡½æ•°ä»äºŒç»´ç©ºé—´æ˜ å°„åˆ°ä¸‰ç»´ç©ºé—´ï¼š</p><script type="math/tex; mode=display">\Phi : \left( \begin{array}{l}{x_{1}} \\ {x_{2}}\end{array}\right) \rightarrow \left( \begin{array}{c}{x_{1}^{2}} \\ {x_{2}^{2}} \\ {\sqrt{2} x_{1} x_{2}}\end{array}\right) \quad \mathbb{R}^{2} \rightarrow \mathbb{R}^{3}</script><p><img src="https://i.loli.net/2019/04/21/5cbc35afdc5c1.png" width="800"></p><p>ä¼˜åŒ–é—®é¢˜å˜ä¸ºï¼š</p><script type="math/tex; mode=display">\begin{array}{c}{\min _{w, b} \frac{1}{2}\|w\|^{2}} \\ {\text {s.t.} y_{i}\left(w^{T} \phi\left(x_{i}\right)+b\right) \geq 1}\end{array}</script><p>å¯¹å¶é—®é¢˜ä¸ºï¼š</p><script type="math/tex; mode=display">\max _{\lambda} W(\lambda)=\sum_{i=1}^{m} \lambda_{i}-\frac{1}{2} \sum_{i=1}^{m} y_{i} y_{j} \lambda_{i} \lambda_{j} \phi\left(x_{i}\right)^{T} \phi\left(x_{j}\right)\\\begin{array}{c}{\text { s.t. } \sum_{i=1}^{m} \lambda_{i} y_{i}=0} \\ {\lambda_{i} \geq 0, i=1,2, \dots, m}\end{array}</script><p><img src="https://i.loli.net/2019/04/21/5cbc35afb67ad.png" width="800"></p><p>å•ç‹¬è®¡ç®—æ˜ å°„å‡½æ•°$\phi(x)$ä»¥åŠ$\phi\left(x_{i}\right)^{T} \phi\left(x_{j}\right)$ååˆ†å›°éš¾ï¼Œç°è®¾æƒ³æ„é€ æ ¸å‡½æ•°</p><p>æ¯”å¦‚ï¼š</p><script type="math/tex; mode=display">\Phi : \left( \begin{array}{l}{x_{1}} \\ {x_{2}}\end{array}\right) \rightarrow \left( \begin{array}{c}{x_{1}^{2}} \\ {x_{2}^{2}} \\ {\sqrt{2} x_{1} x_{2}}\end{array}\right) \mathbb{R}^{2} \rightarrow \mathbb{R}^{3}</script><script type="math/tex; mode=display">\begin{align}\Phi(x)^{T} \Phi(z)&=\left(x_{1}^{2}, x_{2}^{2}, \sqrt{2} x_{1} x_{2}\right) \left( \begin{array}{c}{z_{1}^{2}} \\ {z_{2}^{2}} \\ {\sqrt{2} z_{1} z_{2}}\end{array}\right)\\&=x_{1}^{2} z_{1}^{2}+x_{1}^{2} z_{1}^{2}+2 x_{1} z_{1} x_{1} z_{1}\\&=\left(x_{1} z_{1}+x_{2} z_{2}\right)^{2}\\ &=\left(\boldsymbol{x}^{T} \boldsymbol{z}\right)^{2}\end{align}</script><script type="math/tex; mode=display">k\left(x_{i}, x_{j}\right)=\phi\left(x_{i}\right)^{T} \phi\left(x_{j}\right)</script><ul><li>è®­ç»ƒå™¨ä¸ç”¨å­¦ä¹ å’Œè®¡ç®—æ˜ å°„å‡½æ•°çš„æ˜¾æ€§è¡¨è¾¾å¼</li><li>å¯»æ‰¾åˆ°æ ¸å‡½æ•°ï¼Œç„¶ååœ¨åŸå§‹æ ·æœ¬ç©ºé—´åšå†…ç§¯ï¼Œæ¯”å¦‚ $k(x, z)=\left(x^{T} z\right)^{2}$</li></ul><h3 id="æ ¸å‡½æ•°"><a href="#æ ¸å‡½æ•°" class="headerlink" title="æ ¸å‡½æ•°"></a>æ ¸å‡½æ•°</h3><p>çº¿æ€§æ ¸å‡½æ•°ï¼š$k\left(x_{i}, x_{j}\right)=x_{i}^{T} x_{j}$</p><p>å¤šé¡¹å¼æ ¸å‡½æ•°ï¼š$k\left(x_{i}, x_{j}\right)=\left(x_{i}^{T} x_{j}\right)^{d}\quad d&gt;0$</p><p>é«˜æ–¯æ ¸å‡½æ•°ï¼š$k\left(x_{i}, x_{j}\right)=e^{\left(-\frac{\left|x_{i}-x_{i}\right|^{2}}{2 \sigma^{2}}\right)} \quad \sigma&gt;0$</p><p>æ‹‰æ™®æ‹‰æ–¯æ ¸å‡½æ•°ï¼š$k\left(x_{i}, x_{j}\right)=e^{\left(-\frac{\left|x_{i}-x_{j}\right|}{2 \sigma^{2}}\right)} \quad \sigma&gt;0$</p><p>Sigmoid æ ¸å‡½æ•°ï¼š$k\left(x_{i}, x_{j}\right)=\tanh \left(\beta x_{i}^{T} x_{j}+\theta\right) \quad \beta&gt;0, \theta&lt;0$</p><h3 id="æ­£åˆ™åŒ–ä¸è½¯é—´éš”"><a href="#æ­£åˆ™åŒ–ä¸è½¯é—´éš”" class="headerlink" title="æ­£åˆ™åŒ–ä¸è½¯é—´éš”"></a>æ­£åˆ™åŒ–ä¸è½¯é—´éš”</h3><p>é’ˆå¯¹æƒ…å†µï¼š å¦‚æœæ ·æœ¬ä¸æ˜¯å®Œå…¨èƒ½å¤Ÿåˆ’åˆ†å¼€</p><p>è§£å†³æ–¹æ³•ï¼š å…è®¸æ”¯æŒå‘é‡æœºåœ¨ä¸€äº›æ ·æœ¬å‡ºé”™ï¼Œå®šä¹‰è½¯é—´éš”</p><p>å¼•å…¥æ­£åˆ™åŒ–å¼ºåº¦å‚æ•°$C$ï¼ŒæŸå¤±å‡½æ•°é‡æ–°å®šä¹‰ä¸ºï¼š</p><script type="math/tex; mode=display">\min _{w, b} \frac{1}{2}\|w\|^{2}+C \sum_{i=1}^{m} \max \left(0,1-y_{i} f\left(x_{i}\right)\right)</script><p>å¼•å…¥æ¾å¼›å˜é‡ï¼ˆslack variablesï¼‰$\xi_{i} \geq 0$ï¼š</p><script type="math/tex; mode=display">\begin{array}{c}{\min _{w, b, \xi} \frac{1}{2}| | w| |^{2}+C \sum_{i=1}^{m} \xi_{i}} \\ {\text {s.t.} y_{i} f\left(x_{i}\right) \geq 1-\xi_{i}} \\ {\xi_{i} \geq 0, i=1,2,3 \ldots m}\end{array}</script><p><img src="https://i.loli.net/2019/04/21/5cbc35afe1cf9.png" width="300"></p><h3 id="è½¯é—´éš”æ”¯æŒå‘é‡æœº"><a href="#è½¯é—´éš”æ”¯æŒå‘é‡æœº" class="headerlink" title="è½¯é—´éš”æ”¯æŒå‘é‡æœº"></a>è½¯é—´éš”æ”¯æŒå‘é‡æœº</h3><p>æ‹‰æ ¼æœ—æ—¥å‡½æ•°ï¼š</p><script type="math/tex; mode=display">L(\boldsymbol{w}, b, \boldsymbol{\xi}, \boldsymbol{\lambda}, \boldsymbol{r})=\frac{1}{2}\|\boldsymbol{w}\|^{2}+C \sum_{i=1}^{m} \xi_{i}+\sum_{i=1}^{m} \lambda_{i}\left(1-\xi_{i}-y_{i}\left(\boldsymbol{w}^{T} \boldsymbol{x}_{i}+b\right)\right)-\sum_{i=1}^{m} r_{i} \xi_{i}\left(\lambda_{i} \geq 0, r_{i} \geq 0\right)</script><p>å¯¹$ğ‘¤, ğ‘, \xi$æ±‚åå¯¼å¯å¾—ï¼š</p><script type="math/tex; mode=display">0=\sum_{i=1}^{m} \lambda_{i} y_{i} \quad w=\sum_{i=1}^{m} \lambda_{i} y_{i} x_{i} \quad C=\lambda_{i}+r_{i}</script><p>ç›¸åº”çš„å¯¹å¶é—®é¢˜ä¸ºï¼š</p><script type="math/tex; mode=display">\begin{aligned} \max _{\lambda} W(\lambda)=& \sum_{i=1}^{m} \lambda_{i}-\frac{1}{2} \sum_{i=1}^{m} y_{i} y_{j} \lambda_{i} \lambda_{j} x_{i}^{T} x_{j} \\ & \text { s.t. } \sum_{i=1}^{m} \lambda_{i} y_{i}=0 \\ C \geq \lambda_{i} & \geq 0, i=1,2, \ldots, m \end{aligned}</script><p>è½¯é—´éš”çš„KKTæ¡ä»¶ä¸ºï¼š</p><script type="math/tex; mode=display">\begin{array}{c}{\lambda_{i} \geq 0, r_{i} \geq 0} \\ {1-y_{i} f\left(x_{i}\right)-\xi_{i} \leq 0}\end{array}\\\begin{array}{c}{\lambda_{i}\left(1-y_{i} f\left(x_{i}\right)-\xi_{i}\right)=0} \\ {\xi_{i} \geq 0, r_{i} \xi_{i}=0}\end{array}</script><p>æ”¯æŒå‘é‡ï¼š</p><script type="math/tex; mode=display">\begin{array}{llll}{\lambda_{i}=0} & {\Rightarrow y_{i} f\left(x_{i}\right) \geq 1}\quadæ ·æœ¬è½åœ¨é—´éš”å¤–ï¼Œä¸å½±å“æ¨¡å‹ \\{0<\lambda_{i}<C} & {\Rightarrow y_{i} f\left(x_{i}\right)=1}\quadæ ·æœ¬è½åœ¨æœ€å¤§é—´éš”è¾¹ç•Œä¸Šï¼Œä¸ºæ”¯æŒå‘é‡\\{\lambda_{i}=C, \xi_{i} \leq 1}& {\Rightarrow y_{i} f\left(x_{i}\right)=1-\xi_{i} \leq 1}\quadæ ·æœ¬è½åœ¨é—´éš”å†…éƒ¨ä¸ºæ”¯æŒå‘é‡\\{\lambda_{i}=C, \xi_{i}>1}& {\Rightarrow y_{i} f\left(x_{i}\right)=1-\xi_{i}<0}\quadæ ·æœ¬è¢«é”™è¯¯åˆ†ç±»ï¼Œä¸ºæ”¯æŒå‘é‡\end{array}</script><h2 id="æ”¯æŒå‘é‡æœºåˆ†ç±»ä¸å›å½’"><a href="#æ”¯æŒå‘é‡æœºåˆ†ç±»ä¸å›å½’" class="headerlink" title="æ”¯æŒå‘é‡æœºåˆ†ç±»ä¸å›å½’"></a>æ”¯æŒå‘é‡æœºåˆ†ç±»ä¸å›å½’</h2><p><img src="https://i.loli.net/2019/04/21/5cbc35afe1cf9.png" width="300"></p><p>å¯¹äºSVMåˆ†ç±»ï¼Œå®¹å¿ä¸€å®šæ•°ç›®çš„é”™åˆ†ç±»</p><p><img src="https://i.loli.net/2019/04/21/5cbc35afdce29.png" width="300"></p><p>å¯¹äºSVMå›å½’ï¼Œå®¹å¿ $\varepsilon$ ä»¥å†…çš„åå·®ï¼Œmarginä»¥å¤–çš„è®¡ç®—æŸå¤±</p><h3 id="æ”¯æŒå‘é‡æœºå›å½’åˆ†æï¼ˆSVRï¼‰"><a href="#æ”¯æŒå‘é‡æœºå›å½’åˆ†æï¼ˆSVRï¼‰" class="headerlink" title="æ”¯æŒå‘é‡æœºå›å½’åˆ†æï¼ˆSVRï¼‰"></a>æ”¯æŒå‘é‡æœºå›å½’åˆ†æï¼ˆSVRï¼‰</h3><p>SVRçš„ä¸»å‡¸ä¼˜åŒ–é—®é¢˜ï¼š</p><script type="math/tex; mode=display">\begin{array}{c}{\min _{w} \frac{1}{2}| | w| |^{2}} \\ {\text { s.t. } y_{i}-w^{T} x_{i}-b \leq \epsilon} \\ {w^{T} x_{i}+b-y_{i} \leq \epsilon}\end{array}</script><p><img src="https://i.loli.net/2019/04/21/5cbc35afb8ef6.png" width="300"></p><p>è½¯é—´éš”ï¼Œå¯¹äºè½åœ¨marginä»¥å¤–çš„ç‚¹è®¡å…¥æŸå¤±ï¼š</p><script type="math/tex; mode=display">\min _{w} \frac{1}{2}| | w| |^{2}+C \sum_{i=1}^{m}\left(\xi_{i}+\xi_{i}^{\prime}\right)\\\begin{array}{c}{\text {s.t.w}^{T} x_{i}+b-y_{i} \leq \epsilon+\xi_{i}} \\ {y_{i}-w^{T} x_{i}-b \leq \epsilon+\xi_{i}^{\prime}} \\ {\xi_{i} \geq 0, \xi_{i}^{\prime} \geq 0, i=1,2,3 \dots m}\end{array}</script><h3 id="SVR-å¯¹å¶é—®é¢˜"><a href="#SVR-å¯¹å¶é—®é¢˜" class="headerlink" title="SVR å¯¹å¶é—®é¢˜"></a>SVR å¯¹å¶é—®é¢˜</h3><p>æ„é€ æ‹‰æ ¼æœ—æ—¥å‡½æ•°, å¼•å…¥æ‹‰æ ¼æœ—æ—¥ä¹˜å­ $\lambda_{i} \geq 0, \lambda_{i}^{\prime} \geq 0, r_{i} \geq 0, r_{i}^{\prime} \geq 0$</p><script type="math/tex; mode=display">L\left(\boldsymbol{w}, b, \boldsymbol{\lambda}, \boldsymbol{\lambda}^{\prime}, \boldsymbol{\xi}, \boldsymbol{\xi}^{\prime}, \boldsymbol{r}, \boldsymbol{r}^{\prime}\right)=\frac{1}{2}\|\boldsymbol{w}\|^{2}+C \sum_{i=1}^{m}\left(\xi_{i}+\xi_{i}^{\prime}\right)+\sum_{i=1}^{m} \lambda_{i}\left(f\left(x_{i}\right)-y_{i}-\epsilon-\xi_{i}\right)\\+\sum_{i=1}^{m} \lambda_{i}^{\prime}\left(y_{i}-f\left(x_{i}\right)-\epsilon-\xi_{i}^{\prime}\right)-\sum_{i=1}^{m} r_{i} \xi_{i}-\sum_{i=1}^{m} r_{i}^{\prime} \xi_{i}^{\prime}</script><p>å¯¹ $w, b, \xi, \xi$ æ±‚åå¯¼åˆ™æœ‰ï¼š</p><script type="math/tex; mode=display">w=\sum_{i=1}^{m}\left(\lambda_{i}^{\prime}-\lambda_{i}\right) x_{i} \quad 0=\sum_{i=1}^{m}\left(\lambda_{i}-\lambda_{i}^{\prime}\right) \quad C=\lambda_{i}+r_{i} \quad C=\lambda_{i}^{\prime}+r_{i}^{\prime}</script><p>SVR å¯¹å¶å½¢å¼ä¸ºï¼š</p><script type="math/tex; mode=display">\max _{\lambda, \lambda^{\prime}} W\left(\lambda, \lambda^{\prime}\right)=\sum_{i=1}^{m}\left[y_{i}\left(\lambda_{i}^{\prime}-\lambda_{i}\right)-\epsilon\left(\lambda_{i}^{\prime}+\lambda_{i}\right)\right]-\frac{1}{2} \sum_{i=1}^{m} \sum_{j=1}^{m}\left(\lambda_{i}^{\prime}-\lambda_{i}\right)\left(\lambda_{j}^{\prime}-\lambda_{j}\right) x_{i}^{T} x_{j}\\\begin{array}{c}{\text { s.t. } \sum_{i=1}^{m}\left(\lambda_{i}^{\prime}-\lambda_{i}\right)=0} \\ {C \geq \lambda_{i}, \lambda_{i}^{\prime} \geq 0, i=1,2, \ldots, m}\end{array}</script><p>æ»¡è¶³KKTæ¡ä»¶ï¼Œåˆ™è¦æ±‚ï¼š</p><script type="math/tex; mode=display">\lambda_{i} \lambda_{i}^{\prime}=0, \xi_{i} \xi_{i}^{\prime}=0\\\begin{aligned} \lambda_{i}\left(f\left(x_{i}\right)-y_{i}-\epsilon-\xi_{i}\right) &=0 \\ \lambda_{i}^{\prime}\left(y_{i}-f\left(x_{i}\right)-\epsilon-\xi_{i}^{\prime}\right) &=0 \end{aligned}\\\left(C-\lambda_{i}\right) \xi_{i}=0,\left(C-\lambda_{i}^{\prime}\right) \xi_{i}^{\prime}=0</script><p>å½“ä¸”ä»…å½“ï¼š</p><script type="math/tex; mode=display">Where \quad f\left(x_{i}\right)-y_{i}-\epsilon-\xi_{i}=0 \mathrm, \quad \lambda_{i} \neq 0\\Where  \quad y_{i}-f\left(x_{i}\right)-\epsilon-\xi_{i}^{\prime}=0 \mathrm, \quad \lambda_{i}^{\prime} \neq 0</script><p>ä¹Ÿå°±æ˜¯å½“æ ·æœ¬è½åœ¨ $\epsilon$ âˆ’é—´éš”å¸¦ä»¥å¤–ï¼Œä¸ºæ”¯æŒå‘é‡ï¼Œç›¸åº”çš„ $\lambda_{i}$ï¼Œ$\lambda_{i}^{\prime}$ å–éé›¶å€¼</p><script type="math/tex; mode=display">f(\boldsymbol{x})=\sum_{i=1}^{m}\left(\lambda_{i}^{\prime}-\lambda_{i}\right) \boldsymbol{x}_{\boldsymbol{i}}^{\boldsymbol{T}} \boldsymbol{x}+\boldsymbol{b}</script><p>å¯¹äº $0&lt;\lambda_{i}&lt;C, \xi_{i}=0$ ï¼Œå– $b=y_{i}+\epsilon-\sum_{i=1}^{m}\left(\lambda_{i}^{\prime}-\lambda_{i}\right) x_{i}^{T} x$ çš„å¹³å‡å€¼</p><h2 id="æ”¯æŒå‘é‡æœºç®—æ³•æ€»ç»“"><a href="#æ”¯æŒå‘é‡æœºç®—æ³•æ€»ç»“" class="headerlink" title="æ”¯æŒå‘é‡æœºç®—æ³•æ€»ç»“"></a>æ”¯æŒå‘é‡æœºç®—æ³•æ€»ç»“</h2><ul><li>ä¼˜ç‚¹ï¼š<ul><li>è§£å†³é«˜ç»´ç‰¹å¾çš„åˆ†ç±»é—®é¢˜å’Œå›å½’é—®é¢˜å¾ˆæœ‰æ•ˆï¼Œåœ¨ç‰¹å¾ç»´åº¦å¤§äºæ ·æœ¬æ•°æ—¶ä¾ç„¶æœ‰å¾ˆå¥½çš„æ•ˆæœ  </li><li>ç¨€ç–æ€§ï¼šä»…ä»…ä½¿ç”¨æ”¯æŒå‘é‡æ¥åšè¶…å¹³é¢çš„å†³ç­–ï¼Œæ— éœ€ä¾èµ–å…¨éƒ¨æ•°æ® </li><li>æ ¸å‡½æ•°å¯ä»¥å¾ˆçµæ´»çš„æ¥è§£å†³å„ç§éçº¿æ€§çš„åˆ†ç±»å›å½’é—®é¢˜ </li><li>æ ·æœ¬é‡ä¸æ˜¯æµ·é‡æ•°æ®çš„æ—¶å€™ï¼Œåˆ†ç±»å‡†ç¡®ç‡é«˜ï¼Œæ³›åŒ–èƒ½åŠ›å¼º</li></ul></li><li>ç¼ºç‚¹ï¼š<ul><li>å¦‚æœç‰¹å¾ç»´åº¦è¿œè¿œå¤§äºæ ·æœ¬æ•°ï¼Œåˆ™SVMè¡¨ç°ä¸€èˆ¬ </li><li>SVMåœ¨æ ·æœ¬é‡éå¸¸å¤§ï¼Œæ ¸å‡½æ•°æ˜ å°„ç»´åº¦éå¸¸é«˜æ—¶ï¼Œè®¡ç®—é‡è¿‡å¤§ï¼Œä¸å¤ªé€‚åˆä½¿ç”¨ </li><li>SVMå¯¹ç¼ºå¤±æ•°æ®æ•æ„Ÿ</li></ul></li></ul><h2 id="ä»£ç å®ä¾‹"><a href="#ä»£ç å®ä¾‹" class="headerlink" title="ä»£ç å®ä¾‹"></a>ä»£ç å®ä¾‹</h2><p><code>In[1]</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> sklearn <span class="keyword">as</span> sk</span><br><span class="line"><span class="keyword">import</span> scipy <span class="keyword">as</span> sp</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> matplotlib.gridspec <span class="keyword">as</span> gridspec</span><br><span class="line"><span class="keyword">import</span> itertools</span><br><span class="line"></span><br><span class="line">%matplotlib inline</span><br><span class="line">%config InlineBackend.figure_format = <span class="string">'retina'</span></span><br></pre></td></tr></table></figure><h3 id="SVC-Support-Vector-Classificaiton-æ”¯æŒå‘é‡åˆ†ç±»"><a href="#SVC-Support-Vector-Classificaiton-æ”¯æŒå‘é‡åˆ†ç±»" class="headerlink" title="SVC: Support Vector Classificaiton æ”¯æŒå‘é‡åˆ†ç±»"></a>SVC: Support Vector Classificaiton æ”¯æŒå‘é‡åˆ†ç±»</h3><p><code>In[2]</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> sklearn.svm <span class="keyword">import</span> SVC, LinearSVC</span><br></pre></td></tr></table></figure><ul><li>åœ¨libsvmçš„åŸºç¡€ä¸Šå®ç°</li><li>æ—¶é—´å¤æ‚åº¦ï¼š more than $O(n^2)$</li><li>å¯¹äºå¤§çš„æ ·æœ¬é‡ï¼ˆæ¯”å¦‚å¤šäº10000ä¸ªæ ·æœ¬ï¼‰ï¼Œéš¾ä»¥å¾ˆå¥½çš„scale</li><li>å¤šç±»åˆ†ç±»é—®é¢˜ï¼Œæ˜¯åŸºäº OVOï¼ˆone vs oneï¼‰çš„ç®—æ³•</li><li>å¯ä»¥å®ç°ä¸åŒçš„kernelå‡½æ•°</li></ul><p><code>In[3]</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#linear_svc = LinearSVC()</span></span><br><span class="line">linear_svc = SVC(kernel = <span class="string">"linear"</span>)</span><br><span class="line">print(linear_svc)</span><br></pre></td></tr></table></figure><p><code>Out[3]</code></p><pre><code>SVC(C=1.0, cache_size=200, class_weight=None, coef0=0.0,  decision_function_shape=&#39;ovr&#39;, degree=3, gamma=&#39;auto_deprecated&#39;,  kernel=&#39;linear&#39;, max_iter=-1, probability=False, random_state=None,  shrinking=True, tol=0.001, verbose=False)</code></pre><p><code>In[4]</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">svc = SVC()</span><br><span class="line">print(svc)</span><br></pre></td></tr></table></figure><p><code>Out[4]</code></p><pre><code>SVC(C=1.0, cache_size=200, class_weight=None, coef0=0.0,  decision_function_shape=&#39;ovr&#39;, degree=3, gamma=&#39;auto_deprecated&#39;,  kernel=&#39;rbf&#39;, max_iter=-1, probability=False, random_state=None,  shrinking=True, tol=0.001, verbose=False)</code></pre><ul><li>C : æµ®ç‚¹ï¼ˆfloatï¼‰ï¼Œé»˜è®¤å€¼ä¸º1.0<script type="math/tex; mode=display">\begin{align}& J(\boldsymbol{w}) = \sum_{i=1}^m{\max(1-y_i{\boldsymbol{w}^T\boldsymbol{x}_i, 0)}}+\lambda \|\boldsymbol{w} \|^2 \\\Rightarrow \ \ & J(\boldsymbol{w}) = C\sum_{i=1}^m{\max(1-y_i{\boldsymbol{w}^T\boldsymbol{x}_i, 0)}}+ \|\boldsymbol{w} \|^2 \\\end{align}</script></li><li><p><strong>Cæ˜¯å…¶ä»–ç®—æ³•é‡Œæ­£åˆ™åŒ–å¼ºåº¦ $\lambda$ çš„å€’æ•°ï¼ŒCè¶Šå¤§ï¼Œæ­£åˆ™åŒ–å¼ºåº¦è¶Šå°ï¼Œ å®¹æ˜“è¿‡æ‹Ÿåˆ</strong></p></li><li><p>kernel : å’Œå‡½æ•°ï¼Œè¾“å…¥å€¼æ˜¯string,  é»˜è®¤å€¼æ˜¯ â€œrbfâ€ï¼ˆé«˜æ–¯ï¼‰ï¼Œäº¦æˆ–æ˜¯</p><ol><li><p>â€œlinearâ€ï¼š çº¿æ€§$\ \ k(x_1,x_2) = x_1^Tx_2$  </p></li><li><p>â€œpolyâ€ï¼š å¤šé¡¹å¼ $\ k(x_1,x_2) = (x_1^Tx_2 + r)^d $  </p></li><li><p>â€œrbfâ€: é«˜æ–¯$\ \ \ k(x_1,x_2) = e^{-\frac{|x_1-x_2|^2}{2\sigma^2}} = e^{-\gamma (x_1-x_2)^2}$  </p></li><li><p>â€sigmoidâ€œ$\ \ \ \ k(x_1,x_2) = tanh(\beta x_1^Tx_2 + \theta), \beta &gt;0, \theta &lt;0$</p></li></ol></li></ul><ul><li><p>decision function: â€œovrâ€œï¼ˆone vs restï¼‰ or â€ovoâ€œï¼ˆone vs oneï¼‰ é’ˆå¯¹äºå¤šç±»åˆ†ç±»ï¼š</p><ul><li><strong>ovrï¼š ä¼šæœ‰n_labelsä¸ªåˆ†ç±»å™¨</strong></li><li><strong>ovoï¼š ä¼šæœ‰n_labels(n_labels-1)/2ä¸ªåˆ†ç±»å™¨</strong></li></ul></li></ul><p><code>In[5]</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> sklearn.model_selection <span class="keyword">import</span> train_test_split</span><br><span class="line"><span class="keyword">from</span> sklearn.preprocessing <span class="keyword">import</span> StandardScaler</span><br><span class="line"><span class="keyword">from</span> sklearn.datasets <span class="keyword">import</span> make_moons, make_circles, make_classification, make_blobs</span><br><span class="line"><span class="keyword">from</span> sklearn.svm <span class="keyword">import</span> SVC</span><br><span class="line"><span class="keyword">from</span> sklearn.gaussian_process.kernels <span class="keyword">import</span> RBF</span><br><span class="line"><span class="keyword">from</span> matplotlib.colors <span class="keyword">import</span> ListedColormap</span><br></pre></td></tr></table></figure><p><code>In[6]</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">X, y = make_classification(n_features = <span class="number">2</span>, n_redundant = <span class="number">0</span>, n_informative = <span class="number">2</span>, n_samples= <span class="number">200</span>,</span><br><span class="line">                           random_state = <span class="number">1</span>, n_clusters_per_class = <span class="number">1</span>)</span><br><span class="line">rng = np.random.RandomState(<span class="number">2</span>)</span><br><span class="line">X += <span class="number">2</span> * rng.uniform(size=X.shape)</span><br></pre></td></tr></table></figure><p><code>In[7]</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">print(np.unique(y))</span><br></pre></td></tr></table></figure><pre><code>[0 1]</code></pre><p><code>In[8]</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">print(X.shape)</span><br><span class="line">print(y.shape)</span><br></pre></td></tr></table></figure><pre><code>(200, 2)(200,)</code></pre><p><code>In[9]</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cm = plt.cm.RdBu</span><br><span class="line">cm_bright = ListedColormap([<span class="string">'#FF0000'</span>, <span class="string">'#0000FF'</span>])</span><br></pre></td></tr></table></figure><p><code>In[10]</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">plt.scatter(X[:,<span class="number">0</span>], X[:, <span class="number">1</span>], c = y)</span><br><span class="line">plt.xlabel(<span class="string">"x1"</span>)</span><br><span class="line">plt.ylabel(<span class="string">"x2"</span>)</span><br></pre></td></tr></table></figure><pre><code>Text(0, 0.5, &#39;x2&#39;)</code></pre><p><img src="https://i.loli.net/2019/04/21/5cbc310c18910.png" alt="png"></p><h4 id="Linear-SVM"><a href="#Linear-SVM" class="headerlink" title="Linear SVM"></a>Linear SVM</h4><p><code>In[11]</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># çº¿æ€§æ ¸å‡½æ•°çš„æ”¯æŒå‘é‡æœºå»è®­ç»ƒæ ·æœ¬</span></span><br><span class="line">C = <span class="number">0.1</span></span><br><span class="line">clf = SVC(kernel = <span class="string">"linear"</span>, C = C)</span><br><span class="line"></span><br><span class="line"><span class="comment"># åœ¨è®­ç»ƒä¹‹å‰å¯¹æ•°æ®è¿›è¡Œnormalization</span></span><br><span class="line">X = StandardScaler().fit_transform(X)</span><br><span class="line"></span><br><span class="line">print(X.shape, y.shape)</span><br></pre></td></tr></table></figure><pre><code>(200, 2) (200,)</code></pre><p><code>In[12]</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> sklearn.metrics <span class="keyword">import</span> precision_score, recall_score, f1_score, confusion_matrix</span><br><span class="line"><span class="keyword">from</span> mlxtend.plotting <span class="keyword">import</span> plot_decision_regions</span><br></pre></td></tr></table></figure><p><code>In[13]</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">%%time </span><br><span class="line">clf.fit(X, y)</span><br><span class="line">y_pred = clf.predict(X)</span><br></pre></td></tr></table></figure><pre><code>CPU times: user 2.32 ms, sys: 1.58 ms, total: 3.9 msWall time: 4.46 ms</code></pre><p><code>In[14]</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">prec = precision_score(y_true = y, y_pred = y_pred, pos_label = <span class="number">1</span>)</span><br><span class="line">rec = recall_score(y_true = y, y_pred = y_pred, pos_label = <span class="number">1</span>)</span><br><span class="line">f1 = f1_score(y_true = y, y_pred = y_pred, pos_label = <span class="number">1</span>)</span><br><span class="line">print(<span class="string">"Precision score is : &#123;:.2f&#125;"</span>.format(prec))</span><br><span class="line">print(<span class="string">"Recall score is : &#123;:.2f&#125;"</span>.format(rec))</span><br><span class="line">print(<span class="string">"f1 score is : &#123;:.2f&#125;"</span>.format(f1))</span><br><span class="line">print(<span class="string">"Confusion matrix is :"</span>) </span><br><span class="line">print(confusion_matrix(y_pred = y_pred, y_true = y))</span><br></pre></td></tr></table></figure><pre><code>Precision score is : 0.88Recall score is : 0.85f1 score is : 0.87Confusion matrix is :[[90 11] [15 84]]</code></pre><p><code>In[15]</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">plot_decision_regions(X, y, clf = clf, colors = <span class="string">'orange,navy'</span>)</span><br><span class="line">plt.title(<span class="string">"SVM with linear kernel"</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><p><img src="https://i.loli.net/2019/04/21/5cbc310bf2d06.png" alt="png"></p><h4 id="SVM-with-rbf-kernel"><a href="#SVM-with-rbf-kernel" class="headerlink" title="SVM with rbf kernel"></a>SVM with rbf kernel</h4><p><code>In[16]</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">C = <span class="number">0.1</span></span><br><span class="line"><span class="comment">#clf = SVC(kernel = "rbf", gamma = 2., C = C)</span></span><br><span class="line">clf = SVC(gamma = <span class="number">2.</span>, C = C)</span><br><span class="line"></span><br><span class="line">clf.fit(X, y)</span><br><span class="line">y_pred = clf.predict(X)</span><br><span class="line"></span><br><span class="line">prec = precision_score(y_true = y, y_pred = y_pred, pos_label = <span class="number">1</span>)</span><br><span class="line">rec = recall_score(y_true = y, y_pred = y_pred, pos_label = <span class="number">1</span>)</span><br><span class="line">f1 = f1_score(y_true = y, y_pred = y_pred, pos_label = <span class="number">1</span>)</span><br><span class="line">print(<span class="string">"Precision score is : &#123;:.2f&#125;"</span>.format(prec))</span><br><span class="line">print(<span class="string">"Recall score is : &#123;:.2f&#125;"</span>.format(rec))</span><br><span class="line">print(<span class="string">"f1 score is : &#123;:.2f&#125;"</span>.format(f1))</span><br><span class="line">print(<span class="string">"Confusion matrix is :"</span>) </span><br><span class="line">print(confusion_matrix(y_pred = y_pred, y_true = y))</span><br><span class="line"></span><br><span class="line">plot_decision_regions(X, y, clf = clf, colors = <span class="string">'orange,navy'</span>)</span><br><span class="line">plt.title(<span class="string">"SVM with rbf kernel"</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><pre><code>Precision score is : 0.85Recall score is : 0.86f1 score is : 0.85Confusion matrix is :[[86 15] [14 85]]</code></pre><p><img src="https://i.loli.net/2019/04/21/5cbc310bf38ed.png" alt="png"></p><p>æ¥ä¸‹æ¥å®šä¹‰ä¸åŒå‚æ•°ï¼Œå¯¹æ¯”ä¸åŒçš„ç»“æœ</p><p><code>In[17]</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">C_list = [<span class="number">0.1</span>, <span class="number">1.</span>, <span class="number">10.</span>]</span><br><span class="line">gamma_list = [<span class="number">0.2</span>, <span class="number">2.</span>, <span class="number">20.</span>]</span><br></pre></td></tr></table></figure><h5 id="SVM-é«˜æ–¯æ ¸å‡½æ•°å‚æ•°1-C"><a href="#SVM-é«˜æ–¯æ ¸å‡½æ•°å‚æ•°1-C" class="headerlink" title="SVM é«˜æ–¯æ ¸å‡½æ•°å‚æ•°1: C"></a>SVM é«˜æ–¯æ ¸å‡½æ•°å‚æ•°1: C</h5><ul><li>å…¶ä¸­ Cæ˜¯æƒ©ç½šç³»æ•°ï¼Œå³å¯¹è¯¯å·®çš„å®½å®¹åº¦</li><li>C è¶Šå°ï¼Œ æ­£åˆ™åŒ–å¼ºåº¦è¶Šå¤§ï¼Œå®¹æ˜“æ¬ æ‹Ÿåˆ</li><li>C è¶Šå¤§ï¼Œ è¯´æ˜è¶Šä¸èƒ½å®¹å¿å‡ºç°è¯¯å·®,å®¹æ˜“è¿‡æ‹Ÿåˆ</li></ul><p><code>In[18]</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">plt.figure(figsize = (<span class="number">15</span>, <span class="number">5</span>))</span><br><span class="line"><span class="keyword">for</span> i, C <span class="keyword">in</span> enumerate(C_list):</span><br><span class="line">    clf = SVC(C = C)</span><br><span class="line">    clf.fit(X, y)</span><br><span class="line">    <span class="comment">#y_pred = clf.predict(X)</span></span><br><span class="line">    plt.subplot(<span class="number">1</span>, len(C_list), i + <span class="number">1</span>)</span><br><span class="line">    plot_decision_regions(X, y, clf = clf)</span><br><span class="line">    plt.title(<span class="string">"SVM with rbf kernel, C = &#123;:.4f&#125;"</span>.format(C))</span><br><span class="line">plt.tight_layout()</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><p><img src="https://i.loli.net/2019/04/21/5cbc310c26621.png" alt="png"></p><h5 id="SVM-é«˜æ–¯æ ¸å‡½æ•°å‚æ•°2-gamma"><a href="#SVM-é«˜æ–¯æ ¸å‡½æ•°å‚æ•°2-gamma" class="headerlink" title="SVM é«˜æ–¯æ ¸å‡½æ•°å‚æ•°2: gamma"></a>SVM é«˜æ–¯æ ¸å‡½æ•°å‚æ•°2: gamma</h5><ul><li>gammaæ˜¯é€‰æ‹©RBFå‡½æ•°ä½œä¸ºkernelåï¼Œè¯¥å‡½æ•°è‡ªå¸¦çš„ä¸€ä¸ªå‚æ•°</li><li>éšå«åœ°å†³å®šäº†æ•°æ®æ˜ å°„åˆ°æ–°çš„ç‰¹å¾ç©ºé—´åçš„åˆ†å¸ƒ</li><li>gammaè¶Šå¤§ï¼Œå•ä¸ªæ ·æœ¬å¯¹æ•´ä¸ªåˆ†ç±»è¶…å¹³é¢çš„å½±å“æ¯”è¾ƒå¤§ï¼Œæ•´ä¸ªæ¨¡å‹çš„æ”¯æŒå‘é‡ä¹Ÿä¼šå¤šï¼Œ è¿‡æ‹Ÿåˆ</li><li>gammaå€¼è¶Šå°ï¼Œå•ä¸ªæ ·æœ¬å¯¹æ•´ä¸ªåˆ†ç±»è¶…å¹³é¢çš„å½±å“æ¯”è¾ƒå°ï¼Œä¸å®¹æ˜“è¢«é€‰æ‹©ä¸ºæ”¯æŒå‘é‡ï¼Œå®¹æ˜“æ¬ æ‹Ÿåˆ<script type="math/tex; mode=display">k(x_1,x_2) = e^{-\frac{|x_1-x_2|^2}{2\sigma^2}} = e^{-\gamma (x_1-x_2)^2}</script></li></ul><p><code>In[19]</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">gamma_list = [<span class="number">0.05</span>, <span class="number">2.</span>, <span class="number">20.</span>]</span><br><span class="line">plt.figure(figsize = (<span class="number">15</span>, <span class="number">5</span>))</span><br><span class="line"><span class="keyword">for</span> i, gamma <span class="keyword">in</span> enumerate(gamma_list):</span><br><span class="line">    clf = SVC(gamma = gamma, C = <span class="number">1.0</span>)</span><br><span class="line">    clf.fit(X, y)</span><br><span class="line">    <span class="comment">#y_pred = clf.predict(X)</span></span><br><span class="line">    plt.subplot(<span class="number">1</span>, len(C_list), i + <span class="number">1</span>)</span><br><span class="line">    plot_decision_regions(X, y, clf = clf)</span><br><span class="line">    plt.title(<span class="string">"SVM with rbf kernel, gamma = &#123;:.2f&#125;"</span>.format(gamma))</span><br><span class="line">plt.tight_layout()</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><p><img src="https://i.loli.net/2019/04/21/5cbc310c26fd3.png" alt="png"></p><h4 id="ä¸åŒSVMæ ¸å‡½æ•°å¯¹æ¯”"><a href="#ä¸åŒSVMæ ¸å‡½æ•°å¯¹æ¯”" class="headerlink" title="ä¸åŒSVMæ ¸å‡½æ•°å¯¹æ¯”"></a>ä¸åŒSVMæ ¸å‡½æ•°å¯¹æ¯”</h4><p><code>In[20]</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">names = [ <span class="string">"Linear SVM"</span>, <span class="string">"rbf SVM"</span>, <span class="string">"Poly SVM"</span>, <span class="string">"Sigmoid SVM"</span>]</span><br><span class="line"></span><br><span class="line">models = [</span><br><span class="line">            SVC(kernel = <span class="string">"linear"</span>, C = C), </span><br><span class="line">            SVC(kernel = <span class="string">"rbf"</span>, gamma = <span class="number">2</span>, C = C), <span class="comment"># or SVC(gamma = 2, C = 1)</span></span><br><span class="line">            SVC(kernel = <span class="string">"poly"</span>, degree = <span class="number">5</span>, C = C),</span><br><span class="line">            SVC(kernel = <span class="string">"sigmoid"</span>, C = C)</span><br><span class="line">         ]</span><br><span class="line"></span><br><span class="line">figure = plt.figure(figsize=(<span class="number">10</span>, <span class="number">10</span>))</span><br><span class="line"><span class="keyword">assert</span> len(names) == len(models)</span><br><span class="line"><span class="keyword">for</span> i, (clf_name, clf) <span class="keyword">in</span> enumerate(zip(names, models)):</span><br><span class="line">    plt.subplot((len(models)+<span class="number">1</span>)/<span class="number">2</span>, <span class="number">2</span>, i + <span class="number">1</span>)</span><br><span class="line">    clf.fit(X, y)</span><br><span class="line">    plot_decision_regions(X, y, clf)</span><br><span class="line">    plt.title(clf_name, fontsize = <span class="number">12</span>)</span><br><span class="line">plt.tight_layout()</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><p><img src="https://i.loli.net/2019/04/21/5cbc310c31cb7.png" alt="png"></p><h4 id="å¤šç±»åˆ†ç±»ï¼šmulticlass-classficiation"><a href="#å¤šç±»åˆ†ç±»ï¼šmulticlass-classficiation" class="headerlink" title="å¤šç±»åˆ†ç±»ï¼šmulticlass classficiation"></a>å¤šç±»åˆ†ç±»ï¼šmulticlass classficiation</h4><ul><li>OVO</li><li>OVR</li></ul><p><code>In[21]</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> sklearn.multiclass <span class="keyword">import</span> OneVsOneClassifier, OneVsRestClassifier</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">X2, Y2 = make_blobs(n_samples=<span class="number">200</span>, n_features = <span class="number">2</span>, centers = <span class="number">5</span>, random_state=<span class="number">1</span>,cluster_std = <span class="number">1</span>)</span><br></pre></td></tr></table></figure><p><code>In[22]</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">print(np.unique(Y2))</span><br></pre></td></tr></table></figure><pre><code>[0 1 2 3 4]</code></pre><p><code>In[23]</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">plt.scatter(X2[:,<span class="number">0</span>], X2[:,<span class="number">1</span>], c = Y2)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><p><img src="https://i.loli.net/2019/04/21/5cbc310c1a556.png" alt="png"></p><p><code>In[24]</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">rbf_ovr = SVC(kernel = <span class="string">'rbf'</span>, decision_function_shape = <span class="string">"ovr"</span>, gamma=<span class="string">'auto'</span>)</span><br><span class="line"><span class="comment">#rbf_ovo = SVC(kernel = 'rbf', decision_function_shape = "ovo")</span></span><br><span class="line">rbf_ovo = OneVsOneClassifier(SVC(kernel = <span class="string">"rbf"</span>, gamma=<span class="string">'auto'</span>))</span><br><span class="line">linear_ovr = SVC(kernel = <span class="string">'linear'</span>, decision_function_shape = <span class="string">"ovr"</span>, gamma=<span class="string">'auto'</span>)</span><br><span class="line"><span class="comment">#linear_ovo = SVC(kernel = 'linear', decision_function_shape = "ovo")</span></span><br><span class="line">linear_ovo = OneVsOneClassifier(SVC(kernel = <span class="string">"linear"</span>))</span><br></pre></td></tr></table></figure><p><code>In[25]</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">gs = gridspec.GridSpec(<span class="number">2</span>, <span class="number">2</span>)</span><br><span class="line">fig = plt.figure(figsize=(<span class="number">10</span>, <span class="number">8</span>))</span><br><span class="line"></span><br><span class="line">clfs = [rbf_ovr, rbf_ovo, linear_ovr, linear_ovo]</span><br><span class="line">names = [<span class="string">"RBF SVM OVR"</span>, <span class="string">"RBF SVM OVO"</span>, <span class="string">"Linear SVM OVR"</span>, <span class="string">"Linear SVM OVO"</span>]</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> clf, lab, grd <span class="keyword">in</span> zip(clfs, names, itertools.product([<span class="number">0</span>, <span class="number">1</span>], repeat=<span class="number">2</span>)):</span><br><span class="line">    ax = plt.subplot(gs[grd[<span class="number">0</span>], grd[<span class="number">1</span>]])</span><br><span class="line">    clf.fit(X2, Y2)</span><br><span class="line">    fig = plot_decision_regions(X=X2, y=Y2, clf=clf, legend=<span class="number">2</span>)</span><br><span class="line">    plt.title(lab)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><p><img src="https://i.loli.net/2019/04/21/5cbc310c41c4c.png" alt="png"></p><h3 id="SVR-Support-Vector-Regression-æ”¯æŒå‘é‡å›å½’"><a href="#SVR-Support-Vector-Regression-æ”¯æŒå‘é‡å›å½’" class="headerlink" title="SVR: Support Vector Regression æ”¯æŒå‘é‡å›å½’"></a>SVR: Support Vector Regression æ”¯æŒå‘é‡å›å½’</h3><p><code>In[26]</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> sklearn.svm <span class="keyword">import</span> SVR</span><br></pre></td></tr></table></figure><p><code>In[27]</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ•°æ®</span></span><br><span class="line">X = np.sort(<span class="number">5</span> * np.random.rand(<span class="number">40</span>, <span class="number">1</span>), axis=<span class="number">0</span>)</span><br><span class="line">y = np.sin(X).ravel()</span><br><span class="line"></span><br><span class="line"><span class="comment"># äººä¸ºå¢åŠ ä¸€äº›å™ªå£°</span></span><br><span class="line">y[::<span class="number">5</span>] += <span class="number">3</span> * (<span class="number">0.5</span> - np.random.rand(<span class="number">8</span>))</span><br><span class="line"></span><br><span class="line">plt.scatter(X, y)</span><br><span class="line">plt.xlabel(<span class="string">"X"</span>)</span><br><span class="line">plt.ylabel(<span class="string">"y"</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><p><img src="https://i.loli.net/2019/04/21/5cbc310bd8e38.png" alt="png"></p><p><code>In[28]</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># SVR æ‹Ÿåˆæ•°æ®</span></span><br><span class="line">C = <span class="number">1e3</span></span><br><span class="line">svr_rbf = SVR(kernel=<span class="string">'rbf'</span>, C = C, gamma = <span class="number">0.1</span>)</span><br><span class="line">svr_lin = SVR(kernel=<span class="string">'linear'</span>, C = C)</span><br><span class="line">svr_poly = SVR(kernel=<span class="string">'poly'</span>, C = C, degree = <span class="number">2</span>, gamma=<span class="string">'auto'</span>)</span><br><span class="line">y_rbf = svr_rbf.fit(X, y).predict(X)</span><br><span class="line">y_lin = svr_lin.fit(X, y).predict(X)</span><br><span class="line">y_poly = svr_poly.fit(X, y).predict(X)</span><br><span class="line"></span><br><span class="line">lw = <span class="number">4</span></span><br><span class="line">plt.figure(figsize = (<span class="number">10</span>,<span class="number">5</span>))</span><br><span class="line">plt.scatter(X, y, color=<span class="string">'darkorange'</span>, label=<span class="string">'data'</span>)</span><br><span class="line">plt.plot(X, y_rbf, color=<span class="string">'navy'</span>, lw = lw, label=<span class="string">'RBF model'</span>)</span><br><span class="line">plt.plot(X, y_lin, color=<span class="string">'c'</span>, lw = lw, label=<span class="string">'Linear model'</span>)</span><br><span class="line">plt.plot(X, y_poly, color=<span class="string">'cornflowerblue'</span>, lw=lw, label=<span class="string">'Polynomial model'</span>)</span><br><span class="line">plt.xlabel(<span class="string">'data'</span>)</span><br><span class="line">plt.ylabel(<span class="string">'target'</span>)</span><br><span class="line">plt.title(<span class="string">'Support Vector Regression'</span>)</span><br><span class="line">plt.legend(loc = <span class="string">'lower left'</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><p><img src="https://i.loli.net/2019/04/21/5cbc310c1e34e.png" alt="png"></p>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;ç®€ä»‹&quot;&gt;&lt;a href=&quot;#ç®€ä»‹&quot; class=&quot;headerlink&quot; title=&quot;ç®€ä»‹&quot;&gt;&lt;/a&gt;ç®€ä»‹&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;æ”¯æŒå‘é‡æœºä¸ä¸Šä¸–çºª90å¹´ä»£æ­£å¼ç”±Vapnikå’ŒCortesæ­£å¼å‘è¡¨ï¼Œåœ¨æ–‡æœ¬åˆ†ç±»ä»»åŠ¡ä¸­æ˜¾ç¤º å‡ºå“è¶Šæ€§èƒ½ï¼Œå¾ˆå¿«æˆä¸ºæœºå™¨å­¦ä¹ ä¸»æµæŠ€æœ¯ï¼Œç›´æ¥æ€èµ·äº†2000å¹´å‰åç»Ÿè®¡å­¦ä¹ çš„é«˜æ½®ã€‚&lt;/li&gt;
&lt;li&gt;æ”¯æŒå‘é‡æœºæ€æƒ³ç›´è§‚ï¼Œä½†ç»†èŠ‚å¤æ‚ï¼Œæ¶µç›–å‡¸ä¼˜åŒ–ï¼Œæ ¸å‡½æ•°ï¼Œæ‹‰æ ¼æœ—æ—¥ç®—å­ç­‰ç†è®º&lt;/li&gt;
&lt;li&gt;æ”¯æŒå‘é‡æœº ï¼ˆsupport vector machineï¼‰ï¼š &lt;ul&gt;
&lt;li&gt;äºŒåˆ†ç±»æ¨¡å‹ï¼Œä¹Ÿå¯ç”¨äºå›å½’åˆ†æ&lt;/li&gt;
&lt;li&gt;å­¦ä¹ ç­–ç•¥ï¼š æœ€å¤§é—´éš”åŒ– &lt;/li&gt;
&lt;li&gt;å‡¸ä¼˜åŒ–ï¼Œå¯¹å¶ï¼ŒKKTæ¡ä»¶&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
    
    </summary>
    
      <category term="Note" scheme="https://marara.xin/categories/Note/"/>
    
    
      <category term="Statistics" scheme="https://marara.xin/tags/Statistics/"/>
    
      <category term="Machine Learning" scheme="https://marara.xin/tags/Machine-Learning/"/>
    
  </entry>
  
  <entry>
    <title>æ¨èç³»ç»Ÿä¸­çš„NDCG</title>
    <link href="https://marara.xin/2019/04/20/%E6%8E%A8%E8%8D%90%E7%B3%BB%E7%BB%9F%E4%B8%AD%E7%9A%84NDCG/"/>
    <id>https://marara.xin/2019/04/20/æ¨èç³»ç»Ÿä¸­çš„NDCG/</id>
    <published>2019-04-20T11:02:51.318Z</published>
    <updated>2020-03-11T06:31:46.906Z</updated>
    
    <content type="html"><![CDATA[<p>NDCGåˆ™æ˜¯è€ƒè™‘åˆ°è¯„åˆ†çš„æ’åºï¼Œè¯´åˆ°NDCGå°±éœ€è¦ä»CGå¼€å§‹è¯´èµ·ã€‚</p><p>CGï¼ˆcumulative gainï¼Œç´¯è®¡å¢ç›Šï¼‰å¯ä»¥ç”¨äºè¯„ä»·åŸºäºæ‰“åˆ†/è¯„åˆ†çš„ä¸ªæ€§æ¨èç³»ç»Ÿã€‚å‡è®¾æˆ‘ä»¬æ¨è $k$ ä¸ªç‰©å“ï¼Œè¿™ä¸ªæ¨èåˆ—è¡¨çš„ $CG_k$ è®¡ç®—å…¬å¼å¦‚ä¸‹ï¼š</p><script type="math/tex; mode=display">C G_{k}=\sum_{i=1}^{k} \mathrm{rel}_{i}</script><a id="more"></a><p>$rel_i$ è¡¨ç¤ºç¬¬ $k$ ä¸ªç‰©å“çš„ç›¸å…³æ€§æˆ–è€…è¯„åˆ†ã€‚å‡è®¾æˆ‘ä»¬å…±æ¨è $k$ ä¸ªç”µå½±ï¼Œ$rel_i$ å¯ä»¥æ˜¯ç”¨æˆ·å¯¹ç¬¬ $i$ éƒ¨ç”µå½±çš„è¯„åˆ†ã€‚</p><p>æ¯”å¦‚è±†ç“£ç»™ç”¨æˆ·æ¨èäº†äº”éƒ¨ç”µå½±ï¼Œ</p><script type="math/tex; mode=display">M_{1},\ M_{2},\ M_{3},\ M_{4}, \ M_{5}</script><p>è¯¥ç”¨æˆ·å¯¹è¿™äº”éƒ¨ç”µå½±çš„è¯„åˆ†åˆ†åˆ«æ˜¯ 5, 3, 2, 1, 2</p><p>é‚£ä¹ˆè¿™ä¸ªæ¨èåˆ—è¡¨çš„CGç­‰äºï¼š</p><script type="math/tex; mode=display">C G_{5}=5+3+2+1+2=13</script><p>CGæ²¡æœ‰è€ƒè™‘æ¨èçš„æ¬¡åºï¼Œåœ¨æ­¤åŸºç¡€ä¹‹åæˆ‘ä»¬å¼•å…¥å¯¹ç‰©å“é¡ºåºçš„è€ƒè™‘ï¼Œå°±æœ‰äº†DCG(discounted CG)ï¼ŒæŠ˜æ‰£ç´¯ç§¯å¢ç›Šã€‚å…¬å¼å¦‚ä¸‹ï¼š</p><script type="math/tex; mode=display">D C G_{k}=\sum_{i=1}^{k} \frac{2^{\mathrm{rel}_{i}}-1}{\log _{2}(i+1)}</script><p>æ¯”å¦‚è±†ç“£ç»™ç”¨æˆ·æ¨èäº†äº”éƒ¨ç”µå½±ï¼Œ</p><script type="math/tex; mode=display">M_{1},\ M_{2},\ M_{3},\ M_{4}, \ M_{5}</script><p>è¯¥ç”¨æˆ·å¯¹è¿™äº”éƒ¨ç”µå½±çš„è¯„åˆ†åˆ†åˆ«æ˜¯ 5, 3, 2, 1, 2</p><p>é‚£ä¹ˆè¿™ä¸ªæ¨èåˆ—è¡¨çš„DCGç­‰äºï¼š</p><script type="math/tex; mode=display">\begin{align}DCG_5&=\frac{2^5-1}{\log_2 2}+\frac{2^3-1}{\log_2 3}+\frac{2^2-1}{\log_2 4}+\frac{2^1-1}{\log_2 5}+\frac{2^2-1}{\log_2 6}\\&=31+4.4+1.5+0.4+1.2\\&=38.5\end{align}</script><p>DCGæ²¡æœ‰è€ƒè™‘åˆ°æ¨èåˆ—è¡¨å’Œæ¯ä¸ªæ£€ç´¢ä¸­çœŸæ­£æœ‰æ•ˆç»“æœä¸ªæ•°ï¼Œæ‰€ä»¥æœ€åæˆ‘ä»¬å¼•å…¥NDCG(normalized discounted CG)ï¼Œé¡¾åæ€ä¹‰å°±æ˜¯æ ‡å‡†åŒ–ä¹‹åçš„DCGã€‚</p><script type="math/tex; mode=display">NDCG_k=\frac{DCG_k}{IDCG_k}</script><p>å…¶ä¸­ $IDCG$ æ˜¯æŒ‡ ideal DCGï¼Œä¹Ÿå°±æ˜¯å®Œç¾ç»“æœä¸‹çš„ DCGã€‚</p><p>ç»§ç»­ä¸Šé¢çš„ä¾‹å­ï¼Œå¦‚æœç›¸å…³ç”µå½±ä¸€å…±æœ‰7éƒ¨</p><script type="math/tex; mode=display">M_{1},\ M_{2},\ M_{3},\ M_{4}, \ M_{5}, \ M_{6}, \ M_{7}</script><p>è¯¥ç”¨æˆ·å¯¹è¿™ä¸ƒéƒ¨ç”µå½±çš„è¯„åˆ†åˆ†åˆ«æ˜¯</p><p>5, 3, 2, 1, 2 , 4, 0</p><p>æŠŠè¿™7éƒ¨ç”µå½±æŒ‰è¯„åˆ†æ’åº</p><p>5, 4, 3, 2, 2, 1, 0</p><p>è¿™ä¸ªæƒ…å†µä¸‹çš„å®Œç¾DCGæ˜¯</p><script type="math/tex; mode=display">\begin{align}IDCG_5&=\frac{2^5-1}{\log_2 2}+\frac{2^4-1}{\log_2 3}+\frac{2^3-1}{\log_2 4}+\frac{2^2-1}{\log_2 5}+\frac{2^2-1}{\log_2 6}\\&=31+9.5+3.5+1.3+1.2\\&=46.5\end{align}</script><p>æ‰€ä»¥</p><script type="math/tex; mode=display">NDCG_5 = \frac{DCG_5}{IDCG_5}=\frac{38.5}{46.5}=0.827</script><p>NDCGæ˜¯0åˆ°1çš„æ•°ï¼Œè¶Šæ¥è¿‘1è¯´æ˜æ¨èè¶Šå‡†ç¡®ã€‚ </p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;NDCGåˆ™æ˜¯è€ƒè™‘åˆ°è¯„åˆ†çš„æ’åºï¼Œè¯´åˆ°NDCGå°±éœ€è¦ä»CGå¼€å§‹è¯´èµ·ã€‚&lt;/p&gt;
&lt;p&gt;CGï¼ˆcumulative gainï¼Œç´¯è®¡å¢ç›Šï¼‰å¯ä»¥ç”¨äºè¯„ä»·åŸºäºæ‰“åˆ†/è¯„åˆ†çš„ä¸ªæ€§æ¨èç³»ç»Ÿã€‚å‡è®¾æˆ‘ä»¬æ¨è $k$ ä¸ªç‰©å“ï¼Œè¿™ä¸ªæ¨èåˆ—è¡¨çš„ $CG_k$ è®¡ç®—å…¬å¼å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;script type=&quot;math/tex; mode=display&quot;&gt;
C G_{k}=\sum_{i=1}^{k} \mathrm{rel}_{i}&lt;/script&gt;
    
    </summary>
    
      <category term="Note" scheme="https://marara.xin/categories/Note/"/>
    
    
      <category term="Statistics" scheme="https://marara.xin/tags/Statistics/"/>
    
      <category term="Machine Learning" scheme="https://marara.xin/tags/Machine-Learning/"/>
    
  </entry>
  
  <entry>
    <title>æ‹Ÿåˆçš„åŠ›é“</title>
    <link href="https://marara.xin/2019/02/18/Overfitting_and_Underfitting_With_Machine_Learning_Algorithms/"/>
    <id>https://marara.xin/2019/02/18/Overfitting_and_Underfitting_With_Machine_Learning_Algorithms/</id>
    <published>2019-02-18T07:02:57.124Z</published>
    <updated>2019-02-20T10:18:48.716Z</updated>
    
    <content type="html"><![CDATA[<h2 id="æ¨¡å‹çš„æ‹Ÿåˆ"><a href="#æ¨¡å‹çš„æ‹Ÿåˆ" class="headerlink" title="æ¨¡å‹çš„æ‹Ÿåˆ"></a>æ¨¡å‹çš„æ‹Ÿåˆ</h2><ol><li>æ‹Ÿåˆä¸è¿‡æ‹Ÿåˆ</li><li>å¯¹æŠ—è¿‡æ‹Ÿåˆï¼š<ul><li>äº¤å‰æ£€éªŒ</li><li>æ­£åˆ™åŒ–L1,L2</li></ul></li><li>pythonå®ç°</li><li>pipeline</li><li>æ–¹å·®çš„åˆ†è§£ï¼š<ul><li>ç¦»å·®å¹³æ–¹æ€»å’Œ = å›å½’å¹³æ–¹å’Œ+æ®‹å·®å¹³æ–¹å’Œ ï¼ˆ SST = SSR + SSE ï¼‰</li></ul></li><li>bias and varianceåˆ†è§£ï¼ˆè¿™é‡Œçš„biaså’Œvarianceè·Ÿè¿‡æ‹Ÿåˆçš„biaså’Œvarianceä¸ä¸€æ ·ï¼‰</li></ol><a id="more"></a><h2 id="1-æ‹Ÿåˆä¸è¿‡æ‹Ÿåˆ"><a href="#1-æ‹Ÿåˆä¸è¿‡æ‹Ÿåˆ" class="headerlink" title="1. æ‹Ÿåˆä¸è¿‡æ‹Ÿåˆ"></a>1. æ‹Ÿåˆä¸è¿‡æ‹Ÿåˆ</h2><ul><li>åœ¨è®­ç»ƒæ¨¡å‹æ—¶ï¼Œæ¶‰åŠåˆ°é€‰æ‹©ä¸æ¯”è¾ƒä¸åŒçš„æ¨¡å‹åœ¨è®­ç»ƒé›†å’Œæµ‹è¯•é›†çš„é¢„æµ‹ç»“æœ</li><li>è¿™é‡Œæœ‰Biasä¸Variance</li></ul><h3 id="1-1-æ‹Ÿåˆï¼š"><a href="#1-1-æ‹Ÿåˆï¼š" class="headerlink" title="1.1 æ‹Ÿåˆï¼š"></a>1.1 æ‹Ÿåˆï¼š</h3><ul><li>æŠ“ä½ä¸»è¦ç‰¹å¾ï¼Œä¸»è¦è§„å¾‹ï¼Œä¸»è¦è¶‹åŠ¿ï¼Œå¯ç”¨äºåŒä¸€æ€»ä½“çš„å…¶ä»–é‡‡æ ·æ ·æœ¬çš„ç»“æœé¢„æµ‹</li></ul><p><img src="https://i.loli.net/2019/02/18/5c6a57658396b.gif" width="400"></p><h3 id="1-2-æ¬ æ‹Ÿåˆï¼š"><a href="#1-2-æ¬ æ‹Ÿåˆï¼š" class="headerlink" title="1.2. æ¬ æ‹Ÿåˆï¼š"></a>1.2. æ¬ æ‹Ÿåˆï¼š</h3><ul><li>æ¨¡å‹ä¸å¤Ÿå¤æ‚ï¼Œæ¼æ‰äº†éƒ¨åˆ†æ•°æ®è§„å¾‹</li><li>high bias</li><li>å¢åŠ æ¨¡å‹å¤æ‚åº¦<br><img src="https://i.loli.net/2019/02/18/5c6a5798326cc.png" width="800"></li></ul><h3 id="1-3-è¿‡æ‹Ÿåˆï¼š"><a href="#1-3-è¿‡æ‹Ÿåˆï¼š" class="headerlink" title="1.3. è¿‡æ‹Ÿåˆï¼š"></a>1.3. è¿‡æ‹Ÿåˆï¼š</h3><ul><li>æ¨¡å‹è¿‡äºå¤æ‚ï¼ŒæŠŠæ ·æœ¬çš„éƒ¨åˆ†éšæœºè¯¯å·®å½“ä½œäº†æ€»ä½“çš„æ•°æ®è§„å¾‹ï¼Œå¹¶ç”¨æ¨¡å‹è¿›è¡Œè§£é‡Šã€‚è¿™éƒ¨åˆ†è§£é‡Šå¹¶ä¸èƒ½æ¨å¹¿åˆ°æ€»ä½“åˆ†å¸ƒçš„å…¶ä»–æ ·æœ¬ä¸­ã€‚</li><li>å‡å°‘ä¸å¿…è¦çš„æ¨¡å‹å¤æ‚åº¦<br><img src="https://i.loli.net/2019/02/18/5c6a57984c129.png" width="800"></li></ul><h2 id="2-å¯¹æŠ—è¿‡æ‹Ÿåˆ"><a href="#2-å¯¹æŠ—è¿‡æ‹Ÿåˆ" class="headerlink" title="2. å¯¹æŠ—è¿‡æ‹Ÿåˆ"></a>2. å¯¹æŠ—è¿‡æ‹Ÿåˆ</h2><ul><li>äº¤å‰æ£€éªŒ</li><li><p>æ­£åˆ™åŒ–ï¼ˆregularizationï¼‰</p><ul><li>L1</li><li>L2</li></ul></li><li><p>ä»éªŒè¯è®­ç»ƒç»“æœå…¥æ‰‹ï¼šcross-validation<br><img src="https://i.loli.net/2019/02/18/5c6a5766146cb.png" width="700"></p></li><li><p>ä»é™åˆ¶æ¨¡å‹å¤æ‚åº¦å…¥æ‰‹ï¼šæ­£åˆ™åŒ–ï¼ˆregularizationï¼‰</p></li><li>ä»¥çº¿æ€§å›å½’ä¸ºä¾‹ï¼š<script type="math/tex; mode=display">Loss = \sum_{i=1}^N (y_i - \beta_0 - \sum_{j=1}{p}x_{ij}\beta_j)^2 \\</script>å¦‚æœ $\beta_j$ è¢«é™åˆ¶åœ¨ä¸€ä¸ªè¾ƒå°çš„èŒƒå›´ï¼Œé‚£ä¹ˆæ‰€å¯¹åº”çš„ $x_{ij}$ å¯¹æ¨¡å‹å¤æ‚åº¦å¯¹å½±å“å°±ä¼šå‡å¼±</li></ul><ul><li><p>L2 norm: $Ridge\ Method$</p><script type="math/tex; mode=display">\hat{\beta}^{Ridge} = argmin_{\beta}\sum_{i=1}^N (y_i - \beta_0 - \sum_{j=1}^{p}x_{ij}\beta_j)^2, \\subject \ to \ \sum_{j=1}^N \beta_j^2 \leqslant t,</script></li><li><p>L1 norm: $Lasso\ Method$</p><script type="math/tex; mode=display">\hat{\beta}^{Lasso} = argmin_{\beta}\sum_{i=1}^N (y_i - \beta_0 - \sum_{j=1}^{p}x_{ij}\beta_j)^2, \\subject \ to \ \sum_{j=1}^N \left \|{\beta_j}\right \| \leqslant t,</script></li></ul><p><img src="https://i.loli.net/2019/02/18/5c6a57661bb3c.png" width="600"></p><ul><li>$Lasso$ çš„ç»“æœå®¹æ˜“å°†ç³»æ•°å‡è‡³0</li></ul><p><img src="https://i.loli.net/2019/02/18/5c6a579858cea.png" width="500"></p><ul><li>$Ridge$ åˆ™æ˜¯å‡å°è‡³é0å€¼</li></ul><p><img src="https://i.loli.net/2019/02/18/5c6a57985ee73.png" width="500"></p><h2 id="3-pythonå®ç°"><a href="#3-pythonå®ç°" class="headerlink" title="3. pythonå®ç°"></a>3. pythonå®ç°</h2><ul><li>Cross Validation äº¤å‰æ£€éªŒ</li><li>L1, L2 æ­£åˆ™åŒ–</li></ul><p><code>In[1]</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> sklearn <span class="keyword">import</span> datasets</span><br><span class="line"><span class="keyword">from</span> sklearn.model_selection <span class="keyword">import</span> KFold</span><br></pre></td></tr></table></figure><p><code>In[2]</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">datasets.load_wine</span><br><span class="line">wine_data = datasets.load_wine()</span><br><span class="line">print((wine_data.feature_names))</span><br></pre></td></tr></table></figure><pre><code>[&#39;alcohol&#39;, &#39;malic_acid&#39;, &#39;ash&#39;, &#39;alcalinity_of_ash&#39;, &#39;magnesium&#39;, &#39;total_phenols&#39;, &#39;flavanoids&#39;, &#39;nonflavanoid_phenols&#39;, &#39;proanthocyanins&#39;, &#39;color_intensity&#39;, &#39;hue&#39;, &#39;od280/od315_of_diluted_wines&#39;, &#39;proline&#39;]</code></pre><p><code>In[3]</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">data_input = wine_data.data</span><br><span class="line">data_output = wine_data.target</span><br></pre></td></tr></table></figure><p><code>In[4]</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> sklearn.linear_model <span class="keyword">import</span> LogisticRegression</span><br><span class="line"><span class="keyword">from</span> sklearn.metrics <span class="keyword">import</span> f1_score, log_loss, classification_report</span><br><span class="line">kf = KFold(<span class="number">4</span>, shuffle=<span class="keyword">True</span>)</span><br><span class="line">kf.get_n_splits(data_input)</span><br><span class="line">lr = LogisticRegression()</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> train_index, test_index <span class="keyword">in</span> kf.split(data_input, data_output):</span><br><span class="line">    <span class="comment">#print(train_index, test_index)</span></span><br><span class="line">    lr.fit(data_input[train_index], data_output[train_index])</span><br><span class="line">    y_pre_lr = lr.predict(data_input[test_index])</span><br><span class="line">    y = data_output[test_index]</span><br><span class="line">    print((f1_score(y, y_pre_lr, average=<span class="keyword">None</span>)))</span><br></pre></td></tr></table></figure><pre><code>[0.97142857 0.96296296 1.        ][1.         0.95       0.92307692][0.96296296 0.93023256 0.88888889][0.96774194 0.96774194 1.        ]</code></pre><h3 id="3-1-å¯¹æ¯”ä¸åŒæ¨¡å‹çš„cross-validationç»“æœ"><a href="#3-1-å¯¹æ¯”ä¸åŒæ¨¡å‹çš„cross-validationç»“æœ" class="headerlink" title="3.1. å¯¹æ¯”ä¸åŒæ¨¡å‹çš„cross-validationç»“æœ"></a>3.1. å¯¹æ¯”ä¸åŒæ¨¡å‹çš„cross-validationç»“æœ</h3><p><code>In[5]</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> sklearn.ensemble <span class="keyword">import</span> RandomForestClassifier</span><br><span class="line"><span class="keyword">from</span> sklearn.linear_model <span class="keyword">import</span> LogisticRegression</span><br><span class="line"><span class="keyword">from</span> sklearn <span class="keyword">import</span> svm</span><br><span class="line"><span class="keyword">from</span> sklearn.model_selection <span class="keyword">import</span> cross_val_score</span><br><span class="line">rf_class = RandomForestClassifier(n_estimators=<span class="number">10</span>)</span><br><span class="line">log_class = LogisticRegression()</span><br><span class="line">svm_class = svm.LinearSVC()</span><br></pre></td></tr></table></figure><p><code>In[6]</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">print((cross_val_score(</span><br><span class="line">    rf_class, data_input, data_output, scoring=<span class="string">'accuracy'</span>, cv=<span class="number">4</span>)))</span><br></pre></td></tr></table></figure><pre><code>[0.8        0.95555556 1.         1.        ]</code></pre><p><code>In[7]</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">accuracy = cross_val_score(</span><br><span class="line">    rf_class, data_input, data_output, scoring=<span class="string">'accuracy'</span>, cv=<span class="number">4</span>).mean() * <span class="number">100</span></span><br><span class="line">print((<span class="string">"Accuracy of Random Forests is: "</span>, accuracy))</span><br></pre></td></tr></table></figure><pre><code>(&#39;Accuracy of Random Forests is: &#39;, 95.0)</code></pre><p><code>In[8]</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">accuracy = cross_val_score(</span><br><span class="line">    log_class, data_input, data_output, scoring=<span class="string">'accuracy'</span>, cv=<span class="number">4</span>).mean() * <span class="number">100</span></span><br><span class="line">print((<span class="string">"Accuracy of logistic is: "</span>, accuracy))</span><br></pre></td></tr></table></figure><pre><code>(&#39;Accuracy of logistic is: &#39;, 96.11111111111111)</code></pre><p><code>In[9]</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">accuracy = cross_val_score(</span><br><span class="line">    svm_class, data_input, data_output, scoring=<span class="string">'accuracy'</span>, cv=<span class="number">4</span>).mean() * <span class="number">100</span></span><br><span class="line">print((<span class="string">"Accuracy of SVM is: "</span>, accuracy))</span><br></pre></td></tr></table></figure><pre><code>(&#39;Accuracy of SVM is: &#39;, 89.44444444444444)</code></pre><h3 id="3-2-æ­£åˆ™åŒ–regularization"><a href="#3-2-æ­£åˆ™åŒ–regularization" class="headerlink" title="3.2. æ­£åˆ™åŒ–regularization"></a>3.2. æ­£åˆ™åŒ–regularization</h3><p><code>In[10]</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">import</span> random</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line">%matplotlib inline</span><br><span class="line">%config InlineBackend.figure_format = <span class="string">'retina'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> matplotlib.pylab <span class="keyword">import</span> rcParams</span><br><span class="line">rcParams[<span class="string">'figure.figsize'</span>] = <span class="number">10</span>, <span class="number">8</span></span><br><span class="line"></span><br><span class="line">x = np.array([<span class="number">1.4</span> * i * np.pi / <span class="number">180</span> <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">0</span>, <span class="number">300</span>, <span class="number">4</span>)])</span><br><span class="line">np.random.seed(<span class="number">20</span>)  <span class="comment">#éšæœºæ•°</span></span><br><span class="line">y = np.sin(x) + np.random.normal(<span class="number">0</span>, <span class="number">0.2</span>, len(x))</span><br><span class="line">data = pd.DataFrame(np.column_stack([x, y]), columns=[<span class="string">'x'</span>, <span class="string">'y'</span>])</span><br><span class="line">plt.plot(data[<span class="string">'x'</span>], data[<span class="string">'y'</span>], <span class="string">'.'</span>)</span><br></pre></td></tr></table></figure><p><code>Out[10]</code></p><p><img src="https://i.loli.net/2019/02/18/5c6a5765942b1.png" width="500"></p><p><code>In[11]</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">2</span>, <span class="number">16</span>):  <span class="comment">#power of 1 is already there</span></span><br><span class="line">    colname = <span class="string">'x_%d'</span> % i  <span class="comment">#new var will be x_power</span></span><br><span class="line">    data[colname] = data[<span class="string">'x'</span>]**i</span><br><span class="line">print((data.head()))</span><br></pre></td></tr></table></figure><pre><code>          x         y       x_2       x_3       x_4       x_5           x_6  \0  0.000000  0.176779  0.000000  0.000000  0.000000  0.000000  0.000000e+00   1  0.097738  0.136756  0.009553  0.000934  0.000091  0.000009  8.717508e-07   2  0.195477  0.265742  0.038211  0.007469  0.001460  0.000285  5.579205e-05   3  0.293215 -0.179621  0.085975  0.025209  0.007392  0.002167  6.355064e-04   4  0.390954  0.164104  0.152845  0.059755  0.023362  0.009133  3.570691e-03               x_7           x_8           x_9          x_10          x_11  \0  0.000000e+00  0.000000e+00  0.000000e+00  0.000000e+00  0.000000e+00   1  8.520356e-08  8.327663e-09  8.139328e-10  7.955252e-11  7.775339e-12   2  1.090606e-05  2.131882e-06  4.167336e-07  8.146178e-08  1.592389e-08   3  1.863402e-04  5.463780e-05  1.602064e-05  4.697497e-06  1.377378e-06   4  1.395975e-03  5.457617e-04  2.133676e-04  8.341686e-05  3.261214e-05              x_12          x_13          x_14          x_15  0  0.000000e+00  0.000000e+00  0.000000e+00  0.000000e+00  1  7.599495e-13  7.427628e-14  7.259647e-15  7.095466e-16  2  3.112753e-09  6.084713e-10  1.189421e-10  2.325042e-11  3  4.038683e-07  1.184204e-07  3.472267e-08  1.018122e-08  4  1.274984e-05  4.984597e-06  1.948747e-06  7.618699e-07  </code></pre><p><code>In[12]</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å¤æ‚åº¦å¯å˜</span></span><br><span class="line"><span class="keyword">from</span> sklearn.linear_model <span class="keyword">import</span> LinearRegression</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">linear_regression</span><span class="params">(data, power, models_to_plot)</span>:</span></span><br><span class="line">    <span class="comment">#initialize predictors:</span></span><br><span class="line">    predictors = [<span class="string">'x'</span>]</span><br><span class="line">    <span class="keyword">if</span> power &gt;= <span class="number">2</span>:</span><br><span class="line">        predictors.extend([<span class="string">'x_%d'</span> % i <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">2</span>, power + <span class="number">1</span>)])</span><br><span class="line"></span><br><span class="line">    <span class="comment">#Fit the model</span></span><br><span class="line">    linreg = LinearRegression(normalize=<span class="keyword">True</span>)</span><br><span class="line">    linreg.fit(data[predictors], data[<span class="string">'y'</span>])</span><br><span class="line">    y_pred = linreg.predict(data[predictors])</span><br><span class="line"></span><br><span class="line">    <span class="comment">#Check if a plot is to be made for the entered power</span></span><br><span class="line">    <span class="keyword">if</span> power <span class="keyword">in</span> models_to_plot:</span><br><span class="line">        plt.subplot(models_to_plot[power])</span><br><span class="line">        plt.tight_layout()</span><br><span class="line">        plt.plot(data[<span class="string">'x'</span>], y_pred)</span><br><span class="line">        plt.plot(data[<span class="string">'x'</span>], data[<span class="string">'y'</span>], <span class="string">'.'</span>)</span><br><span class="line">        plt.title(<span class="string">'Plot for power: %d'</span> % power)</span><br><span class="line"></span><br><span class="line">    <span class="comment">#Return the result in pre-defined format</span></span><br><span class="line">    rss = sum((y_pred - data[<span class="string">'y'</span>])**<span class="number">2</span>)</span><br><span class="line">    ret = [rss]</span><br><span class="line">    ret.extend([linreg.intercept_])</span><br><span class="line">    ret.extend(linreg.coef_)</span><br><span class="line">    <span class="keyword">return</span> ret</span><br></pre></td></tr></table></figure><p><code>In[13]</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">col = [<span class="string">'rss'</span>, <span class="string">'intercept'</span>] + [<span class="string">'coef_x_%d'</span> % i <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>, <span class="number">16</span>)]</span><br><span class="line">ind = [<span class="string">'model_pow_%d'</span> % i <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>, <span class="number">16</span>)]</span><br><span class="line">coef_matrix_simple = pd.DataFrame(index=ind, columns=col)</span><br><span class="line"></span><br><span class="line"><span class="comment">#å®šä¹‰ä½œå›¾çš„ä½ç½®ä¸æ¨¡å‹çš„å¤æ‚åº¦</span></span><br><span class="line">models_to_plot = &#123;<span class="number">1</span>: <span class="number">231</span>, <span class="number">3</span>: <span class="number">232</span>, <span class="number">6</span>: <span class="number">233</span>, <span class="number">8</span>: <span class="number">234</span>, <span class="number">11</span>: <span class="number">235</span>, <span class="number">14</span>: <span class="number">236</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">#ç”»å‡ºæ¥</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>, <span class="number">16</span>):</span><br><span class="line">    coef_matrix_simple.iloc[i - <span class="number">1</span>, <span class="number">0</span>:i + <span class="number">2</span>] = linear_regression(</span><br><span class="line">        data, power=i, models_to_plot=models_to_plot)</span><br></pre></td></tr></table></figure><p><img src="https://i.loli.net/2019/02/18/5c6a57980ef71.png" alt="png"></p><h3 id="3-3-Ridge"><a href="#3-3-Ridge" class="headerlink" title="3.3. Ridge"></a>3.3. Ridge</h3><p><code>In[14]</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> sklearn.linear_model <span class="keyword">import</span> Ridge</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">ridge_regression</span><span class="params">(data, predictors, alpha, models_to_plot=&#123;&#125;)</span>:</span></span><br><span class="line">    <span class="comment">#Fit the model</span></span><br><span class="line">    ridgereg = Ridge(alpha=alpha, normalize=<span class="keyword">True</span>)</span><br><span class="line">    ridgereg.fit(data[predictors], data[<span class="string">'y'</span>])</span><br><span class="line">    y_pred = ridgereg.predict(data[predictors])</span><br><span class="line"></span><br><span class="line">    <span class="comment">#Check if a plot is to be made for the entered alpha</span></span><br><span class="line">    <span class="keyword">if</span> alpha <span class="keyword">in</span> models_to_plot:</span><br><span class="line">        plt.subplot(models_to_plot[alpha])</span><br><span class="line">        plt.tight_layout()</span><br><span class="line">        plt.plot(data[<span class="string">'x'</span>], y_pred)</span><br><span class="line">        plt.plot(data[<span class="string">'x'</span>], data[<span class="string">'y'</span>], <span class="string">'.'</span>)</span><br><span class="line">        plt.title(<span class="string">r'Plot for $\alpha$: %.3g'</span> % alpha)</span><br><span class="line"></span><br><span class="line">    <span class="comment">#Return the result in pre-defined format</span></span><br><span class="line">    rss = sum((y_pred - data[<span class="string">'y'</span>])**<span class="number">2</span>)</span><br><span class="line">    ret = [rss]</span><br><span class="line">    ret.extend([ridgereg.intercept_])</span><br><span class="line">    ret.extend(ridgereg.coef_)</span><br><span class="line">    <span class="keyword">return</span> ret</span><br></pre></td></tr></table></figure><p><code>In[15]</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">predictors = [<span class="string">'x'</span>]</span><br><span class="line">predictors.extend([<span class="string">'x_%d'</span> % i <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">2</span>, <span class="number">16</span>)])</span><br><span class="line"></span><br><span class="line"><span class="comment">#Set the different values of alpha to be tested</span></span><br><span class="line">alpha_ridge = [<span class="number">1e-15</span>, <span class="number">1e-10</span>, <span class="number">1e-8</span>, <span class="number">1e-4</span>, <span class="number">1e-3</span>, <span class="number">1e-2</span>, <span class="number">1</span>, <span class="number">5</span>, <span class="number">10</span>, <span class="number">20</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment">#Initialize the dataframe for storing coefficients.</span></span><br><span class="line">col = [<span class="string">'rss'</span>, <span class="string">'intercept'</span>] + [<span class="string">'coef_x_%d'</span> % i <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>, <span class="number">16</span>)]</span><br><span class="line">ind = [<span class="string">'alpha_%.2g'</span> % alpha_ridge[i] <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">0</span>, <span class="number">10</span>)]</span><br><span class="line">coef_matrix_ridge = pd.DataFrame(index=ind, columns=col)</span><br><span class="line"></span><br><span class="line">models_to_plot = &#123;</span><br><span class="line">    <span class="number">1e-15</span>: <span class="number">231</span>,</span><br><span class="line">    <span class="number">1e-10</span>: <span class="number">232</span>,</span><br><span class="line">    <span class="number">1e-4</span>: <span class="number">233</span>,</span><br><span class="line">    <span class="number">1e-3</span>: <span class="number">234</span>,</span><br><span class="line">    <span class="number">1e-2</span>: <span class="number">235</span>,</span><br><span class="line">    <span class="number">5</span>: <span class="number">236</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">10</span>):</span><br><span class="line">    coef_matrix_ridge.iloc[i, ] = ridge_regression(</span><br><span class="line">        data, predictors, alpha_ridge[i], models_to_plot)</span><br></pre></td></tr></table></figure><p><img src="https://i.loli.net/2019/02/18/5c6a576623edc.png" alt="png"></p><h3 id="3-4-Lasso"><a href="#3-4-Lasso" class="headerlink" title="3.4. Lasso"></a>3.4. Lasso</h3><p><code>In[16]</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> sklearn.linear_model <span class="keyword">import</span> Lasso</span><br><span class="line">s = <span class="string">r'$\alpha$'</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">lasso_regression</span><span class="params">(data, predictors, alpha, models_to_plot=&#123;&#125;)</span>:</span></span><br><span class="line">    <span class="comment">#Fit the model</span></span><br><span class="line">    lassoreg = Lasso(alpha=alpha, normalize=<span class="keyword">True</span>, max_iter=<span class="number">1e5</span>)</span><br><span class="line">    lassoreg.fit(data[predictors], data[<span class="string">'y'</span>])</span><br><span class="line">    y_pred = lassoreg.predict(data[predictors])</span><br><span class="line"></span><br><span class="line">    <span class="comment">#Check if a plot is to be made for the entered alpha</span></span><br><span class="line">    <span class="keyword">if</span> alpha <span class="keyword">in</span> models_to_plot:</span><br><span class="line">        plt.subplot(models_to_plot[alpha])</span><br><span class="line">        plt.tight_layout()</span><br><span class="line">        plt.plot(data[<span class="string">'x'</span>], y_pred)</span><br><span class="line">        plt.plot(data[<span class="string">'x'</span>], data[<span class="string">'y'</span>], <span class="string">'.'</span>)</span><br><span class="line">        plt.title(<span class="string">r'Plot for $\alpha$: %.3g'</span> % alpha)</span><br><span class="line"></span><br><span class="line">    <span class="comment">#Return the result in pre-defined format</span></span><br><span class="line">    rss = sum((y_pred - data[<span class="string">'y'</span>])**<span class="number">2</span>)</span><br><span class="line">    ret = [rss]</span><br><span class="line">    ret.extend([lassoreg.intercept_])</span><br><span class="line">    ret.extend(lassoreg.coef_)</span><br><span class="line">    <span class="keyword">return</span> ret</span><br></pre></td></tr></table></figure><p><code>In[17]</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">predictors = [<span class="string">'x'</span>]</span><br><span class="line">predictors.extend([<span class="string">'x_%d'</span> % i <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">2</span>, <span class="number">16</span>)])</span><br><span class="line"></span><br><span class="line"><span class="comment">#Define the alpha values to test</span></span><br><span class="line">alpha_lasso = [<span class="number">1e-15</span>, <span class="number">1e-10</span>, <span class="number">1e-8</span>, <span class="number">1e-5</span>, <span class="number">1e-4</span>, <span class="number">1e-3</span>, <span class="number">1e-2</span>, <span class="number">1</span>, <span class="number">5</span>, <span class="number">10</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment">#Initialize the dataframe to store coefficients</span></span><br><span class="line">col = [<span class="string">'rss'</span>, <span class="string">'intercept'</span>] + [<span class="string">'coef_x_%d'</span> % i <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>, <span class="number">16</span>)]</span><br><span class="line">ind = [<span class="string">'alpha_%.2g'</span> % alpha_lasso[i] <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">0</span>, <span class="number">10</span>)]</span><br><span class="line">coef_matrix_lasso = pd.DataFrame(index=ind, columns=col)</span><br><span class="line"></span><br><span class="line"><span class="comment">#Define the models to plot</span></span><br><span class="line">models_to_plot = &#123;</span><br><span class="line">    <span class="number">1e-10</span>: <span class="number">231</span>,</span><br><span class="line">    <span class="number">1e-5</span>: <span class="number">232</span>,</span><br><span class="line">    <span class="number">1e-4</span>: <span class="number">233</span>,</span><br><span class="line">    <span class="number">1e-3</span>: <span class="number">234</span>,</span><br><span class="line">    <span class="number">1e-2</span>: <span class="number">235</span>,</span><br><span class="line">    <span class="number">1</span>: <span class="number">236</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">#Iterate over the 10 alpha values:</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">10</span>):</span><br><span class="line">    coef_matrix_lasso.iloc[i, ] = lasso_regression(</span><br><span class="line">        data, predictors, alpha_lasso[i], models_to_plot)</span><br></pre></td></tr></table></figure><p><img src="https://i.loli.net/2019/02/18/5c6a57661c04a.png" alt="png"></p><p><code>In[18]</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">svm.LinearSVC(penalty=<span class="string">'l1'</span>)</span><br></pre></td></tr></table></figure><p><code>Out[18]</code></p><pre><code>LinearSVC(C=1.0, class_weight=None, dual=True, fit_intercept=True,     intercept_scaling=1, loss=&#39;squared_hinge&#39;, max_iter=1000,     multi_class=&#39;ovr&#39;, penalty=&#39;l1&#39;, random_state=None, tol=0.0001,     verbose=0)</code></pre><h2 id="4-pipeline"><a href="#4-pipeline" class="headerlink" title="4. pipeline"></a>4. pipeline</h2><p><code>In[19]</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> sklearn.datasets <span class="keyword">import</span> load_iris</span><br><span class="line"><span class="keyword">from</span> sklearn.pipeline <span class="keyword">import</span> make_pipeline, Pipeline</span><br><span class="line"><span class="keyword">from</span> sklearn <span class="keyword">import</span> preprocessing</span><br><span class="line"><span class="keyword">from</span> sklearn <span class="keyword">import</span> model_selection</span><br><span class="line"><span class="keyword">from</span> sklearn <span class="keyword">import</span> svm</span><br><span class="line"><span class="keyword">from</span> sklearn.linear_model <span class="keyword">import</span> LogisticRegression</span><br></pre></td></tr></table></figure><p><code>In[20]</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">iris = load_iris()</span><br></pre></td></tr></table></figure><p><code>In[21]</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#classifier_pipeline = make_pipeline(preprocessing.StandardScaler(), svm.SVC(C=1))</span></span><br><span class="line">pipeline = Pipeline([(<span class="string">'scaler'</span>, preprocessing.StandardScaler()),</span><br><span class="line">                     (<span class="string">'clf'</span>, LogisticRegression())])</span><br><span class="line">scores = model_selection.cross_val_score(</span><br><span class="line">    pipeline, iris.data, iris.target, cv=<span class="number">3</span>)</span><br></pre></td></tr></table></figure><p><code>In[22]</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">scores</span><br></pre></td></tr></table></figure><p><code>Out[22]</code></p><pre><code>array([0.88235294, 0.92156863, 0.89583333])</code></pre><p><code>In[23]</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pipeline.fit(iris.data, iris.target)</span><br></pre></td></tr></table></figure><p><code>Out[23]</code></p><pre><code>Pipeline(memory=None,     steps=[(&#39;scaler&#39;, StandardScaler(copy=True, with_mean=True, with_std=True)), (&#39;clf&#39;, LogisticRegression(C=1.0, class_weight=None, dual=False, fit_intercept=True,          intercept_scaling=1, max_iter=100, multi_class=&#39;warn&#39;,          n_jobs=None, penalty=&#39;l2&#39;, random_state=None, solver=&#39;warn&#39;,          tol=0.0001, verbose=0, warm_start=False))])</code></pre><h2 id="5-æ–¹å·®çš„åˆ†è§£"><a href="#5-æ–¹å·®çš„åˆ†è§£" class="headerlink" title="5. æ–¹å·®çš„åˆ†è§£"></a>5. æ–¹å·®çš„åˆ†è§£</h2><p><img src="https://i.loli.net/2019/02/18/5c6a579830e08.png" width="700"></p><ul><li><p>$t_i(x)$ æˆ–è€… $t(x)$ æ˜¯åœ¨ $x=x$ æ—¶çš„è§‚æµ‹ç‚¹å€¼</p></li><li><p>$y(x)$ æ˜¯åœ¨ $x=x$ æ—¶çš„å›å½’å€¼</p></li></ul><script type="math/tex; mode=display">  \begin{align}  &\sum(t_i(x) - y(x))^2 = SSE \\  &\sum(y(x) - \bar{y})^2 = SSR \\  &\sum(t_i(x) - \bar{y})^2 = SST  \end{align}</script><p>  <img src="https://i.loli.net/2019/02/18/5c6a579831fdb.png" width="800"></p><h2 id="6-biasä¸varianceçš„åˆ†è§£"><a href="#6-biasä¸varianceçš„åˆ†è§£" class="headerlink" title="6. biasä¸varianceçš„åˆ†è§£"></a>6. biasä¸varianceçš„åˆ†è§£</h2><ul><li>ä¸“æ³¨äºæ®‹å·®å¹³æ–¹å’Œï¼Œæ²¿ç”¨ç»å…¸æ•™æçš„è®°æ³•ï¼ˆJordan, M., Kleinberg, J., &amp; Scho, B. (n.d.). Pattern Recognition and Machine Learning.ï¼‰</li><li>$t_i(x)â€‹$ æˆ–è€… $t(x)â€‹$ æ˜¯åœ¨ $x=xâ€‹$ æ—¶çš„è§‚æµ‹ç‚¹å€¼</li><li>$y(x)$ æ˜¯åœ¨ $x=x$ æ—¶çš„å›å½’å€¼</li></ul><script type="math/tex; mode=display">Loss = (y(x)-t_i(x))^2\\E[Loss]=\int\{y(x)-t(x)\}^2p(x,t)dtdx\\</script><ul><li>å¼•å…¥ $h(x) = \int t(x)p(t|x)dt$ ä»£è¡¨$t$åœ¨$x=x$çš„æ€»ä½“æœŸæœ›å€¼ï¼Œä¸€èˆ¬æ˜¯æœªçŸ¥çš„</li><li>ä»£å…¥åˆ†è§£<script type="math/tex; mode=display">\begin{align}E[Loss]&=\int \left[y(x)-h(x)+h(x)-t(x)\right]^2p(x,t(x))dtdx\\&=\int\left[y(x)-h(x)\right]^2p(x)dx+\int\left[h(x)-t(x)\right]^2p(x)dtdx + 2\int(y(x)-h(x))(h(x)-t(x))p(x,t(x))dtdx \\&=\int\left[y(x)-h(x)\right]^2p(x)dx+\int\left[h(x)-t(x)\right]^2p(x,t(x))dtdx \\\end{align}</script></li></ul><p><img src="https://i.loli.net/2019/02/18/5c6a5798366f1.png" width="700"></p><p><img src="https://i.loli.net/2019/02/18/5c6a579853df0.png" width="700"></p><ul><li><p>å¯¹äºä¸åŒçš„æ ·æœ¬é›†,æ±‚å¾—çš„ $y(x;D)$ ä¼šä¸åŒ</p><ul><li>$y(x;D_1)$ </li><li>$y(x;D_2)$</li><li>$y(x;D_3)$</li><li>$y(x;D_4)$</li></ul></li><li><p>$h(x)â€‹$ æ˜¯å…¨æ ·æœ¬åœ¨x=xçš„æœŸæœ›ï¼Œä¸ä¼šéšæŠ½æ ·ä¸åŒè€Œæ”¹å˜</p></li><li><p>å–æ ·æœ¬é›† $ \{D1,D2,D3,D4\}$ çš„ $y(x;D_i)$ çš„æœŸæœ›</p><script type="math/tex; mode=display">\mathbb{E}_D[y(x;D)] = expectation \ of \ y(x) \ over \ different \ sample \ sets \{D1,D2,D3,D4\}</script></li><li><p>å°† $E_D[y(x;D]â€‹$ å¼•å…¥ $\{y(x;D)-h(x)\}^2â€‹$</p></li></ul><p><img src="https://i.loli.net/2019/02/18/5c6a5765b61ea.png" width="500"></p><ul><li><p>å¯¹ä¸åŒçš„æ•°æ®é›† $ \{D1,D2,D3,D4 â€¦\}$ æ±‚æœŸæœ›<br><img src="https://i.loli.net/2019/02/18/5c6a5765b5c21.png" width="500"></p></li><li><p>ä»£å›$E[L]$<br><img src="https://i.loli.net/2019/02/18/5c6a576610347.png" width="500"></p></li><li><p>åå·®ï¼š</p><ul><li><strong>åå·®</strong>åº¦é‡äº†å­¦ä¹ ç®—æ³•çš„æœŸæœ›é¢„æµ‹ä¸çœŸå®ç»“æœçš„åç¦»ç¨‹åº¦, åˆ»ç”»äº†<span style="color:blue">å­¦ä¹ ç®—æ³•æœ¬èº«çš„æ‹Ÿåˆèƒ½åŠ›</span></li></ul></li><li>æ–¹å·®ï¼š<ul><li><strong>æ–¹å·®</strong>åº¦é‡äº†åŒæ ·å¤§å°çš„è®­ç»ƒé›†çš„å˜åŠ¨æ‰€å¯¼è‡´çš„å­¦ä¹ æ€§èƒ½çš„å˜åŒ–, åˆ»ç”»äº†<span style="color:blue">æ•°æ®æ‰°åŠ¨æ‰€é€ æˆçš„å½±å“</span></li></ul></li><li>å™ªéŸ³ï¼š<ul><li><strong>å™ªå£°</strong>è¡¨è¾¾äº†åœ¨å½“å‰ä»»åŠ¡ä¸Šä»»ä½•å­¦ä¹ ç®—æ³•æ‰€èƒ½è¾¾åˆ°çš„æœŸæœ›æ³›åŒ–è¯¯å·®çš„ä¸‹ç•Œ, åˆ»ç”»äº†<span style="color:blue">å­¦ä¹ é—®é¢˜æœ¬èº«çš„éš¾åº¦</span></li></ul></li></ul><p><img src="https://i.loli.net/2019/02/18/5c6a57981b8ea.png" width="700"></p><script type="math/tex; mode=display">E(loss) = \int \{E_D[y(x;D)]-h(x)\}^2p(x)dx + \int E_D[\{y(x;D)-E_D[y(x;D)\}^2]p(x)dx + \int \{h(x)-t\}^2p(x,t)dxdt</script><p>è¿™é‡Œçš„æ–¹å·®å’Œåå·®é‡ç‚¹åœ¨äº <span style="color:blue">åœ¨æœ‰è‹¥å¹²è®­ç»ƒæ•°æ®é›†çš„æƒ…å†µä¸‹</span> è®­ç»ƒå‡ºæ¨¡å‹çš„é¢„æµ‹ç»“æœçš„æœŸæœ›å€¼å’Œæ–¹å·®</p><h3 id="Biasä¸Varianceçš„ä¸¤éš¾ä¹‹é—´"><a href="#Biasä¸Varianceçš„ä¸¤éš¾ä¹‹é—´" class="headerlink" title="Biasä¸Varianceçš„ä¸¤éš¾ä¹‹é—´"></a>Biasä¸Varianceçš„ä¸¤éš¾ä¹‹é—´</h3><ul><li>ä½¿ç”¨ä¸åŒå¤æ‚åº¦çš„æ¨¡å‹ï¼Œä¼šå½±å“biasä¸varianceçš„åˆ†å¸ƒ</li></ul><p><img src="http://images2015.cnblogs.com/blog/743682/201607/743682-20160709113930389-368203993.png"></p>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;æ¨¡å‹çš„æ‹Ÿåˆ&quot;&gt;&lt;a href=&quot;#æ¨¡å‹çš„æ‹Ÿåˆ&quot; class=&quot;headerlink&quot; title=&quot;æ¨¡å‹çš„æ‹Ÿåˆ&quot;&gt;&lt;/a&gt;æ¨¡å‹çš„æ‹Ÿåˆ&lt;/h2&gt;&lt;ol&gt;
&lt;li&gt;æ‹Ÿåˆä¸è¿‡æ‹Ÿåˆ&lt;/li&gt;
&lt;li&gt;å¯¹æŠ—è¿‡æ‹Ÿåˆï¼š&lt;ul&gt;
&lt;li&gt;äº¤å‰æ£€éªŒ&lt;/li&gt;
&lt;li&gt;æ­£åˆ™åŒ–L1,L2&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;pythonå®ç°&lt;/li&gt;
&lt;li&gt;pipeline&lt;/li&gt;
&lt;li&gt;æ–¹å·®çš„åˆ†è§£ï¼š&lt;ul&gt;
&lt;li&gt;ç¦»å·®å¹³æ–¹æ€»å’Œ = å›å½’å¹³æ–¹å’Œ+æ®‹å·®å¹³æ–¹å’Œ ï¼ˆ SST = SSR + SSE ï¼‰&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;bias and varianceåˆ†è§£ï¼ˆè¿™é‡Œçš„biaså’Œvarianceè·Ÿè¿‡æ‹Ÿåˆçš„biaså’Œvarianceä¸ä¸€æ ·ï¼‰&lt;/li&gt;
&lt;/ol&gt;
    
    </summary>
    
      <category term="Note" scheme="https://marara.xin/categories/Note/"/>
    
    
      <category term="Statistics" scheme="https://marara.xin/tags/Statistics/"/>
    
      <category term="Machine Learning" scheme="https://marara.xin/tags/Machine-Learning/"/>
    
  </entry>
  
  <entry>
    <title>é€»è¾‘å›å½’ä¸ä»£ä»·å‡½æ•°</title>
    <link href="https://marara.xin/2019/02/13/Logistic_regression/"/>
    <id>https://marara.xin/2019/02/13/Logistic_regression/</id>
    <published>2019-02-13T03:39:26.176Z</published>
    <updated>2019-02-17T07:51:12.344Z</updated>
    
    <content type="html"><![CDATA[<h2 id="é€»è¾‘å›å½’ä¸çº¿æ€§å›å½’"><a href="#é€»è¾‘å›å½’ä¸çº¿æ€§å›å½’" class="headerlink" title="é€»è¾‘å›å½’ä¸çº¿æ€§å›å½’"></a><em>é€»è¾‘å›å½’ä¸çº¿æ€§å›å½’</em></h2><ul><li>çº¿æ€§å›å½’ï¼šé¢„æµ‹è¿ç»­æ•°å€¼å˜é‡ï¼ˆæ˜å¤©ä¸Šæµ·çš„åœ°é¢æ¸©åº¦ï¼Ÿï¼‰</li><li>é€»è¾‘å›å½’ï¼šé¢„æµ‹åˆ†ç±» (classification)ï¼ˆä»Šå¤©ä¼šä¸ä¼šè€ƒè¯•ï¼Ÿï¼‰</li><li>é€»è¾‘å›å½’ä¸çº¿æ€§å›å½’æœ‰ä»€ä¹ˆè”ç³»ï¼Ÿ</li><li>ä»ä¸€ä¸ªä¾‹å­è¯´èµ·ï¼šè·å–æ•°æ®ï¼Œåˆ¤æ–­æ¶æ„è®¢æˆ¿</li></ul><a id="more"></a><h2 id="1-ä»é…’åº—è®¢æˆ¿è¯´èµ·"><a href="#1-ä»é…’åº—è®¢æˆ¿è¯´èµ·" class="headerlink" title="1. ä»é…’åº—è®¢æˆ¿è¯´èµ·"></a>1. ä»é…’åº—è®¢æˆ¿è¯´èµ·</h2><ol><li><p>å•†å®¶éœ€è¦åˆ¤æ–­é¡¾å®¢æ˜¯å¦ä¼šæ¶æ„è®¢æˆ¿</p></li><li><p>æ ¹æ®ä»€ä¹ˆæ¥åˆ¤æ–­ï¼Ÿ</p></li><li><p>åˆ©ç”¨ä¿¡ç”¨å€¼æ¥åˆ¤æ–­æ˜¯å¦ä¼šæ¶æ„è®¢æˆ¿</p></li></ol><p><img src="https://i.loli.net/2019/02/13/5c63afbb969c5.jpg" alt=""></p><h2 id="2-å¦‚ä½•é€šè¿‡ä¿¡ç”¨å€¼ç­‰æ•°æ®æ¥é¢„æµ‹æ¶æ„è®¢æˆ¿"><a href="#2-å¦‚ä½•é€šè¿‡ä¿¡ç”¨å€¼ç­‰æ•°æ®æ¥é¢„æµ‹æ¶æ„è®¢æˆ¿" class="headerlink" title="2. å¦‚ä½•é€šè¿‡ä¿¡ç”¨å€¼ç­‰æ•°æ®æ¥é¢„æµ‹æ¶æ„è®¢æˆ¿"></a>2. å¦‚ä½•é€šè¿‡ä¿¡ç”¨å€¼ç­‰æ•°æ®æ¥é¢„æµ‹æ¶æ„è®¢æˆ¿</h2><ul><li>è¾“å…¥å€¼ï¼šä¿¡ç”¨å€¼ç­‰è¿ç»­å‹æ•°å­—ï¼Œå–å€¼èŒƒå›´ä¸º $\left ( -\infty , +\infty \right )$ </li><li>è¾“å‡ºå€¼ï¼šæ­£å¸¸è®¢æˆ¿çš„æ¦‚ç‡ $p$ï¼Œå–å€¼èŒƒå›´ä¸º $\left [ 0 , 1 \right ]$</li><li><span style="color:blue">å½“ $p&gt;é˜ˆå€¼(0.5)$ï¼Œåˆ¤æ–­é¡¾å®¢æ­£å¸¸è®¢æˆ¿</span></li><li><span style="color:blue">å½“ $p \leqslant é˜ˆå€¼(0.5)$ï¼Œåˆ¤æ–­é¡¾å®¢æ­£å¸¸è®¢æˆ¿</span></li></ul><p>å¦‚æœç›´æ¥é€šè¿‡çº¿æ€§å›å½’ï¼Œå‘ç°ç”±äºè¾“å…¥è¾“å‡ºå€¼å¾—èŒƒå›´ä¸åŒï¼Œå¯¼è‡´æ— æ³•å¾ˆå¥½çš„è¿›è¡Œæ˜ å°„ã€‚äºæ˜¯é€šè¿‡å¯¹è¾“å‡ºå€¼è¿›è¡Œå˜æ¢</p><ul><li>è¾“å…¥å€¼ï¼šä¿¡ç”¨å€¼ç­‰è¿ç»­å‹æ•°å­—ï¼Œå–å€¼èŒƒå›´ä¸º $\left ( -\infty , +\infty \right )$ </li><li>è¾“å‡ºå€¼ï¼šæ­£å¸¸è®¢æˆ¿çš„æ¦‚ç‡ $p$ï¼Œå–å€¼èŒƒå›´ä¸º $\left [ 0 , 1 \right ]$<ul><li>é€šè¿‡ $\frac{p}{1-p}$ ï¼Œå–å€¼èŒƒå›´ä¸º $\left [ 0 , +\infty \right )$ </li><li>è¿›ä¸€æ­¥å–å¯¹æ•° $ln\left (\frac{p}{1-p}  \right )$ ï¼Œå–å€¼èŒƒå›´ä¸º $\left ( -\infty , +\infty \right )$ </li></ul></li></ul><script type="math/tex; mode=display">\begin{align}&ln\left (\frac{p}{1-p}  \right ) = wx+a\\&\Rightarrow  \frac{p}{1-p}=e^{wx+a}\\&\Rightarrow p=e^{wx+a}(1-p)=\frac{e^{wx+a}}{1+e^{wx+a}}\\\end{align}</script><script type="math/tex; mode=display">p=\frac{1}{1+e^{-wx-a}} \qquad \qquad x\in\left ( -\infty , +\infty \right )</script><p>é€šè¿‡å›å½’ï¼Œæˆ‘ä»¬å¾—åˆ°äº†å¦‚ä¸‹çš„æ•°æ®ï¼š</p><p><img src="https://i.loli.net/2019/02/13/5c63ad7090a8d.png" width="700"></p><p>è¿›è¡Œæ‹Ÿåˆï¼Œå¯¹äºè¿™ä¸€ç§ï¼š<br><img src="https://i.loli.net/2019/02/13/5c63adc6820ec.png" width="700"><br>åœ¨æ‹ç‚¹å¤„æ— æ³•æ±‚å¯¼ï¼Œç»§è€Œæ— æ³•å¾—åˆ°æœ€å€¼ï¼Œäºæ˜¯æˆ‘ä»¬é€‰ç”¨å¹³æ»‘æ›²çº¿ä»£æ›¿<br><img src="https://i.loli.net/2019/02/13/5c63adc67f71c.png" width="700"></p><p>å¯é—®é¢˜åˆæ¥äº†<br><img src="https://i.loli.net/2019/02/13/5c63ae7f9cb53.png" width="700"><br>ä¸åŒçš„å‚æ•°ï¼Œå¾—åˆ°çš„ä¸åŒçš„æ‹Ÿåˆç»“æœï¼Œæˆ‘ä»¬åº”è¯¥é€‰ç”¨å“ªä¸€ä¸ªæ¥åšæœ€ä¼˜è§£å‘¢ï¼Ÿ</p><h2 id="3-å¯»æ‰¾æœ€åˆç†çš„å‚æ•°-â€”â€”-Cost-Function"><a href="#3-å¯»æ‰¾æœ€åˆç†çš„å‚æ•°-â€”â€”-Cost-Function" class="headerlink" title="3. å¯»æ‰¾æœ€åˆç†çš„å‚æ•° â€”â€” Cost Function"></a>3. å¯»æ‰¾æœ€åˆç†çš„å‚æ•° â€”â€” Cost Function</h2><p>æˆ‘ä»¬çš„ç›®çš„ï¼Œæ˜¯æ‰¾åˆ°ä¸€ä¸ªèƒ½è®©æ¨¡å‹æ‹Ÿåˆç»“æœæ›´å¥½çš„å‚æ•°ã€‚æ–¹æ³•å°±æ˜¯è®¾è®¡ä¸€ä¸ª<strong><em>Cost Function</em></strong>ï¼Œè®©å®ƒæ¥å†³å®šä»€ä¹ˆæ˜¯å¥½çš„æ¨¡å‹ã€‚</p><blockquote><p>ä»¥ä¸‹ç”¨ $h_\theta (x)$ æ¥æŒ‡ä»£<code>sigmoid function:</code>  $\frac{1}{1+e^{-\theta _1x^{i}-\theta _2}}$</p></blockquote><p>ä¸€ä¸ªå¥½çš„æ¨¡å‹ï¼Œ<strong><em>Cost Function</em></strong>è¦å°½é‡å°</p><ul><li>çœŸå€¼ $y=1$ ï¼Œ$h_\theta (x)$ ä¼šå°½é‡å¤§</li><li>çœŸå€¼ $y=0$ ï¼Œ$h_\theta (x)$ ä¼šå°½é‡å°</li></ul><p>å¦‚æ­¤å¾—åˆ°ä¸€ä¸ª<strong><em>Cost Function</em></strong>ï¼š</p><script type="math/tex; mode=display">Cost(h_\theta (x), y)=\begin{cases}-ln(h_\theta (x)) &  & y=1\\ -ln(1-h_\theta (x)) &  & y=0\\ \end{cases}</script><p>å³ï¼š</p><script type="math/tex; mode=display">Cost(\theta) = -(1-y)ln(1-h_\theta (x))-yln(h_\theta (x))</script><p>å¯¹äº $n$ ä¸ªæ•°æ®ï¼Œè¿›è¡Œæ±‚å’Œï¼š</p><script type="math/tex; mode=display">J(\theta) = \sum_{i=1}^{n}\left[-(1-y^{i})ln(1-h_\theta(x^{i}))-y^{i}ln(h_\theta (x^{i}))\right]</script><ul><li>$x^i$ æ˜¯ç¬¬ $i$ ä¸ªäººçš„ä¿¡ç”¨å€¼ï¼Œ$y^i$ æ˜¯æœ€åè®¢æˆ¿ä¸å¦çš„æŒ‡ç¤ºæ•°</li><li>$i=1$ è¡¨ç¤ºé¢„å®šï¼Œ$i=0$ è¡¨ç¤ºæœªé¢„å®š</li><li>$\theta$ æ˜¯å‚æ•°ï¼Œä½œä¸ºå‘é‡çš„è¡¨ç¤ºæ–¹æ³•ï¼Œå› ä¸ºå‚æ•°å¾ˆå¯èƒ½ä¸æ­¢ä¸€ä¸ª</li></ul><p>æ ¹æ®è¿™ä¸ª <strong><em>Cost Function</em></strong>ï¼Œå¯»æ‰¾èƒ½è®©å…¶æœ€å°çš„ $\theta \in \left \{ \theta_1 , \theta_2  \right \}$ï¼Œé€šè¿‡ä½¿å…¶ä¸€é˜¶å¯¼æ•°ä¸º0ï¼ŒäºŒé˜¶å¯¼æ•°ä¸ºæ­£ï¼Œä»è€Œè·å– $min \theta$ï¼š</p><script type="math/tex; mode=display">\begin{align}\frac{\partial J(\theta)}{\partial \theta_j} &= \frac{\partial }{\partial \theta_j }\sum_{i=1}^{n}\left [-(1-y^{i})ln(1-h_\theta(x^{i}))-y^{i}ln(h_\theta (x^{i}))\right ]\\&=-\sum_{i=1}^{n}\left [(1-y^{i})\frac{\partial ln(1-h_\theta (x^{i}))}{\partial \theta _j}+y^{i}\frac{\partial ln(h_\theta (x^{i}))}{\partial \theta _j}\right ]\\&=-\sum_{i=1}^{n}\left [(1-y^{i})\frac{1}{ln(1-h_\theta (x^{i}))} \frac{\partial (1-h_\theta (x^{i}))}{\partial \theta _j}+y^{i}\frac{1}{h_\theta (x^{i})}\frac{\partial (h_\theta (x^{i}))}{\partial \theta _j}\right]\\&=-\sum_{i=1}^{n}\left [-(1-y^{i})\frac{h_\theta (x^{i})[1-h_\theta (x^{i})]}{1-h_\theta (x^{i})}\frac{\partial (\theta x^{i})}{\partial \theta_j}+y^{i}\frac{h_\theta (x^{i})[1-h_\theta (x^{i})]}{h_\theta (x^{i})}\frac{\partial (\theta x^{i})}{\partial \theta_j}\right]\\&=-\sum_{i=1}^{n}\left [-(1-y^{i})h_\theta (x^{i})+y^{i}(1-h_\theta (x^{i}))\right]\frac{\partial (\theta x^{i})}{\partial \theta_j}\\&=-\sum_{i=1}^{n}\left [-h_\theta (x^{i})+y^{i}\right]x_{j}^{i}\end{align}</script><blockquote><p>å…¶ä¸­</p></blockquote><script type="math/tex; mode=display">\begin{align}\frac{\partial \left(h_\theta \left (x^{i}\right)\right)}{\partial \theta _1} &=\frac{\partial }{\partial \theta _1}\frac{1}{1+e^{-\theta _1x^{i}-\theta _2}} \\&=-\frac{1}{(1+e^{-\theta _1x^{i}-\theta _2})^{2}}\frac{\partial \left(1+e^{-\theta _1x^{i}-\theta _2}\right)}{\partial \theta _1}\\&=\frac{x^{i}e^{-\theta _1x^{i}-\theta _2}}{\left(1+e^{-\theta _1x^{i}-\theta _2}\right)^{2}}\\&=x^{i}\frac{1}{1+e^{-\theta _1x^{i}-\theta _2}}\left(1-\frac{1}{1+e^{-\theta _1x^{i}-\theta _2}}\right) \\&=x^{i}h_\theta \left (x^{i}\right)\left[1-h_\theta \left(x^{i}\right)\right]\end{align}</script><script type="math/tex; mode=display">\begin{align}\frac{\partial \left(h_\theta \left(x^{i}\right)\right)}{\partial \theta _2} &=\frac{\partial }{\partial \theta _2}\frac{1}{1+e^{-\theta _1x^{i}-\theta _2}} \\&=-\frac{1}{\left(1+e^{-\theta _1x^{i}-\theta _2}\right)^{2}}\frac{\partial \left(1+e^{-\theta _1x^{i}-\theta _2}\right)}{\partial \theta _2}\\&=\frac{e^{-\theta _1x^{i}-\theta _2}}{\left(1+e^{-\theta _1x^{i}-\theta _2}\right)^{2}}\\&=\frac{1}{1+e^{-\theta _1x^{i}-\theta _2}}\left(1-\frac{1}{1+e^{-\theta _1x^{i}-\theta _2}}\right) \\&=h_\theta (x^{i})\left[1-h_\theta \left(x^{i}\right)\right]\end{align}</script><p>å¯¹äºæ‰€æœ‰çš„ $\theta_j$ï¼Œéƒ½éœ€è¦æœ‰ï¼š</p><script type="math/tex; mode=display">\frac{\partial J(\theta)}{\partial \theta_j}=-\sum_{i=1}^{n}\left[-h_\theta \left(x^{i}\right)+y^{i}\right]x_{j}^{i}\qquad \qquad j=1,2,...</script><p>ç†è®ºä¸Šï¼Œå¯ä»¥é€šè¿‡è¯¥æ–¹ç¨‹æ±‚è§£å„ä¸ª $\theta_j$ï¼Œä½†ç”±äº $h_\theta (x^i)$ çš„å­˜åœ¨ï¼Œä¸æ˜“æ±‚å‡ºè§£æè§£ï¼Œéœ€è¦é€šè¿‡å…¶ä»–æ–¹æ³•ï¼Œè®¡ç®—å‡º $\theta_j$ çš„è¿‘ä¼¼è§£ã€‚</p><h3 id="3-1-ä½¿ç”¨sklearnè‡ªå¸¦å‡½æ•°æ±‚è§£é€»è¾‘å›å½’å‚æ•°"><a href="#3-1-ä½¿ç”¨sklearnè‡ªå¸¦å‡½æ•°æ±‚è§£é€»è¾‘å›å½’å‚æ•°" class="headerlink" title="3.1. ä½¿ç”¨sklearnè‡ªå¸¦å‡½æ•°æ±‚è§£é€»è¾‘å›å½’å‚æ•°"></a>3.1. ä½¿ç”¨<code>sklearn</code>è‡ªå¸¦å‡½æ•°æ±‚è§£é€»è¾‘å›å½’å‚æ•°</h3><p><code>In[1]</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">from</span> sklearn.linear_model <span class="keyword">import</span> LogisticRegression</span><br><span class="line"></span><br><span class="line">%matplotlib inline</span><br><span class="line">data = pd.read_csv(<span class="string">'Score_Pass.csv'</span>)</span><br><span class="line">X, y = np.array(data[<span class="string">'Score'</span>]), np.array(data[<span class="string">'Pass/N'</span>])</span><br><span class="line">x = X / np.max(X)</span><br><span class="line">lr = LogisticRegression(solver=<span class="string">'lbfgs'</span>)  <span class="comment">#solver å¯é€‰é»˜è®¤ï¼Œå¯é€‰'newton-cg'ï¼Œæœ‰åŒºåˆ«</span></span><br><span class="line">lr.fit(x.reshape(<span class="number">-1</span>, <span class="number">1</span>), y)</span><br><span class="line">print(<span class="string">'slope = %f, interception= %f '</span> % (lr.coef_, lr.intercept_))</span><br><span class="line">pre_y = lr.predict_proba(x.reshape(<span class="number">-1</span>, <span class="number">1</span>))</span><br><span class="line">pre_y_1 = [i[<span class="number">1</span>] <span class="keyword">for</span> i <span class="keyword">in</span> pre_y]</span><br><span class="line">plt.scatter(x, y)</span><br><span class="line">plt.scatter(x, pre_y_1)</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">slope = 11.702751, interception= -8.900218</span><br></pre></td></tr></table></figure><p><code>Out[1]</code></p><p><img src="https://i.loli.net/2019/02/14/5c64f7d9dff97.png" alt="output_2_2"></p><p><code>In[2]</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line">%matplotlib inline</span><br><span class="line">%config InlineBackend.figure_format = <span class="string">'retina'</span></span><br><span class="line"></span><br><span class="line">np.random.seed(<span class="number">12</span>)</span><br><span class="line">num_observations = <span class="number">5000</span></span><br><span class="line"></span><br><span class="line">x1 = np.random.multivariate_normal([<span class="number">0</span>, <span class="number">0</span>], [[<span class="number">1</span>, <span class="number">.75</span>], [<span class="number">.75</span>, <span class="number">1</span>]],</span><br><span class="line">                                   num_observations)</span><br><span class="line">x2 = np.random.multivariate_normal([<span class="number">1</span>, <span class="number">4</span>], [[<span class="number">1</span>, <span class="number">.75</span>], [<span class="number">.75</span>, <span class="number">1</span>]],</span><br><span class="line">                                   num_observations)</span><br><span class="line"></span><br><span class="line">simulated_separableish_features = np.vstack((x1, x2)).astype(np.float32)</span><br><span class="line">simulated_labels = np.hstack((np.zeros(num_observations),</span><br><span class="line">                              np.ones(num_observations)))</span><br><span class="line">plt.figure(figsize=(<span class="number">12</span>, <span class="number">8</span>))</span><br><span class="line">plt.scatter(</span><br><span class="line">    simulated_separableish_features[:, <span class="number">0</span>],</span><br><span class="line">    simulated_separableish_features[:, <span class="number">1</span>],</span><br><span class="line">    c=simulated_labels,</span><br><span class="line">    alpha=<span class="number">.4</span>)</span><br></pre></td></tr></table></figure><p><code>Out[2]</code></p><p><img src="https://i.loli.net/2019/02/14/5c64f7b27dd6e.png" alt="output_3_1"></p><p><code>In[3]</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> sklearn.linear_model <span class="keyword">import</span> LogisticRegression</span><br><span class="line"></span><br><span class="line">clf = LogisticRegression(fit_intercept=<span class="keyword">True</span>, C=<span class="number">1e15</span>)</span><br><span class="line">clf.fit(simulated_separableish_features, simulated_labels)</span><br><span class="line"></span><br><span class="line">print(</span><br><span class="line">    clf.coef_,</span><br><span class="line">    clf.intercept_,</span><br><span class="line">)</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[[-5.02712572  8.23286799]] [-13.99400797]</span><br></pre></td></tr></table></figure><h3 id="3-2-ä½¿ç”¨æ¢¯åº¦ä¸‹é™æ³•æ±‚è§£é€»è¾‘å›å½’å‚æ•°"><a href="#3-2-ä½¿ç”¨æ¢¯åº¦ä¸‹é™æ³•æ±‚è§£é€»è¾‘å›å½’å‚æ•°" class="headerlink" title="3.2. ä½¿ç”¨æ¢¯åº¦ä¸‹é™æ³•æ±‚è§£é€»è¾‘å›å½’å‚æ•°"></a>3.2. ä½¿ç”¨æ¢¯åº¦ä¸‹é™æ³•æ±‚è§£é€»è¾‘å›å½’å‚æ•°</h3><blockquote><p>æ²¿ç€J(x)çš„ä¸‹é™æ–¹å‘å¯¹ $\theta$ è¿›è¡Œæ›´æ–°</p></blockquote><script type="math/tex; mode=display">\begin{align}  \theta_j &=\theta_j - \frac{\partial J(\theta)}{\partial \theta_j}\\  &=\theta_j + \alpha\frac{1}{m}\sum_{i=1}^m\left[ y^{(i)}-h_\theta\left(x^{(i)}\right)\right]\,x_j^{(i)}\\  h_\theta\left(x^{(i)}\right) &= \frac{1}{1+e^{\sum_{j=1}^{n}-\theta_j x_j^{(i)}}}  \end{align}</script><p>$i$ æ˜¯æ ·æœ¬ç‚¹çš„æ ‡å·ï¼Œ$j$ æ˜¯è‡ªå˜é‡ä¸ªæ•°çš„æ ‡å·ï¼Œåœ¨æˆ‘ä»¬çš„æ¡ˆä¾‹ä¸­ï¼Œ$i$ å–1è‡³10000ï¼Œ$j$ åªå– $1,2,3$ï¼ˆæœ‰å¸¸é‡å‚æ•°ï¼‰</p><p><code>In[4]</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">sigmoid_eg</span><span class="params">(x1, x2, theta_1, theta_2, theta_3)</span>:</span></span><br><span class="line">    z = (theta_1 * x1 + theta_2 * x2 + theta_3).astype(<span class="string">"float_"</span>)</span><br><span class="line">    <span class="keyword">return</span> <span class="number">1.0</span> / (<span class="number">1.0</span> + np.exp(-z))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># def Cost(x, y, theta_1, theta_2):</span></span><br><span class="line"><span class="comment">#     sigmoid_probs = sigmoid(x, theta_1, theta_2)</span></span><br><span class="line"><span class="comment">#     return -np.mean(y * np.log(sigmoid_probs)</span></span><br><span class="line"><span class="comment">#                   + (1 - y) * np.log(1 - sigmoid_probs))</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">gradient_eg</span><span class="params">(x1, x2, y, theta_1, theta_2, theta_3)</span>:</span></span><br><span class="line">    sigmoid_probs = sigmoid_eg(x1, x2, theta_1, theta_2, theta_3)</span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span>/len(y)*np.sum((y - sigmoid_probs)*x1),\</span><br><span class="line"><span class="number">1</span>/len(y)*np.sum((y - sigmoid_probs)*x2),\</span><br><span class="line"><span class="number">1</span>/len(y)*np.sum((y - sigmoid_probs))</span><br></pre></td></tr></table></figure><p><code>In[5]</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">GradDe_eg</span><span class="params">(x1, x2, y, Max_Loop=<span class="number">20</span>, alpha=<span class="number">0.1</span>)</span>:</span></span><br><span class="line">    <span class="comment">#alpha = 0.00000001</span></span><br><span class="line">    <span class="comment">#Max_Loop = 200</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># Initialize Cost &amp; parameters</span></span><br><span class="line">    theta_1 = <span class="number">0.1</span></span><br><span class="line">    theta_2 = <span class="number">-0.4</span></span><br><span class="line">    theta_3 = <span class="number">0.56</span></span><br><span class="line">    <span class="keyword">for</span> l <span class="keyword">in</span> range(Max_Loop):</span><br><span class="line">        delta1, delta2, delta3 = gradient_eg(x1, x2, y, theta_1, theta_2,</span><br><span class="line">                                             theta_3)</span><br><span class="line">        <span class="comment">#delta1 = alpha * np.sum((y-sigmoid(X, theta_1, theta_2)) * X)</span></span><br><span class="line">        <span class="comment">#delta2 = alpha * np.sum(y-sigmoid(X, theta_1, theta_2))</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment"># alpha is the step size used for each gradient descent.</span></span><br><span class="line">        theta_1 = theta_1 + alpha * delta1</span><br><span class="line">        theta_2 = theta_2 + alpha * delta2</span><br><span class="line">        theta_3 = theta_3 + alpha * delta3</span><br><span class="line">        <span class="keyword">if</span> l % <span class="number">1000</span> == <span class="number">0</span>:</span><br><span class="line">            <span class="comment">#print('cost = %f'%Cost(x, y, theta_1, theta_2))</span></span><br><span class="line">            print(<span class="string">'delta%d ='</span> % (l), [delta1, delta2, delta3])</span><br><span class="line">            print(<span class="string">'theta%d ='</span> % (l), [theta_1, theta_2, theta_3], <span class="string">'\n'</span>)</span><br><span class="line"></span><br><span class="line">        <span class="comment">#if l % 1000 == 0:</span></span><br><span class="line">        <span class="comment">#    print(Cost(X, y, theta_1, theta_2), gradient(X,y,theta_1, theta_2),delta1,delta2)</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> [theta_1, theta_2, theta_3]</span><br></pre></td></tr></table></figure><p><code>In[6]</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">weights_GD = GradDe_eg(simulated_separableish_features[:,<span class="number">0</span>],\</span><br><span class="line">                    simulated_separableish_features[:,<span class="number">1</span>],\</span><br><span class="line">                    simulated_labels,<span class="number">200000</span>,<span class="number">0.9</span>)</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">delta0 = [0.3961871800720364, 1.5009373411273292, 0.041322520564441766]</span><br><span class="line">theta0 = [0.4565684620648328, 0.9508436070145964, 0.5971902685079976] </span><br><span class="line"></span><br><span class="line">delta1000 = [-0.0007704583774520729, 0.001169577110841499, -0.00204740502940396]</span><br><span class="line">theta1000 = [-2.6636329924890543, 4.471657694939081, -7.450004128248804] </span><br><span class="line"></span><br><span class="line">delta2000 = [-0.00040699408309612366, 0.0006346501021336131, -0.0011069894635109044]</span><br><span class="line">theta2000 = [-3.1583938131200133, 5.233346806623855, -8.780787027655295]  </span><br><span class="line"></span><br><span class="line">... ...</span><br><span class="line">... ...</span><br><span class="line"></span><br><span class="line">delta198000 = [-3.64302204385325e-09, -9.997352543678063e-09, -5.087131606984486e-09]</span><br><span class="line">theta198000 = [-5.059009978575051, 8.289579861025118, -14.09229413937621] </span><br><span class="line"></span><br><span class="line">delta199000 = [-1.8617213591198835e-09, -2.5363573357140016e-09, -1.3400418549025517e-09]</span><br><span class="line">theta199000 = [-5.059010268875257, 8.289579870388907, -14.09229451979946]</span><br></pre></td></tr></table></figure><p><code>In[7]</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">weights_GD</span><br></pre></td></tr></table></figure><p><code>Out[7]</code></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[-5.059010268463914, 8.289579874245822, -14.092294984033252]</span><br></pre></td></tr></table></figure><h3 id="3-3-ä½¿ç”¨ç‰›é¡¿æ³•æ±‚è§£é€»è¾‘å›å½’å‚æ•°"><a href="#3-3-ä½¿ç”¨ç‰›é¡¿æ³•æ±‚è§£é€»è¾‘å›å½’å‚æ•°" class="headerlink" title="3.3. ä½¿ç”¨ç‰›é¡¿æ³•æ±‚è§£é€»è¾‘å›å½’å‚æ•°"></a>3.3. ä½¿ç”¨ç‰›é¡¿æ³•æ±‚è§£é€»è¾‘å›å½’å‚æ•°</h3><script type="math/tex; mode=display">\begin{align}x_{n+1} &= x_{n} - \frac{f(x_{n})}{fâ€™(x_{n})} \\x_{n+2} &= x_{n+1} - \frac{f(x_{n+1})}{fâ€™(x_{n+1})} \\\end{align}</script><p><img src="https://i.loli.net/2019/02/14/5c64f8064bb8a.gif" width="600"></p><p>æˆ‘ä»¬è¦æ‰¾çš„æ˜¯ä¸€é˜¶å¯¼æ•°ä¸º $0$ çš„ç‚¹ï¼Œæ‰€ä»¥ æˆ‘ä»¬çš„ $f(x)=Jâ€™(x)$ï¼Œæˆ‘ä»¬çš„ç‰›é¡¿è¿­ä»£å…¬å¼ä¸ºï¼š</p><script type="math/tex; mode=display">\begin{align}x_{n+1} &= x_{n} - \frac{J'(x_{n})}{J''(x_{n})} \\x_{n+2} &= x_{n+1} - \frac{J'(x_{n+1})}{J''(x_{n+1})}\end{align}</script><p>åœ¨å¤šå…ƒçš„æƒ…å†µä¸‹ï¼Œ$Jâ€™â€™(x_{n})=H_{\ell(\hat{\theta})}$ æµ·å¡çŸ©é˜µï¼š</p><script type="math/tex; mode=display">H_{\ell(\hat{\theta})} = \begin{bmatrix}\begin{split}\frac{\partial^{2}{J}}{\partial{\theta_{1}}\partial{\theta_{1}}}   & \frac{\partial^{2}{J}}{\partial{\theta_{1}}\partial{\theta_{2}}} \\\frac{\partial^{2}{J}}{\partial{\theta_{2}}\partial{\theta_{1}}}   &\frac{\partial^{2}{J}}{\partial{\theta_{2}}\partial{\theta_{2}}} \\\end{split}\end{bmatrix}</script><p>ä¸‰é˜¶æµ·å¡çŸ©é˜µå½¢å¼ä¸ºï¼š</p><script type="math/tex; mode=display">H_{\ell(\hat{\theta})} = \begin{bmatrix}\begin{split}\frac{\partial^{2}{J}}{\partial{\theta_{1}}\partial{\theta_{1}}}   & \frac{\partial^{2}{J}}{\partial{\theta_{1}}\partial{\theta_{2}}} &\frac{\partial^{2}{J}}{\partial{\theta_{1}}\partial{\theta_{3}}} \\\frac{\partial^{2}{J}}{\partial{\theta_{2}}\partial{\theta_{1}}}   &\frac{\partial^{2}{J}}{\partial{\theta_{2}}\partial{\theta_{2}}} &\frac{\partial^{2}{J}}{\partial{\theta_{2}}\partial{\theta_{3}}}\\\frac{\partial^{2}{J}}{\partial{\theta_{3}}\partial{\theta_{1}}}   &\frac{\partial^{2}{J}}{\partial{\theta_{3}}\partial{\theta_{2}}}&\frac{\partial^{2}{J}}{\partial{\theta_{3}}\partial{\theta_{3}}}\\\end{split}\end{bmatrix}</script><script type="math/tex; mode=display">H_{\ell(\hat{\theta})} = \begin{bmatrix}\begin{split}\sum_{i=1}^{n}h_{\theta}(x_{i})(1-h_{\theta}(x_{i}))x_{i,1}x_{i,1},\ &\sum_{i=1}^{n}h_{\theta}(x_{i})(1-h_{\theta}(x_{i}))x_{i,1}x_{i,2},\ &\sum_{i=1}^{n}h_{\theta}(x_{i})(1-h_{\theta}(x_{i}))x_{i,1}\\\sum_{i=1}^{n}h_{\theta}(x_{i})(1-h_{\theta}(x_{i}))x_{i,2}x_{i,1},\ &\sum_{i=1}^{n}h_{\theta}(x_{i})(1-h_{\theta}(x_{i}))x_{i,2}x_{i,2},\ &\sum_{i=1}^{n}h_{\theta}(x_{i})(1-h_{\theta}(x_{i}))x_{i,2},\\\sum_{i=1}^{n}h_{\theta}(x_{i})(1-h_{\theta}(x_{i}))x_{i,1},\ &\sum_{i=1}^{n}h_{\theta}(x_{i})(1-h_{\theta}(x_{i}))x_{i,2},\ &\sum_{i=1}^{n}h_{\theta}(x_{i})(1-h_{\theta}(x_{i}))x_{i,3}\\\end{split}\end{bmatrix} \\</script><script type="math/tex; mode=display">\begin{align}&h_{\theta}(x_i) = \frac{1}{1 + e^{-z}}\\&z = \theta_{1}x_{i,1} + \theta_{2}x_{i,2}+\theta_3\end{align}</script><p>ä¸€é˜¶å¯¼æ•°</p><script type="math/tex; mode=display">\nabla J = -\begin{pmatrix}\sum_{i=1}^{n}(y_{i} - h_{\theta}(x_{i}))x_{i,1}\\ \sum_{i=1}^{n}(y_{i} - h_{\theta}(x_{i}))x_{i,2}\\ \sum_{i=1}^{n}(y_{i} - h_{\theta}(x_{i}))x_{i,3}\end{pmatrix}</script><script type="math/tex; mode=display">\theta_j=\theta_j - H^{-1}\nabla J(\theta)</script><p><code>In[8]</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">sigmoid_eg</span><span class="params">(x1, x2, theta_1, theta_2, theta_3)</span>:</span></span><br><span class="line">    z = (theta_1 * x1 + theta_2 * x2 + theta_3).astype(<span class="string">"float_"</span>)</span><br><span class="line">    <span class="keyword">return</span> <span class="number">1.0</span> / (<span class="number">1.0</span> + np.exp(-z))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">Cost</span><span class="params">(x1, x2, y, theta_1, theta_2, theta_3)</span>:</span></span><br><span class="line">    sigmoid_probs = sigmoid_eg(x1, x2, theta_1, theta_2, theta_3)</span><br><span class="line">    <span class="keyword">return</span> -np.mean(y * np.log(sigmoid_probs) +</span><br><span class="line">                    (<span class="number">1</span> - y) * np.log(<span class="number">1</span> - sigmoid_probs))</span><br></pre></td></tr></table></figure><p><code>In[9]</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">gradient_nt</span><span class="params">(x1, x2, y, theta_1, theta_2, theta_3)</span>:</span></span><br><span class="line">    sigmoid_probs = sigmoid_eg(x1, x2, theta_1, theta_2, theta_3)</span><br><span class="line">    <span class="keyword">return</span> np.array([</span><br><span class="line">        np.sum((y - sigmoid_probs) * x1),</span><br><span class="line">        np.sum((y - sigmoid_probs) * x2),</span><br><span class="line">        np.sum(y - sigmoid_probs)</span><br><span class="line">    ])</span><br></pre></td></tr></table></figure><p><code>In[10]</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">hessian</span><span class="params">(x1, x2, y, theta_1, theta_2, theta_3)</span>:</span></span><br><span class="line">    sigmoid_probs = sigmoid_eg(x1, x2, theta_1, theta_2, theta_3)</span><br><span class="line">    d1 = np.sum((sigmoid_probs * (<span class="number">1</span> - sigmoid_probs)) * x1 * x1)</span><br><span class="line">    d2 = np.sum((sigmoid_probs * (<span class="number">1</span> - sigmoid_probs)) * x1 * x2)</span><br><span class="line">    d3 = np.sum((sigmoid_probs * (<span class="number">1</span> - sigmoid_probs)) * x1)</span><br><span class="line">    d4 = np.sum((sigmoid_probs * (<span class="number">1</span> - sigmoid_probs)) * x2 * x1)</span><br><span class="line">    d5 = np.sum((sigmoid_probs * (<span class="number">1</span> - sigmoid_probs)) * x2 * x2)</span><br><span class="line">    d6 = np.sum((sigmoid_probs * (<span class="number">1</span> - sigmoid_probs)) * x2)</span><br><span class="line">    d7 = np.sum((sigmoid_probs * (<span class="number">1</span> - sigmoid_probs)) * x1)</span><br><span class="line">    d8 = np.sum((sigmoid_probs * (<span class="number">1</span> - sigmoid_probs)) * x2)</span><br><span class="line">    d9 = np.sum((sigmoid_probs * (<span class="number">1</span> - sigmoid_probs)))</span><br><span class="line">    H = np.array([[d1, d2, d3], [d4, d5, d6], [d7, d8, d9]])</span><br><span class="line">    <span class="keyword">return</span> H</span><br></pre></td></tr></table></figure><p><code>In[11]</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">theta_1 = <span class="number">0.001</span></span><br><span class="line">theta_2 = <span class="number">-0.4</span></span><br><span class="line">theta_3 = <span class="number">0.6</span></span><br><span class="line">sigmoid_probs = sigmoid_eg(simulated_separableish_features[:,<span class="number">0</span>],\</span><br><span class="line">                    simulated_separableish_features[:,<span class="number">1</span>],\</span><br><span class="line">                     theta_1,theta_2,theta_3)</span><br><span class="line"></span><br><span class="line">sigmoid_probs</span><br></pre></td></tr></table></figure><p><code>Out[11]</code></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">array([0.70539901, 0.71740128, 0.75001283, ..., 0.25536395, 0.25133316,</span><br><span class="line">       0.20942065])</span><br></pre></td></tr></table></figure><p><code>In[12]</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">newtons_method</span><span class="params">(x1, x2, y)</span>:</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># Initialize Cost &amp; parameters</span></span><br><span class="line">    theta_1 = <span class="number">0.001</span></span><br><span class="line">    theta_2 = <span class="number">-0.4</span></span><br><span class="line">    theta_3 = <span class="number">0.6</span></span><br><span class="line">    delta_l = np.Infinity</span><br><span class="line">    l = Cost(x1, x2, y, theta_1, theta_2, theta_3)</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># Convergence Conditions</span></span><br><span class="line">    Î´ = <span class="number">.0000000001</span></span><br><span class="line">    max_iterations = <span class="number">15</span></span><br><span class="line">    i = <span class="number">0</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">while</span> abs(delta_l) &gt; Î´ <span class="keyword">and</span> i &lt; max_iterations:</span><br><span class="line">        i += <span class="number">1</span></span><br><span class="line">        g = gradient_nt(x1, x2, y, theta_1, theta_2, theta_3)</span><br><span class="line">        hess = hessian(x1, x2, y, theta_1, theta_2, theta_3)</span><br><span class="line">        H_inv = np.linalg.inv(hess)</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># @ is syntactic sugar for np.dot(H_inv, g.T)Â¹</span></span><br><span class="line">        delta = H_inv @ g.T</span><br><span class="line">        delta_theta_1 = delta[<span class="number">0</span>]</span><br><span class="line">        delta_theta_2 = delta[<span class="number">1</span>]</span><br><span class="line">        delta_theta_3 = delta[<span class="number">2</span>]</span><br><span class="line">        print(theta_1, theta_2, theta_3, l, g)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># Perform our update step</span></span><br><span class="line">        theta_1 += delta_theta_1</span><br><span class="line">        theta_2 += delta_theta_2</span><br><span class="line">        theta_3 += delta_theta_3</span><br><span class="line"></span><br><span class="line">        <span class="comment"># Update the log-likelihood at each iteration</span></span><br><span class="line">        l_new = Cost(x1, x2, y, theta_1, theta_2, theta_3)</span><br><span class="line">        delta_l = l - l_new</span><br><span class="line">        l = l_new</span><br><span class="line">        </span><br><span class="line">    <span class="keyword">return</span> np.array([theta_1, theta_2, theta_3])</span><br></pre></td></tr></table></figure><p><code>In[13]</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">weights_NT = newtons_method(simulated_separableish_features[:,<span class="number">0</span>],\</span><br><span class="line">                    simulated_separableish_features[:,<span class="number">1</span>],\</span><br><span class="line">                    simulated_labels)</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">0.001 -0.4 0.6 1.192232682683846 [ 4203.81624265 15339.64896586   425.24295633]</span><br><span class="line">-0.5323055089899444 1.3654730366188175 -2.213077389806385 0.1268005198001985 [  -4.87460157  917.75831422 -229.19748353]</span><br><span class="line">-1.1017906890766926 2.1170684289582935 -3.515199454248499 0.06344214919739537 [  9.11552841 372.53112984 -82.41612615]</span><br><span class="line">-1.696350075213766 2.9567826609247536 -4.958577211933369 0.0359808048849091 [  7.25193544 153.26328814 -30.62002723]</span><br><span class="line">-2.3598703977461986 3.9351755787400005 -6.633652721276137 0.023305245309678077 [  4.99551386  64.01150281 -11.18719616]</span><br><span class="line">-3.102101701476835 5.077389660723291 -8.586610622518707 0.017443703519444794 [ 3.20603557 26.54120782 -3.88451216]</span><br><span class="line">-3.8866316214728123 6.334661214553187 -10.738329272756982 0.014970682152691529 [ 1.76384655 10.23918884 -1.21513341]</span><br><span class="line">-4.578746773357871 7.479180436760244 -12.700646487249276 0.014194607302215922 [ 0.69308352  3.13228017 -0.30245818]</span><br><span class="line">-4.96926037381912 8.137065370724404 -13.830223818356856 0.014076397801702743 [ 0.13170341  0.51575348 -0.0430004 ]</span><br><span class="line">-5.055692120582939 8.28392101239704 -14.082565688206492 0.014072547126520205 [ 0.00514173  0.01873735 -0.00152877]</span><br><span class="line">-5.059007231550736 8.28957481482966 -14.092286111829237 0.014072542010902475 [3.46957973e-05 1.22308017e-04 4.33913704e-05]</span><br><span class="line">-5.059012074312396 8.289583319446658 -14.092299639264253 0.014072542383840357 [-1.32332893e-05 -3.33496011e-05 -1.47340364e-05]</span><br><span class="line">-5.059012209362201 8.289583262232439 -14.092299836143358 0.014072542049442381 [ 8.05848509e-06 -4.68544268e-06 -5.44347003e-06]</span><br><span class="line">-5.059011843642549 8.289583140516363 -14.0922999061835 0.014072542383840357 [-1.32332893e-05 -3.33496011e-05 -1.47340364e-05]</span><br></pre></td></tr></table></figure><p><code>In[14]</code></p><p><code>In[14]</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">print(<span class="string">'Gradient descent: &#123;&#125;'</span>.format(weights_GD))</span><br><span class="line">print(<span class="string">'Newtons method: &#123;&#125;'</span>.format(weights_NT))</span><br><span class="line">print(<span class="string">'Sklearn method: &#123;&#125; &#123;&#125;'</span>.format(clf.coef_, clf.intercept_,))</span><br></pre></td></tr></table></figure><p><code>Out[14]</code></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Gradient descent: [-5.059010268463914, 8.289579874245822, -14.092294984033252]</span><br><span class="line">Newtons method: [ -5.05901198   8.28958308 -14.0923001 ]</span><br><span class="line">Sklearn method: [[-5.02712572  8.23286799]] [-13.99400797]</span><br></pre></td></tr></table></figure><p>é€šè¿‡ä¸Šé¢çš„æ•°æ®å¤„ç†ï¼Œä¾¿å¾—åˆ°äº†å¯¹äºæœ¬æ¬¡å›å½’çš„æœ€ä¼˜è§£ï¼š<br><img src="https://i.loli.net/2019/02/13/5c63adc67f71c.png" width="700"></p><h2 id="4-ä»é€»è¾‘å›å½’åˆ°SoftMax"><a href="#4-ä»é€»è¾‘å›å½’åˆ°SoftMax" class="headerlink" title="4. ä»é€»è¾‘å›å½’åˆ°SoftMax"></a>4. ä»é€»è¾‘å›å½’åˆ°SoftMax</h2><p>å¯¹äºäºŒåˆ†ç±»é—®é¢˜ï¼Œæˆ‘ä»¬ä½¿ç”¨é€»è¾‘å›å½’</p><script type="math/tex; mode=display">h_\theta (x)=\frac{1}{1+e^{-\left ( \theta_1 x+\theta_2 \right )}}=\frac{e^{ \theta_1 x+\theta_2}}{1+e^{ \theta_1 x+\theta_2}}</script><p>è€Œå¯¹äºå¤šåˆ†ç±»çš„é—®é¢˜ï¼Œå°±è¦å¼•å…¥<strong><em>SoftMax Function</em></strong>ï¼Œå…¶æœ¬è´¨ä¸Šå’Œé€»è¾‘å›å½’ä¸€è‡´ï¼Œä½†éœ€è¦ä»å¤šä¸ªè§’åº¦åˆ†æ</p><ul><li>é¦–å…ˆå®šä¹‰</li></ul><script type="math/tex; mode=display">  Z_i (x)=\theta _{i,1}x_1+\theta _{i,2}x_2</script><ul><li>åˆ™<strong><em>SoftMax Function</em></strong>ä¸º</li></ul><script type="math/tex; mode=display">  Softmax = \frac{e^{z_i(x)}}{\sum e^{z_i(x)}}</script><ul><li>ä¾‹å¦‚æˆ‘ä»¬å®šä¹‰ä¸€ä¸ª5ç±»çš„<strong><em>SoftMax Function</em></strong></li></ul><script type="math/tex; mode=display">  p_i=\begin{cases}  \frac{e^{z_1(x)}}{\sum_{i=1}^{5} e^{z_i(x)}}&  & â‘ \\   \frac{e^{z_2(x)}}{\sum_{i=1}^{5} e^{z_i(x)}}&  & â‘¡\\   \frac{e^{z_3(x)}}{\sum_{i=1}^{5} e^{z_i(x)}}&  & â‘¢\\   \frac{e^{z_4(x)}}{\sum_{i=1}^{5} e^{z_i(x)}}&  & â‘£\\   \frac{e^{z_5(x)}}{\sum_{i=1}^{5} e^{z_i(x)}}&  & â‘¤  \end{cases}</script><p>åŒé€»è¾‘å›å½’ä¸€æ ·ï¼Œ<strong><em>SoftMax Function</em></strong>ä¹Ÿå¯ä»¥æ±‚åå¯¼</p><script type="math/tex; mode=display">\begin{align}\frac{\partial (Softmax_{(i)})}{\partial \theta _j}&=\frac{\partial }{\partial \theta _j}\frac{e^{\theta_{i}x_{i}}}{\sum_{j=1}^{n}e^{\theta_{j}x_{j}}}\\&\Rightarrow x_j\cdot\left ( 1-Softmax_{(i)} \right )\cdot Softmax_{(i)} &       &(i=j)\\&\Rightarrow -x_j \cdot Softmax_{(i)}\cdot Softmax_{(j)}&       &(i\neq j) \end{align}</script>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;é€»è¾‘å›å½’ä¸çº¿æ€§å›å½’&quot;&gt;&lt;a href=&quot;#é€»è¾‘å›å½’ä¸çº¿æ€§å›å½’&quot; class=&quot;headerlink&quot; title=&quot;é€»è¾‘å›å½’ä¸çº¿æ€§å›å½’&quot;&gt;&lt;/a&gt;&lt;em&gt;é€»è¾‘å›å½’ä¸çº¿æ€§å›å½’&lt;/em&gt;&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;çº¿æ€§å›å½’ï¼šé¢„æµ‹è¿ç»­æ•°å€¼å˜é‡ï¼ˆæ˜å¤©ä¸Šæµ·çš„åœ°é¢æ¸©åº¦ï¼Ÿï¼‰&lt;/li&gt;
&lt;li&gt;é€»è¾‘å›å½’ï¼šé¢„æµ‹åˆ†ç±» (classification)ï¼ˆä»Šå¤©ä¼šä¸ä¼šè€ƒè¯•ï¼Ÿï¼‰&lt;/li&gt;
&lt;li&gt;é€»è¾‘å›å½’ä¸çº¿æ€§å›å½’æœ‰ä»€ä¹ˆè”ç³»ï¼Ÿ&lt;/li&gt;
&lt;li&gt;ä»ä¸€ä¸ªä¾‹å­è¯´èµ·ï¼šè·å–æ•°æ®ï¼Œåˆ¤æ–­æ¶æ„è®¢æˆ¿&lt;/li&gt;
&lt;/ul&gt;
    
    </summary>
    
      <category term="Note" scheme="https://marara.xin/categories/Note/"/>
    
    
      <category term="Statistics" scheme="https://marara.xin/tags/Statistics/"/>
    
      <category term="Machine Learning" scheme="https://marara.xin/tags/Machine-Learning/"/>
    
  </entry>
  
  <entry>
    <title>æœ€ç®€å•æœ€å®ç”¨ï¼šçº¿æ€§å›å½’</title>
    <link href="https://marara.xin/2019/02/11/Linear_Regression_Lecture/"/>
    <id>https://marara.xin/2019/02/11/Linear_Regression_Lecture/</id>
    <published>2019-02-11T03:45:02.000Z</published>
    <updated>2020-03-11T05:30:08.459Z</updated>
    
    <content type="html"><![CDATA[<h2 id="çº¿æ€§å›å½’"><a href="#çº¿æ€§å›å½’" class="headerlink" title="çº¿æ€§å›å½’"></a><em>çº¿æ€§å›å½’</em></h2><ul><li>åœ¨è§£å†³è¿ç»­å˜é‡çš„é¢„æµ‹é—®é¢˜é‡Œï¼Œçº¿æ€§å›å½’æœ€ç®€å•</li><li>å¯¹äºå¾ˆå¤šé—®é¢˜ï¼Œåœ¨ä¸€å®šèŒƒå›´å†…æ˜¯æœ‰æ•ˆçš„</li><li>ç†è®ºå’Œåº”ç”¨ä¹Ÿæ˜¯æœ€å®Œå–„çš„</li></ul><a id="more"></a><h2 id="1-ä¸ºä»€ä¹ˆè¦ä½¿ç”¨çº¿æ€§å›å½’ï¼Ÿ"><a href="#1-ä¸ºä»€ä¹ˆè¦ä½¿ç”¨çº¿æ€§å›å½’ï¼Ÿ" class="headerlink" title="1. ä¸ºä»€ä¹ˆè¦ä½¿ç”¨çº¿æ€§å›å½’ï¼Ÿ"></a>1. ä¸ºä»€ä¹ˆè¦ä½¿ç”¨çº¿æ€§å›å½’ï¼Ÿ</h2><ul><li>$y=c_0+c_1 x_1+c_2 x_2$</li><li>å½¢å¼ç®€å•</li><li><p>åº”ç”¨å¹¿æ³›ï¼šèº«é«˜ä¸ä½“é‡ï¼Œæµ·æ‹”ä¸æ°”å‹<br><img src="https://i.loli.net/2019/02/11/5c60f71c96fc7.png" alt="hw"></p></li><li><p>æ™®é€šæœ€å°äºŒä¹˜æ³•ç†è§£å®¹æ˜“ï¼Œè®¡ç®—èµ·æ¥ç®€å•</p></li><li>ç»“æœä¹Ÿå¾ˆå®¹æ˜“è§£é‡Š</li><li>å¥¥å¡å§†å‰ƒåˆ€æŒ‡å—ï¼šå¦‚æœæ²¡æœ‰è¶³å¤Ÿçš„è¯æ®ï¼ˆç†ç”±ï¼‰ï¼Œå°±ä¸ç”¨æ›´å¤æ‚çš„æ¨¡å‹<blockquote><p>In my opinion the theory here is the logically simplest relativistic field theory that is at all possible.  But this does not mean that Nature might not obey a more complex theory.  More complex theories have frequently been proposed. . .  In my view, such more complicated systems and their combinations should be considered only if there exist physical-empirical reasons to do so.               </p><p>â€‹                                                                â€”Einstein</p></blockquote></li></ul><h2 id="2-å¦‚ä½•è®¡ç®—çº¿æ€§å›å½’ï¼Ÿæœ€å°äºŒä¹˜æ³•"><a href="#2-å¦‚ä½•è®¡ç®—çº¿æ€§å›å½’ï¼Ÿæœ€å°äºŒä¹˜æ³•" class="headerlink" title="2. å¦‚ä½•è®¡ç®—çº¿æ€§å›å½’ï¼Ÿæœ€å°äºŒä¹˜æ³•"></a>2. å¦‚ä½•è®¡ç®—çº¿æ€§å›å½’ï¼Ÿæœ€å°äºŒä¹˜æ³•</h2><ul><li>ä¸–ç•Œä¸æ˜¯å®Œç¾çš„ï¼Œè¦æ¥çº³ä¸å®Œç¾</li><li>éœ€è¦é€šè¿‡é‡åŒ–çš„å½¢å¼æ¥æ¯”è¾ƒ<br><img src="https://i.loli.net/2019/02/11/5c60fec49326f.png" width="500"></li></ul><script type="math/tex; mode=display">\begin{align}\hat{y}_{é»„} = c_0 + c_1 x \\\hat{y}_{çº¢} = d_0 + d_1 x\end{align}</script><p><img src="https://i.loli.net/2019/02/11/5c60fed7bb135.png" width="500"></p><ul><li><p>æ¯ä¸ªè§‚æµ‹å€¼æ˜¯$x_i,y_i$</p></li><li><p>$x_i$æ˜¯è‡ªå˜é‡ï¼Œå›å½’çš„å€¼æ˜¯$\hat{y}_i$</p></li><li><p>æ ·æœ¬çš„å›å½’æ˜¯å¯¹æ€»ä½“çš„å›å½’çš„ä¼°è®¡</p><script type="math/tex; mode=display">\begin{align}&\hat{y}_i = \hat{\alpha} + \hat{\beta} x_i \\&y_i = \alpha + \beta x_i \\end{align}</script></li></ul><p><img src="https://i.loli.net/2019/02/11/5c60fea46485b.png" width="700"></p><ul><li>å•ä¸ªç‚¹çš„æ‹Ÿåˆç¨‹åº¦ç”¨<strong>æ®‹å·®</strong>æ¥è¡¡é‡ï¼š<script type="math/tex; mode=display">\begin{align}\epsilon_i = y_i - \hat{y}_i\end{align}</script></li></ul><ul><li><p>æ•´ä½“çš„æ‹Ÿåˆç¨‹åº¦ï¼Œç”¨<strong>æ®‹å·®å¹³æ–¹å’Œï¼ˆSSEï¼‰</strong>æ¥è¡¡é‡ï¼š</p><script type="math/tex; mode=display">\begin{align}sum\ of\ square\ error &= \sum_i \epsilon_i^2 \\&= \sum_i (y_i - \hat{y}_i)^2 \\&= \sum_i (y_i - \hat{\alpha} - \hat{\beta} x_i )^2\\end{align}</script></li></ul><h4 id="é€‰å‡ºæ‹Ÿåˆç¨‹åº¦æœ€å¥½çš„ç›´çº¿"><a href="#é€‰å‡ºæ‹Ÿåˆç¨‹åº¦æœ€å¥½çš„ç›´çº¿" class="headerlink" title="é€‰å‡ºæ‹Ÿåˆç¨‹åº¦æœ€å¥½çš„ç›´çº¿"></a>é€‰å‡ºæ‹Ÿåˆç¨‹åº¦æœ€å¥½çš„ç›´çº¿</h4><ul><li><p>æ®‹å·®å¹³æ–¹å’Œæœ€å°çš„ç›´çº¿</p></li><li><p>æ ¹æ®æå€¼æ¡ä»¶æ±‚ $\alpha,\beta$</p><script type="math/tex; mode=display">\begin{align}&\hat{\beta} =  \frac{\sum(x_i-\bar{x})(y_i-\bar{y})}{\sum(x_i-\bar{x})^2}\\&\hat{\alpha} =  \bar{y}-\hat{\beta}\bar{x}\end{align}</script></li></ul><h2 id="3-ç”±æœ€å°äºŒä¹˜æ³•é€‰å‡ºçš„ç›´çº¿æœ‰æ²¡æœ‰ç”¨ï¼Ÿ"><a href="#3-ç”±æœ€å°äºŒä¹˜æ³•é€‰å‡ºçš„ç›´çº¿æœ‰æ²¡æœ‰ç”¨ï¼Ÿ" class="headerlink" title="3. ç”±æœ€å°äºŒä¹˜æ³•é€‰å‡ºçš„ç›´çº¿æœ‰æ²¡æœ‰ç”¨ï¼Ÿ"></a>3. ç”±æœ€å°äºŒä¹˜æ³•é€‰å‡ºçš„ç›´çº¿æœ‰æ²¡æœ‰ç”¨ï¼Ÿ</h2><ul><li>é€‰å‡ºä¸€æ ¹ç›´çº¿åªæ˜¯ä¸‡é‡Œé•¿å¾ç¬¬ä¸€æ­¥</li><li>ä¸ç®¡æ˜¯ä»€ä¹ˆæ ·çš„æ•°æ®ï¼Œéƒ½å¯ä»¥è®¡ç®—å‡ºä¸€æ ¹è¿™æ ·çš„ç›´çº¿</li><li>éœ€è¦ç”¨å…¶ä»–æ ‡å‡†æ¥è¡¡é‡ï¼Œè¿™è·Ÿç›´çº¿ï¼Œå¯¹è§£é‡Šæ•°æ®åˆ°åº•æœ‰æ²¡æœ‰ç”¨</li></ul><p><code>In[1]</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"></span><br><span class="line">%matplotlib inline</span><br><span class="line">%config InlineBackend.figure_format = <span class="string">'retina'</span></span><br><span class="line"></span><br><span class="line">x = np.linspace(<span class="number">0</span>, <span class="number">800</span>, <span class="number">10000</span>)</span><br><span class="line">np.random.seed(<span class="number">1</span>)</span><br><span class="line">y = <span class="number">400</span> + np.random.random(<span class="number">10000</span>) * <span class="number">400</span> + x * <span class="number">0.002</span></span><br><span class="line"></span><br><span class="line">plt.figure(figsize=[<span class="number">8</span>, <span class="number">6</span>])</span><br><span class="line">plt.scatter(x, y, s=<span class="number">0.2</span>)</span><br><span class="line"></span><br><span class="line">plt.xlabel(<span class="string">'PM_Nongzhanguan'</span>)</span><br><span class="line">plt.ylabel(<span class="string">'PM_Dongsi'</span>)</span><br></pre></td></tr></table></figure><p><code>Out[1]</code></p><pre><code>Text(0, 0.5, &#39;PM_Dongsi&#39;)</code></pre><p><img src="https://i.loli.net/2019/02/11/5c60fe86690db.png" alt="png"></p><p><code>In[2]</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> sklearn.linear_model <span class="keyword">import</span> LinearRegression</span><br><span class="line">lr = LinearRegression()</span><br><span class="line">lr.fit(x.reshape(<span class="number">-1</span>, <span class="number">1</span>), y)</span><br><span class="line">y_hat = lr.predict(x.reshape(<span class="number">-1</span>, <span class="number">1</span>))</span><br><span class="line"></span><br><span class="line">print(<span class="string">'intercept = %f, slope = %f'</span> % (lr.intercept_, lr.coef_))</span><br><span class="line"></span><br><span class="line">plt.figure(figsize=[<span class="number">8</span>, <span class="number">6</span>])</span><br><span class="line">plt.scatter(x, y, s=<span class="number">0.2</span>)</span><br><span class="line">plt.plot(x, <span class="number">600</span> + x * <span class="number">0.002</span>, <span class="string">'--'</span>, c=<span class="string">'blue'</span>)</span><br><span class="line">plt.plot(x, y_hat, c=<span class="string">'red'</span>)</span><br><span class="line">plt.xlabel(<span class="string">'PM_Nongzhonguan'</span>)</span><br><span class="line">plt.ylabel(<span class="string">'PM_Dongsi'</span>)</span><br></pre></td></tr></table></figure><pre><code>intercept = 600.891491, slope = -0.002232</code></pre><p><code>Out[2]</code></p><pre><code>Text(0, 0.5, &#39;PM_Dongsi&#39;)</code></pre><p><img src="https://i.loli.net/2019/02/11/5c60f7756589f.png" alt="output_10_2"></p><p><code>In[3]</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">y_1_random = (y - x * <span class="number">0.002</span>)</span><br><span class="line">y_2 = np.mean(</span><br><span class="line">    y_1_random) + x * <span class="number">0.002</span> + (y_1_random - np.mean(y_1_random)) / <span class="number">400</span> * <span class="number">20</span></span><br><span class="line"></span><br><span class="line">plt.figure(figsize=[<span class="number">8</span>, <span class="number">6</span>])</span><br><span class="line">plt.scatter(x, y_2, s=<span class="number">0.2</span>)</span><br><span class="line">plt.xlabel(<span class="string">'PM_Nongzhanguan'</span>)</span><br><span class="line">plt.ylabel(<span class="string">'PM_Dongsi'</span>)</span><br><span class="line">plt.ylim([<span class="number">400</span>, <span class="number">800</span>])</span><br></pre></td></tr></table></figure><p><code>Out[3]</code></p><pre><code>(400, 800)</code></pre><p><img src="https://i.loli.net/2019/02/11/5c60f79fb1517.png" alt="output_11_1"></p><p><code>In[4]</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> sklearn.linear_model <span class="keyword">import</span> LinearRegression</span><br><span class="line">lr2 = LinearRegression()</span><br><span class="line">lr2.fit(x.reshape(<span class="number">-1</span>, <span class="number">1</span>), y_2)</span><br><span class="line">y_hat_2 = lr2.predict(x.reshape(<span class="number">-1</span>, <span class="number">1</span>))</span><br><span class="line">plt.figure(figsize=[<span class="number">8</span>, <span class="number">6</span>])</span><br><span class="line">plt.scatter(x, y_2, s=<span class="number">0.2</span>)</span><br><span class="line">plt.plot(x, y_hat_2, c=<span class="string">'white'</span>)</span><br><span class="line">plt.xlabel(<span class="string">'PM_Nongzhanguan'</span>)</span><br><span class="line">plt.ylabel(<span class="string">'PM_Dongsi'</span>)</span><br><span class="line">plt.ylim([<span class="number">400</span>, <span class="number">800</span>])</span><br><span class="line">print(<span class="string">'intercept = %f, slope = %f'</span> % (lr2.intercept_, lr2.coef_))</span><br></pre></td></tr></table></figure><pre><code>intercept = 599.283220, slope = 0.001788</code></pre><p><img src="https://i.loli.net/2019/02/11/5c60fca7cb836.png" alt="output_12_1"></p><p><code>In[5]</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">fig = plt.figure(figsize=(<span class="number">15</span>, <span class="number">6</span>))</span><br><span class="line">fig.subplots_adjust(hspace=<span class="number">0.4</span>, wspace=<span class="number">0.4</span>)</span><br><span class="line">plt.subplot(<span class="number">1</span>, <span class="number">2</span>, <span class="number">1</span>)</span><br><span class="line">plt.scatter(x, y, s=<span class="number">0.2</span>)</span><br><span class="line">plt.plot(x, y_hat, c=<span class="string">'red'</span>)</span><br><span class="line">plt.xlabel(<span class="string">'PM_Nongzhanguan'</span>)</span><br><span class="line">plt.ylabel(<span class="string">'PM_Dongsi'</span>)</span><br><span class="line"></span><br><span class="line">plt.subplot(<span class="number">1</span>, <span class="number">2</span>, <span class="number">2</span>)</span><br><span class="line">plt.scatter(x, y_2, s=<span class="number">0.2</span>)</span><br><span class="line">plt.plot(x, y_hat_2, c=<span class="string">'white'</span>)</span><br><span class="line">plt.xlabel(<span class="string">'PM_Nongzhanguan'</span>)</span><br><span class="line">plt.ylabel(<span class="string">'PM_Dongsi'</span>)</span><br><span class="line">plt.ylim([<span class="number">400</span>, <span class="number">800</span>])</span><br><span class="line">print(<span class="string">'left intercept = %f, slope = %f'</span> % (lr.intercept_, lr.coef_))</span><br><span class="line">print(<span class="string">'right intercept = %f, slope = %f'</span> % (lr2.intercept_, lr2.coef_))</span><br></pre></td></tr></table></figure><pre><code>left intercept = 600.891491, slope = -0.002232right intercept = 599.283220, slope = 0.001788</code></pre><p><img src="https://i.loli.net/2019/02/11/5c60fcbcc4d65.png" alt="output_13_1"></p><p><code>In[6]</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">x = np.linspace(<span class="number">0</span>, <span class="number">800</span>, <span class="number">10000</span>)</span><br><span class="line">np.random.seed(<span class="number">2</span>)</span><br><span class="line">y3 = <span class="number">400</span> + np.random.random(<span class="number">10000</span>) * <span class="number">400</span> + x * <span class="number">0.002</span></span><br><span class="line"></span><br><span class="line">lr3 = LinearRegression()</span><br><span class="line">lr3.fit(x.reshape(<span class="number">-1</span>, <span class="number">1</span>), y3)</span><br><span class="line">y_hat_3 = lr3.predict(x.reshape(<span class="number">-1</span>, <span class="number">1</span>))</span><br><span class="line"></span><br><span class="line">y_3_random = (y3 - x * <span class="number">0.002</span>)</span><br><span class="line">y_4 = np.mean(</span><br><span class="line">    y_3_random) + x * <span class="number">0.002</span> + (y_3_random - np.mean(y_3_random)) / <span class="number">400</span> * <span class="number">20</span></span><br><span class="line">lr4 = LinearRegression()</span><br><span class="line">lr4.fit(x.reshape(<span class="number">-1</span>, <span class="number">1</span>), y_4)</span><br><span class="line">y_hat_4 = lr4.predict(x.reshape(<span class="number">-1</span>, <span class="number">1</span>))</span><br><span class="line">print(<span class="string">'left intercept = %f, slope = %f'</span> % (lr3.intercept_, lr3.coef_))</span><br><span class="line">print(<span class="string">'right intercept = %f, slope = %f'</span> % (lr4.intercept_, lr4.coef_))</span><br></pre></td></tr></table></figure><pre><code>left intercept = 597.434210, slope = 0.002158right intercept = 597.494287, slope = 0.002008</code></pre><p><code>In[7]</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">x = np.linspace(<span class="number">0</span>, <span class="number">800</span>, <span class="number">10000</span>)</span><br><span class="line">np.random.seed(<span class="number">3</span>)</span><br><span class="line">y3 = <span class="number">400</span> + np.random.random(<span class="number">10000</span>) * <span class="number">400</span> + x * <span class="number">0.002</span></span><br><span class="line"></span><br><span class="line">lr3 = LinearRegression()</span><br><span class="line">lr3.fit(x.reshape(<span class="number">-1</span>, <span class="number">1</span>), y3)</span><br><span class="line">y_hat_3 = lr3.predict(x.reshape(<span class="number">-1</span>, <span class="number">1</span>))</span><br><span class="line"></span><br><span class="line">y_3_random = (y3 - x * <span class="number">0.002</span>)</span><br><span class="line">y_4 = np.mean(</span><br><span class="line">    y_3_random) + x * <span class="number">0.002</span> + (y_3_random - np.mean(y_3_random)) / <span class="number">400</span> * <span class="number">20</span></span><br><span class="line">lr4 = LinearRegression()</span><br><span class="line">lr4.fit(x.reshape(<span class="number">-1</span>, <span class="number">1</span>), y_4)</span><br><span class="line">y_hat_4 = lr4.predict(x.reshape(<span class="number">-1</span>, <span class="number">1</span>))</span><br><span class="line">print(<span class="string">'left intercept = %f, slope = %f'</span> % (lr3.intercept_, lr3.coef_))</span><br><span class="line">print(<span class="string">'right intercept = %f, slope = %f'</span> % (lr4.intercept_, lr4.coef_))</span><br></pre></td></tr></table></figure><pre><code>left intercept = 599.686570, slope = -0.000431right intercept = 598.762664, slope = 0.001878</code></pre><p><code>In[8]</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">coeff_lr</span><span class="params">(i)</span>:</span></span><br><span class="line">    x = np.linspace(<span class="number">0</span>, <span class="number">800</span>, <span class="number">10000</span>)</span><br><span class="line">    np.random.seed(i)</span><br><span class="line">    y3 = <span class="number">400</span> + np.random.random(<span class="number">10000</span>) * <span class="number">400</span> + x * <span class="number">0.002</span></span><br><span class="line"></span><br><span class="line">    lr3 = LinearRegression()</span><br><span class="line">    lr3.fit(x.reshape(<span class="number">-1</span>, <span class="number">1</span>), y3)</span><br><span class="line">    y_hat_3 = lr3.predict(x.reshape(<span class="number">-1</span>, <span class="number">1</span>))</span><br><span class="line"></span><br><span class="line">    y_3_random = (y3 - x * <span class="number">0.002</span>)</span><br><span class="line">    y_4 = np.mean(</span><br><span class="line">        y_3_random) + x * <span class="number">0.002</span> + (y_3_random - np.mean(y_3_random)) / <span class="number">400</span> * <span class="number">20</span></span><br><span class="line">    lr4 = LinearRegression()</span><br><span class="line">    lr4.fit(x.reshape(<span class="number">-1</span>, <span class="number">1</span>), y_4)</span><br><span class="line">    y_hat_4 = lr4.predict(x.reshape(<span class="number">-1</span>, <span class="number">1</span>))</span><br><span class="line">    <span class="comment">#print('left intercept = %f, slope = %f'%(lr3.intercept_,lr3.coef_))</span></span><br><span class="line">    <span class="comment">#print('right intercept = %f, slope = %f'%(lr4.intercept_,lr4.coef_))</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> pd.DataFrame([[<span class="number">0</span>, lr3.coef_], [<span class="number">1</span>, lr4.coef_]],</span><br><span class="line">                        columns=[<span class="string">'cate'</span>, <span class="string">'coef_'</span>])</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">result = coeff_lr(<span class="number">0</span>)</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>, <span class="number">100</span>):</span><br><span class="line">    df = coeff_lr(i)</span><br><span class="line">    result = result.append(df, ignore_index=<span class="keyword">True</span>)</span><br></pre></td></tr></table></figure><p><code>In[9]</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> seaborn <span class="keyword">as</span> sns</span><br><span class="line">sns.stripplot(</span><br><span class="line">    x=<span class="string">"cate"</span>, y=<span class="string">"coef_"</span>, data=result, jitter=<span class="keyword">True</span>)</span><br></pre></td></tr></table></figure><p><img src="https://i.loli.net/2019/02/11/5c60fce73689c.png" alt="output_17_1"></p><h3 id="3-1-è¦ç‚¹"><a href="#3-1-è¦ç‚¹" class="headerlink" title="3.1 è¦ç‚¹"></a>3.1 è¦ç‚¹</h3><ul><li>æ¯æ¬¡å›å½’æ˜¯å¯¹<strong>æŸä¸€æ¬¡æŠ½æ ·</strong>çš„æ ·æœ¬è¿›è¡Œå›å½’åˆ†æ</li><li>å¯¹æ ·æœ¬å›å½’è®¡ç®—åçš„æ–œç‡æ˜¯ä¸ªå˜é‡ï¼ŒéšæŠ½æ ·ç»“æœä¸åŒè€Œä¸åŒ</li></ul><h3 id="3-2-éœ€è¦è¿›ä¸€æ­¥ä½¿ç”¨å…¶ä»–æŒ‡æ ‡æ¥è¡¡é‡çº¿æ€§å›å½’çš„æ•ˆç”¨ï¼Œè¾¾åˆ°å»ºæ¨¡ä¸åˆ†æçš„ç›®çš„"><a href="#3-2-éœ€è¦è¿›ä¸€æ­¥ä½¿ç”¨å…¶ä»–æŒ‡æ ‡æ¥è¡¡é‡çº¿æ€§å›å½’çš„æ•ˆç”¨ï¼Œè¾¾åˆ°å»ºæ¨¡ä¸åˆ†æçš„ç›®çš„" class="headerlink" title="3.2 éœ€è¦è¿›ä¸€æ­¥ä½¿ç”¨å…¶ä»–æŒ‡æ ‡æ¥è¡¡é‡çº¿æ€§å›å½’çš„æ•ˆç”¨ï¼Œè¾¾åˆ°å»ºæ¨¡ä¸åˆ†æçš„ç›®çš„"></a>3.2 éœ€è¦è¿›ä¸€æ­¥ä½¿ç”¨å…¶ä»–æŒ‡æ ‡æ¥è¡¡é‡çº¿æ€§å›å½’çš„æ•ˆç”¨ï¼Œè¾¾åˆ°å»ºæ¨¡ä¸åˆ†æçš„ç›®çš„</h3><ul><li>å›å½’åˆ†æçš„<span style="color:blue">ç›®çš„</span>æ˜¯ä»€ä¹ˆï¼Ÿ<ul><li>å»ä¼°è®¡æ€»ä½“çš„xä¸æ€»ä½“çš„yä¹‹é—´çš„å…³ç³»ï¼Œæ˜¯æ­£ç›¸å…³ï¼Ÿè´Ÿç›¸å…³ï¼Ÿè¿˜æ˜¯ä¸ç›¸å…³ï¼Ÿï¼ˆè¿™ä¸€å±‚é¢ï¼Œåœ¨äºä¸â€˜ä¸ç›¸å…³â€˜æ¯”è¾ƒï¼‰</li><li>ç›¸å…³æ€§ä¼šä¸ä¼šéšä¸åŒçš„æŠ½æ ·æƒ…æ™¯å˜åŒ–ï¼Ÿä¼šä¸ä¼šå‡ºç°ï¼šç¬¬ä¸€æ¬¡æŠ½æ ·çš„å›å½’ç»“æœæ˜¯æ­£ç›¸å…³ï¼Œç¬¬äºŒæ¬¡æŠ½æ ·çš„å›å½’ç»“æœæ˜¯è´Ÿç›¸å…³ï¼Ÿ</li><li>ç¡®å®šäº†ç›¸å…³æ€§ï¼Œé‚£ä¹ˆçº¿æ€§å›å½’æ¨¡å‹èƒ½ä¸èƒ½å¾ˆå¥½çš„è§£é‡ŠåŸæœ‰æ•°æ®çš„ç‰¹ç‚¹ï¼Ÿ</li></ul></li></ul><h2 id="4-çº¿æ€§å›å½’çš„å‚æ•°ä¼°è®¡åˆ†æ"><a href="#4-çº¿æ€§å›å½’çš„å‚æ•°ä¼°è®¡åˆ†æ" class="headerlink" title="4. çº¿æ€§å›å½’çš„å‚æ•°ä¼°è®¡åˆ†æ"></a>4. çº¿æ€§å›å½’çš„å‚æ•°ä¼°è®¡åˆ†æ</h2><h4 id="ä»¥æ–œç‡ä¸ºä¾‹"><a href="#ä»¥æ–œç‡ä¸ºä¾‹" class="headerlink" title="ä»¥æ–œç‡ä¸ºä¾‹"></a>ä»¥æ–œç‡ä¸ºä¾‹</h4><ul><li><p>æ–œç‡çš„ç¬¦å·ä¸ç›¸å…³æ€§</p><script type="math/tex; mode=display">\begin{align}\hat{\beta} & = \frac{Cov(x,y)}{Var(x)} \\& = \frac{Cov(x,y)}{\sqrt{Var(x) }\sqrt{Var(x)} }\\& = \frac{Cov(x,y)}{\sqrt{Var(x) }\sqrt{Var(y)}}\frac{\sqrt{Var(y)}} {\sqrt{Var(x)} }\\& ={Corr(x,y)}\frac{\sqrt{Var(y)}}{\sqrt{Var(x)}}\end{align}</script></li><li><p>åœ¨å‡è®¾æ£€éªŒçš„æ¡†æ¶ä¸‹ï¼Œè¡¡é‡å›å½’å‚æ•°ç¬¦å·çš„<strong>ä¸ç¡®å®šæ€§</strong></p></li><li><p>$\hat{\beta}$éšæ ·æœ¬å˜åŒ–è€Œå˜åŒ–ï¼Œæ˜¯æ€»ä½“å›å½’å‚æ•°$\beta$çš„ä¼°è®¡é‡ï¼Œå…·æœ‰å‡å€¼å’Œæ–¹å·®</p><script type="math/tex; mode=display">\begin{align}\hat{\beta} &= \frac{\sum(x_i-\bar{x})(y_i-\bar{y})}{\sum(x_i-\bar{x})^2}\\&= \frac{\sum(x_i-\bar{x})y_i}{\sum(x_i-\bar{x})^2}\\\end{align}</script><script type="math/tex; mode=display">\begin{align}E(\hat{\beta})&=\frac{\sum(x_i-\bar{x})E(y_i)}{\sum(x_i-\bar{x})^2}\\&=\frac{\sum(x_i-\bar{x})(\alpha+\beta x_i)}{\sum(x_i-\bar{x})^2}\\&=\beta\end{align}</script><script type="math/tex; mode=display">\begin{align}Var(\hat{\beta}) &= \sum[\frac{(x_i-\bar{x})}{\sum(x_i-\bar{x})2}]2Var(y_i)\\&=\frac{\sigma2}{\sum(x_i-\bar{x})2}\end{align}</script></li></ul><p><img src="https://i.loli.net/2019/02/11/5c60fd2e0639b.png" width="500"></p><ul><li><p>ç”¨tæ£€éªŒæ¥åˆ¤æ–­ï¼Œ0åœ¨å›å½’å‚æ•°åˆ†å¸ƒçš„ä½ç½®ï¼Œä»¥åˆ¤æ–­å‚æ•°æ­£è´Ÿç¬¦å·çš„ä¸ç¡®å®šæ€§</p></li><li><p>tæ£€éªŒï¼š</p><ul><li>åŸå‡è®¾ï¼Œ H0: $\beta = 0$</li><li>å¤‡æ‹©å‡è®¾,H1: $\beta \neq 0$</li><li>$\hat{\beta} \sim N(\beta,\frac{\sigma^2}{\sum(x_i-x)^2}$)</li><li>æ„é€ ç»Ÿè®¡é‡<ul><li>$t = \frac{\hat{\beta}}{\sqrt{\hat{\sigma}^2/\sum(x_i-x)^2}}$</li><li>å…¶ä¸­ $\hat{\sigma}^2 = \frac{1}{n-1}\sum e_i^2 = \frac{1}{n-1}\sum(y_i-\hat{y_i})^2$</li></ul></li><li>è®¡ç®—å¯¹åº”çš„på€¼ï¼Œåˆ¤æ–­æ˜¯å¦æ‹’ç»åŸå‡è®¾</li></ul></li></ul><p><img src="https://i.loli.net/2019/02/11/5c60fd581123b.png" width="400"></p><ul><li>å¦‚ä½•è§£é‡Šæ˜¾è‘—æ€§ï¼Ÿï¼ˆæˆ‘çš„ç†è§£åº”è§£é‡Šä¸ºç›¸å…³æ€§çš„ç¡®å®šç¨‹åº¦ï¼‰</li></ul><h2 id="5-çº¿æ€§å›å½’å¯¹æ•°æ®çš„è§£é‡Š"><a href="#5-çº¿æ€§å›å½’å¯¹æ•°æ®çš„è§£é‡Š" class="headerlink" title="5. çº¿æ€§å›å½’å¯¹æ•°æ®çš„è§£é‡Š"></a>5. çº¿æ€§å›å½’å¯¹æ•°æ®çš„è§£é‡Š</h2><ul><li>å›å½’åˆ†æçš„<span style="color:blue">ç›®çš„</span>æ˜¯ä»€ä¹ˆï¼Ÿ<ul><li>å»ä¼°è®¡æ€»ä½“çš„xä¸æ€»ä½“çš„yä¹‹é—´çš„å…³ç³»ï¼Œæ˜¯æ­£ç›¸å…³ï¼Ÿè´Ÿç›¸å…³ï¼Ÿè¿˜æ˜¯ä¸ç›¸å…³ï¼Ÿï¼ˆè¿™ä¸€å±‚é¢ï¼Œåœ¨äºä¸â€˜ä¸ç›¸å…³â€˜æ¯”è¾ƒï¼‰</li><li>ç›¸å…³æ€§ä¼šä¸ä¼šéšä¸åŒçš„æŠ½æ ·æƒ…æ™¯å˜åŒ–ï¼Ÿä¼šä¸ä¼šå‡ºç°ï¼šç¬¬ä¸€æ¬¡æŠ½æ ·çš„å›å½’ç»“æœæ˜¯æ­£ç›¸å…³ï¼Œç¬¬äºŒæ¬¡æŠ½æ ·çš„å›å½’ç»“æœæ˜¯è´Ÿç›¸å…³ï¼Ÿ</li><li>ç¡®å®šäº†ç›¸å…³æ€§ï¼Œé‚£ä¹ˆçº¿æ€§å›å½’æ¨¡å‹èƒ½ä¸èƒ½å¾ˆå¥½çš„è§£é‡ŠåŸæœ‰æ•°æ®çš„ç‰¹ç‚¹ï¼Ÿ</li></ul></li></ul><p><img src="https://i.loli.net/2019/02/11/5c60fe5374e57.png" width="700"></p><script type="math/tex; mode=display">\begin{align}R^2 = \frac{SSR}{SST}=1-\frac{SSE}{SST}\end{align}</script><ul><li><p>$R^2$å«ä¹‰ï¼šç¦»å·®å¹³æ–¹å’Œä¸­æœ‰å¤šå°‘èƒ½è¢«å›å½’å¹³æ–¹å’Œè§£é‡Š</p></li><li><p>æ³¨æ„äº‹é¡¹ï¼š</p><ul><li>$R^2=0$ä¸ä»£è¡¨è‡ªå˜é‡ä¸å› å˜é‡æ²¡æœ‰å…³ç³»<br><img src="https://i.loli.net/2019/02/11/5c60fe32c16dc.gif" width="300"></li><li>$R^2$å¤§ä¹Ÿä¸ä»£è¡¨è‡ªå˜é‡å’Œå› å˜é‡å°±ä¸€å®šæ˜¯çº¿æ€§å…³ç³»<br><img src="https://i.loli.net/2019/02/11/5c60fe32bfb96.gif" width="400"></li><li>$R^2$å¤§ä¹Ÿä¸ä»£è¡¨ç»“æœæ˜¾è‘—ï¼ˆä¸ç¡®å®šæ€§æ— å…³ï¼‰</li></ul></li></ul><h2 id="6-çº¿æ€§å›å½’å¯¹æ ·æœ¬åŠè¯¯å·®çš„è¦æ±‚å’Œå‡è®¾å‰æ"><a href="#6-çº¿æ€§å›å½’å¯¹æ ·æœ¬åŠè¯¯å·®çš„è¦æ±‚å’Œå‡è®¾å‰æ" class="headerlink" title="6. çº¿æ€§å›å½’å¯¹æ ·æœ¬åŠè¯¯å·®çš„è¦æ±‚å’Œå‡è®¾å‰æ"></a>6. çº¿æ€§å›å½’å¯¹æ ·æœ¬åŠè¯¯å·®çš„è¦æ±‚å’Œå‡è®¾å‰æ</h2><p><img src="https://i.loli.net/2019/02/11/5c60fe11e17be.png" width="700"></p><h3 id="è¦æ±‚ï¼š"><a href="#è¦æ±‚ï¼š" class="headerlink" title="è¦æ±‚ï¼š"></a>è¦æ±‚ï¼š</h3><ol><li>yçš„å‡å€¼æ˜¯xçš„çº¿æ€§ç»„åˆ</li><li>æ®‹å·®$e_i$ç‹¬ç«‹äºx</li><li>ç»™å®šx, æ®‹å·®$e_i$è¦æœä»æ­£æ€åˆ†å¸ƒ</li><li>å¯¹äºä¸åŒçš„xi, æ®‹å·®$e_i$çš„æ–¹å·®varianceåº”ç›¸åŒ</li></ol><ul><li><span style="color:blue">L</span>inear Function</li><li><span style="color:blue">I</span>ndependent</li><li><span style="color:blue">N</span>ormal Distribution</li><li><span style="color:blue">E</span>qual Variance</li></ul><h2 id="7-é¢„æµ‹çš„confidence-interval-å’Œ-prediction-interval"><a href="#7-é¢„æµ‹çš„confidence-interval-å’Œ-prediction-interval" class="headerlink" title="7. é¢„æµ‹çš„confidence interval å’Œ prediction interval"></a>7. é¢„æµ‹çš„confidence interval å’Œ prediction interval</h2><ul><li>é—®é¢˜1ï¼šå¹´çº§ä¸æŸæˆäººè€ƒè¯•åˆ†æ•°ï¼Œæ ¹æ®æŠ½æ ·æ ·æœ¬ï¼Œä¼°è®¡äºŒå¹´çº§å­¦ç”Ÿçš„å¹³å‡åˆ†æ•°<br><img src="https://i.loli.net/2019/02/11/5c60fde5ee17f.png" width="700"><br><img src="https://i.loli.net/2019/02/11/5c60fde5ec423.png" width="700"></li><li>ä¸åŒæ¬¡çš„æŠ½æ ·ï¼Œå›å½’ç»“æœæ˜¯ä¸ä¸€æ ·çš„</li></ul><ul><li>é¢„æµ‹äºŒå¹´çº§çš„å­¦ç”Ÿå¹³å‡åˆ†æ•° vs é¢„æµ‹æŸä¸ªå­¦ç”Ÿçš„è€ƒè¯•åˆ†æ•°<br><img src="https://i.loli.net/2019/02/11/5c60fdb096972.png" width="800"></li></ul><p>Confidential Interval</p><p><img src="https://i.loli.net/2019/02/11/5c60fda003b68.png" width="800"></p><p>Prediction Interval</p><p><img src="https://i.loli.net/2019/02/11/5c60fd8294fa4.png" width="800"></p>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;çº¿æ€§å›å½’&quot;&gt;&lt;a href=&quot;#çº¿æ€§å›å½’&quot; class=&quot;headerlink&quot; title=&quot;çº¿æ€§å›å½’&quot;&gt;&lt;/a&gt;&lt;em&gt;çº¿æ€§å›å½’&lt;/em&gt;&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;åœ¨è§£å†³è¿ç»­å˜é‡çš„é¢„æµ‹é—®é¢˜é‡Œï¼Œçº¿æ€§å›å½’æœ€ç®€å•&lt;/li&gt;
&lt;li&gt;å¯¹äºå¾ˆå¤šé—®é¢˜ï¼Œåœ¨ä¸€å®šèŒƒå›´å†…æ˜¯æœ‰æ•ˆçš„&lt;/li&gt;
&lt;li&gt;ç†è®ºå’Œåº”ç”¨ä¹Ÿæ˜¯æœ€å®Œå–„çš„&lt;/li&gt;
&lt;/ul&gt;
    
    </summary>
    
      <category term="Note" scheme="https://marara.xin/categories/Note/"/>
    
    
      <category term="Statistics" scheme="https://marara.xin/tags/Statistics/"/>
    
      <category term="Machine Learning" scheme="https://marara.xin/tags/Machine-Learning/"/>
    
  </entry>
  
  <entry>
    <title>ä»æ­£æ€åˆ†å¸ƒåˆ°ç½®ä¿¡åŒºé—´</title>
    <link href="https://marara.xin/2018/06/18/%E4%BB%8E%E6%AD%A3%E6%80%81%E5%88%86%E5%B8%83%E5%88%B0%E7%BD%AE%E4%BF%A1%E5%8C%BA%E9%97%B4/"/>
    <id>https://marara.xin/2018/06/18/ä»æ­£æ€åˆ†å¸ƒåˆ°ç½®ä¿¡åŒºé—´/</id>
    <published>2018-06-18T14:16:25.971Z</published>
    <updated>2019-02-11T05:17:12.306Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å…ˆä»äººå‡æ”¶å…¥è¯´èµ·"><a href="#å…ˆä»äººå‡æ”¶å…¥è¯´èµ·" class="headerlink" title="å…ˆä»äººå‡æ”¶å…¥è¯´èµ·"></a>å…ˆä»äººå‡æ”¶å…¥è¯´èµ·</h2><p>æˆ‘ä»¬é€šå¸¸ä¼šç»Ÿè®¡ä¸€ä¸ªåœ°åŒºçš„äººå‡æ”¶å…¥æ°´å¹³ï¼Œä»¥æ­¤æ¥ååº”è¿™ä¸ªåœ°åŒºçš„ç»æµå‘å±•æ°´å¹³ã€‚å‡è®¾ç°åœ¨ä»ä¸€ä¸ªåœ°åŒºï¼ŒéšæœºæŠ½å–1000äººï¼Œç»Ÿè®¡ä»–ä»¬çš„å¹´æ”¶å…¥ï¼Œæ±‚å’Œåé™¤ä»¥1000ï¼Œå¾—åˆ°ä¸€ä¸ªå¹³å‡å¹´æ”¶å…¥ï¼š</p><script type="math/tex; mode=display">\overline{X}=\frac{1}{1000}\sum_{i=1}^{1000}X_i \qquadï¼ˆX_iä¸ºç¬¬iä¸ªäººçš„å¹´æ”¶å…¥ï¼‰</script><p>ä½†æ˜¯è¿™é‡Œæœ‰ä¸€ä¸ªæ˜¾è€Œæ˜“è§çš„é—®é¢˜ï¼Œç”±äºæ¯æ¬¡éšæœºæŠ½å–çš„æ ·æœ¬ä¸å°½ç›¸åŒï¼Œå¯¼è‡´ç®—å‡ºçš„ç®—æœ¯å¹³å‡å€¼æ¯æ¬¡éƒ½å¯èƒ½ä¸åŒã€‚ä¾‹å¦‚ç¬¬ä¸€æ¬¡$\overline{X_1}=6200$ï¼Œç¬¬äºŒæ¬¡$\overline{X_2}=6000$ï¼Œç¬¬ä¸‰æ¬¡$\overline{X_3}=6100$â€¦â€¦ï¼Œè¿™æ ·å¾—åˆ°çš„æ•°æ®ï¼Œè®©äººä¸çŸ¥é“è¯¥ç›¸ä¿¡å“ªä¸ªã€‚</p><a id="more"></a><h2 id="ä»æŠ½æ ·åˆ°å®¢è§‚"><a href="#ä»æŠ½æ ·åˆ°å®¢è§‚" class="headerlink" title="ä»æŠ½æ ·åˆ°å®¢è§‚"></a>ä»æŠ½æ ·åˆ°å®¢è§‚</h2><p>é€šè¿‡ä»¥ä¸Šçš„ä¾‹å­ï¼Œæˆ‘ä»¬å¾—å‡ºäº†ä¸€ä¸ªç»“è®ºï¼šä»¥ç‚¹ä¼°ç‚¹æ˜¯é ä¸ä½çš„ï¼Œæ›´ä½•å†µåœ¨è¿ç»­å‹éšæœºå˜é‡ä¸­ï¼Œå–ä¸€ä¸ªç‚¹çš„æ¦‚ç‡æ˜¯æµ‹ä¸åˆ°çš„ã€‚ä½†æ˜¯ï¼Œè¿™å¹¶ä¸æ„å‘³ç€å¹³å‡æ”¶å…¥å€¼æ˜¯ä¸å­˜åœ¨çš„ã€‚å³ä¸€å®šæœ‰é‚£ä¹ˆä¸€ä¸ªå®¢è§‚å­˜åœ¨çš„å€¼ï¼Œä¸å› æŠ½æ ·çš„ä¸åŒè€Œæ”¹å˜ï¼Œæˆ‘ä»¬ä¸å¦¨è®°è¿™ä¸ªæ•°ä¸º $\mu$ ã€‚</p><p>æˆ‘ä»¬å›åˆ°ç»Ÿè®¡ä¸­ï¼Œå‡è®¾ç°åœ¨æœ‰ä¸€ç»„ç¯æ³¡ï¼Œæˆ‘ä»¬è¯¥å¦‚ä½•å»ä¼°è®¡å¹³å‡å¯¿å‘½å‘¢ï¼Ÿæˆ‘ä»¬åŒæ ·å»æŠ½å–ä¸€ç»„æ ·æœ¬ï¼Œæµ‹é‡å®ƒä»¬çš„å¹³å‡å¯¿å‘½ $\overline{X}$ ï¼Œè™½ç„¶è¿™ä¸ª $\overline{X}$ ä¸ä¼šæ­£å¥½å°±æ˜¯ $\mu$ ï¼Œä½†æ˜¯æˆ‘ä»¬ä»å¸¸ç†å¯çŸ¥ï¼Œè¿™ä¸ªå€¼åº”è¯¥ä¸çœŸå®å­˜åœ¨çš„ $\mu$ ç›¸å»ä¸è¿œã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨å¦‚æœä¸€ç»„ç¯æ³¡çš„çœŸå®å¹³å‡å¯¿å‘½æ˜¯1800å°æ—¶ï¼Œæˆ‘ä»¬æµ‹å¾—çš„å¹³å‡å€¼åº”è¯¥åœ¨1800å·¦å³ï¼Œè€Œä¸ä¼šå‡ºç°ä¾‹å¦‚20ï¼Œ100è¿™æ ·æ˜æ˜¾åç¦»çš„å€¼ã€‚é‚£ä¹ˆè®¡ç®—æˆ‘ä»¬æµ‹å¾—çš„ $\overline{X}$ ä¸ $\mu$ çš„è·ç¦»ï¼š</p><script type="math/tex; mode=display">|\overline{X}-\mu|</script><p>ç„¶åè®¡ç®—è¿™ä¸ªè·ç¦»å°äºæŸä¸ªå€¼å¾—æ¦‚ç‡ï¼š</p><script type="math/tex; mode=display">P(|\overline{X}-\mu|<\Delta)=1-\alpha</script><p>è¿™é‡Œï¼Œæˆ‘ä»¬ä¾¿ç§° $1-\alpha$ ä¸º<strong>ç½®ä¿¡åº¦</strong>ã€‚é€šä¿—çš„è§£é‡Šå°±æ˜¯å¯ä»¥ç›¸ä¿¡ä½ ç»™å‡ºçš„è¿™ä¸ªæ•°æ®çš„ç¨‹åº¦ã€‚å‡è®¾å– $\alpha=0.01$ ï¼Œé‚£ä¹ˆå°±è¡¨ç¤ºä¸ºï¼šæœ‰90%çš„æŠŠæ¡ç›¸ä¿¡è¿™ä¸ªæ¦‚ç‡ä¼šå‘ç”Ÿã€‚åœ¨ä¸åŒçš„è¡Œä¸šï¼Œå¯¹ç½®ä¿¡åº¦çš„ç²¾åº¦è¦æ±‚ä¸åŒã€‚ä¾‹å¦‚èˆªç©ºå™¨æä¸­ï¼Œå¯¹æ¯ä¸ªé›¶ä»¶çš„ç²¾åº¦è¦æ±‚éƒ½å¾ˆé«˜ï¼Œè€Œç›¸å¯¹äºæ™®é€šåˆ¶è¡£å·¥å‚ï¼Œå¯¹äºå¸ƒæ–™å°ºå¯¸çš„æŠŠæ§å°±æ²¡æœ‰é‚£ä¹ˆä¸¥æ ¼ã€‚</p><h2 id="æ­£æ€åˆ†å¸ƒå’Œæ ‡å‡†åŒ–"><a href="#æ­£æ€åˆ†å¸ƒå’Œæ ‡å‡†åŒ–" class="headerlink" title="æ­£æ€åˆ†å¸ƒå’Œæ ‡å‡†åŒ–"></a>æ­£æ€åˆ†å¸ƒå’Œæ ‡å‡†åŒ–</h2><p>æ™®å¤©ä¹‹ä¸‹ï¼Œæ‰€æœ‰çš„åˆ†å¸ƒï¼Œæœ€ç»ˆéƒ½ä¼šå½’äºæ­£æ€åˆ†å¸ƒï¼š</p><p>å¦‚æœ $X$ çš„æ¦‚ç‡å¯†åº¦ä¸ºï¼š</p><script type="math/tex; mode=display">f(x)=\frac{1}{\sqrt{2\pi}\sigma}e^{-\frac{(x-\mu)^2}{2\sigma^2}} \qquad (-\infty<x<+\infty)</script><p>å…¶ä¸­ $-\infty&lt;\mu&lt;+\infty$ ï¼Œ$\sigma&gt;0$ ï¼Œåˆ™ç§° $X$ æœä»å‚æ•°ä¸º $(\mu,\sigma^2)$ çš„<strong>æ­£æ€åˆ†å¸ƒ</strong>ï¼Œæˆ–ç§° $X$ ä¸º<strong>æ­£æ€å˜é‡</strong>ï¼Œè®° $X\sim N (\mu,\sigma^2)$ ã€‚</p><p>ç”±äº $(\mu,\sigma^2)$ çš„ä¸åŒï¼Œæ‰€ç”»å‡ºçš„å‡½æ•°å›¾åƒä¹Ÿå°±ä¸åŒï¼Œäºæ˜¯æˆ‘ä»¬å¸Œæœ›æ„é€ å‡ºä¸€ä¸ªæ ‡å‡†åŒ–çš„å½¢å¼ï¼Œæ¥ç ”ç©¶ä»–çš„å±æ€§ã€‚é‚£ä¹ˆç”¨ $X$ å‡å»è‡ªå·±çš„æœŸæœ›å¹¶é™¤ä»¥æ ‡å‡†å·®åï¼Œæˆ‘ä»¬èƒ½å¾—åˆ° $X$ çš„æ ‡å‡†åŒ–å½¢å¼ï¼Œå³ï¼š</p><script type="math/tex; mode=display">\frac{X-EX}{\sqrt{DX}}</script><p>å¯¹äºæ­£æ€åˆ†å¸ƒæ¥è¯´å³ä¸ºï¼š</p><script type="math/tex; mode=display">\frac{X-\mu}{\sigma} \sim N(0,1)</script><p><img src="https://lh3.googleusercontent.com/-oie8_LXV_5w/WyfmW2fLN8I/AAAAAAAABTE/Iqh_m3FLJmo6FhlXaCkzPUU41C9daTtzgCHMYCw/I/geogebra-export.png" alt="geogebra-export"><br>ç°åœ¨å‡è®¾æœ‰ä¸€ç»„æ•°æ®ï¼š</p><script type="math/tex; mode=display">(x_1,x_2...x_n) \overset{iid}{\sim}N(\mu,\sigma^2)</script><p>å®ƒçš„</p><script type="math/tex; mode=display">E\overline{X}=E\frac{(x_1+x_2+...+x_n)}{n}=\frac{1}{n}\cdot n\mu=\mu</script><script type="math/tex; mode=display">D\overline{X}=D\frac{(x_1+x_2+...+x_n)}{n}=\frac{1}{n^2}\cdot n\sigma^2=\frac{\sigma^2}{n}</script><p>å¹³å‡å€¼æ³¢åŠ¨ä¸ºåŸæ ·æœ¬çš„ $\frac{1}{n}$ ï¼Œæ³¢åŠ¨ç¨‹åº¦ç¼©å°ï¼Œåˆ™ $\overline{X} \sim N(\mu, \frac{\sigma^2}{n})$ ã€‚</p><p>æˆ‘ä»¬å›åˆ°æœ€å¼€å§‹çš„æ¦‚ç‡ï¼š</p><script type="math/tex; mode=display">P(|\overline{X}-\mu|<\Delta)=1-\alpha</script><p>é€šè¿‡ä¸Šé¢çš„æ¨å¯¼ï¼Œæˆ‘ä»¬æ¬²å¯¹å…¶æ ‡å‡†åŒ–ï¼Œå› ä¸º $\frac{\sigma^2}{n}&gt;0$ ï¼Œæ‰€ä»¥åªéœ€ä¸¤ç«¯åŒæ—¶é™¤ä»¥ $\frac{\sigma^2}{n}$ å³å¯</p><script type="math/tex; mode=display">P(|\frac{\overline{X}-\mu}{\frac{\sigma^2}{n}}|< \frac{\Delta}{\frac{\sigma^2}{n}})=1-\alpha</script><p>é‚£ä¹ˆå®ƒå°±æ˜¯ä¸€ä¸ªæœä»æ ‡å‡†æ­£æ€åˆ†å¸ƒçš„éšæœºå˜é‡çš„æ¦‚ç‡åˆ†å¸ƒã€‚</p><h2 id="åŒºé—´ä¼°è®¡"><a href="#åŒºé—´ä¼°è®¡" class="headerlink" title="åŒºé—´ä¼°è®¡"></a>åŒºé—´ä¼°è®¡</h2><p>ä¸ºæ–¹ä¾¿ç†è§£ï¼Œæˆ‘æŠŠä¸Šå¼ä¸­ $\frac{\overline{X}-\mu}{\frac{\sigma^2}{n}} $ è®°ä¸º $U$ ï¼ŒæŠŠ $\frac{\Delta}{\frac{\sigma^2}{n}}$ è®°ä¸º $Q \quad (Qä¸ºå¸¸æ•°)$ </p><script type="math/tex; mode=display">P(\vert U \vert < Q)=1-\alpha</script><script type="math/tex; mode=display">P(-Q<U<Q)=1-\alpha</script><p>æ ¹æ®ä¸Š $\alpha$ åˆ†ä½æ•°ï¼Œ$\alpha$ çš„ä¸‹æ ‡ä»£è¡¨å›¾åƒå³ä¾§çš„é¢ç§¯<br><img src="https://lh3.googleusercontent.com/-BqUKrbsLS9s/WyfmQOvYCYI/AAAAAAAABS8/Q-00W59fTEo_JbbultPoksKdKklHG4gfQCHMYCw/I/geogebra-export%2B%25281%2529.png" alt="geogebra-export -1-"></p><script type="math/tex; mode=display">P(\vert U \vert < U_\frac{\alpha}{2})=1-\alpha</script><p>åˆ™</p><script type="math/tex; mode=display">\frac{\Delta}{\frac{\sigma}{\sqrt{n}}}=U_\frac{\alpha}{2}</script><script type="math/tex; mode=display">\Delta=U_\frac{\alpha}{2} \cdot \frac{\sigma}{\sqrt{n}}</script><p>ä»£å›åŸå¼</p><script type="math/tex; mode=display">P(|\overline{X}-\mu|<U_\frac{\alpha}{2} \cdot \frac{\sigma}{\sqrt{n}})=1-\alpha</script><p>è¿™é‡Œçš„æ„æ€å°±ä¸º</p><script type="math/tex; mode=display">P(\vert ä¸€æ¬¡æŠ½æ ·çš„å‡å€¼ - å®¢è§‚å­˜åœ¨çš„å‡å€¼ \vert < å¸¸æ•°)=1-\alpha</script><p><img src="https://lh3.googleusercontent.com/-gga_EEQ1wrQ/WyfuSFWq3CI/AAAAAAAABTU/q9ljbHeSAx8xtBhI6WoUEDJG3usYFQs6ACHMYCw/I/geogebra-export%2B%25283%2529.png" alt="geogebra-export -3-"></p><p>ä¹Ÿå°±æ˜¯è½å…¥ $(\overline{X}-Î´,\overline{X}+Î´)$ ä¹‹é—´çš„æ¦‚ç‡ï¼Œå³å«åš<strong>åŒºé—´ä¼°è®¡</strong>ã€‚</p>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;å…ˆä»äººå‡æ”¶å…¥è¯´èµ·&quot;&gt;&lt;a href=&quot;#å…ˆä»äººå‡æ”¶å…¥è¯´èµ·&quot; class=&quot;headerlink&quot; title=&quot;å…ˆä»äººå‡æ”¶å…¥è¯´èµ·&quot;&gt;&lt;/a&gt;å…ˆä»äººå‡æ”¶å…¥è¯´èµ·&lt;/h2&gt;&lt;p&gt;æˆ‘ä»¬é€šå¸¸ä¼šç»Ÿè®¡ä¸€ä¸ªåœ°åŒºçš„äººå‡æ”¶å…¥æ°´å¹³ï¼Œä»¥æ­¤æ¥ååº”è¿™ä¸ªåœ°åŒºçš„ç»æµå‘å±•æ°´å¹³ã€‚å‡è®¾ç°åœ¨ä»ä¸€ä¸ªåœ°åŒºï¼ŒéšæœºæŠ½å–1000äººï¼Œç»Ÿè®¡ä»–ä»¬çš„å¹´æ”¶å…¥ï¼Œæ±‚å’Œåé™¤ä»¥1000ï¼Œå¾—åˆ°ä¸€ä¸ªå¹³å‡å¹´æ”¶å…¥ï¼š&lt;/p&gt;
&lt;script type=&quot;math/tex; mode=display&quot;&gt;
\overline{X}=\frac{1}{1000}\sum_{i=1}^{1000}X_i \qquadï¼ˆX_iä¸ºç¬¬iä¸ªäººçš„å¹´æ”¶å…¥ï¼‰&lt;/script&gt;&lt;p&gt;ä½†æ˜¯è¿™é‡Œæœ‰ä¸€ä¸ªæ˜¾è€Œæ˜“è§çš„é—®é¢˜ï¼Œç”±äºæ¯æ¬¡éšæœºæŠ½å–çš„æ ·æœ¬ä¸å°½ç›¸åŒï¼Œå¯¼è‡´ç®—å‡ºçš„ç®—æœ¯å¹³å‡å€¼æ¯æ¬¡éƒ½å¯èƒ½ä¸åŒã€‚ä¾‹å¦‚ç¬¬ä¸€æ¬¡$\overline{X_1}=6200$ï¼Œç¬¬äºŒæ¬¡$\overline{X_2}=6000$ï¼Œç¬¬ä¸‰æ¬¡$\overline{X_3}=6100$â€¦â€¦ï¼Œè¿™æ ·å¾—åˆ°çš„æ•°æ®ï¼Œè®©äººä¸çŸ¥é“è¯¥ç›¸ä¿¡å“ªä¸ªã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="Note" scheme="https://marara.xin/categories/Note/"/>
    
    
      <category term="Statistics" scheme="https://marara.xin/tags/Statistics/"/>
    
  </entry>
  
  <entry>
    <title>Mac å±€åŸŸç½‘å…±äº« ShadowSocks</title>
    <link href="https://marara.xin/2018/02/05/Mac%E5%B1%80%E5%9F%9F%E7%BD%91%E5%85%B1%E4%BA%ABss/"/>
    <id>https://marara.xin/2018/02/05/Macå±€åŸŸç½‘å…±äº«ss/</id>
    <published>2018-02-05T08:35:20.309Z</published>
    <updated>2018-02-05T10:03:31.863Z</updated>
    
    <content type="html"><![CDATA[<p>æ–°ä¹°äº† NSï¼Œå´å‘ç°ä¸‹è½½é€Ÿåº¦æ…¢ï¼Œåˆ‡è‡ªèº«æ— æ³•è¿æ¥ ssï¼Œäºæ˜¯æ‰¾åˆ°äº†å°† macOS çš„å…¨å±€ç½‘ç»œåœ¨å±€åŸŸç½‘ä¸‹åˆ†äº«ç»™å…¶ä»–è®¾å¤‡çš„æ–¹æ³•ã€‚</p><a id="more"></a><h2 id="å®‰è£…-ShadowSocks"><a href="#å®‰è£…-ShadowSocks" class="headerlink" title="å®‰è£… ShadowSocks"></a>å®‰è£… ShadowSocks</h2><p>å®‰è£…<strong>ShadowSocks</strong>ç•¥è¿‡ï¼Œæ— è®ºæ˜¯GUIç‰ˆè¿˜æ˜¯å‘½ä»¤è¡Œç‰ˆéƒ½å¯ä»¥ï¼Œå¯ä»¥å‚è€ƒ<a href="http://salogs.com/news/2016/11/02/mac-shadowsocks/" target="_blank" rel="noopener">è¿™é‡Œ</a>ã€‚</p><h2 id="é…ç½®-ShadowSocks"><a href="#é…ç½®-ShadowSocks" class="headerlink" title="é…ç½® ShadowSocks"></a>é…ç½® ShadowSocks</h2><p>åœ°å€ç«¯å£è‡ªè¡Œé…ç½®ï¼Œè¿™é‡Œè¦è®°ä½çš„ä¸¤ä¸ªåœ°æ–¹ï¼š</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">"local_address":"0.0.0.0",</span><br><span class="line">"local_port":1080,</span><br></pre></td></tr></table></figure><ul><li><code>local_address</code> è¿™é‡Œå¡«å†™ <code>0.0.0.0</code> è¡¨ç¤ºå±€åŸŸç½‘ç‚¹çš„æ‰€æœ‰æœºå­éƒ½å¯ä»¥é€šè¿‡ <code>1080</code> è¿™ä¸ªç«¯å£ä»£ç†ï¼Œä¹Ÿå¯ä»¥å°±ç”¨ä¸»æœºåœ°å€ <code>127.0.0.1</code></li><li><code>local_port</code> ç«¯å£å·ä¸è¦é‡å¤ï¼Œå¦‚æœæœ‰ <code>HTTPS</code> ä»£ç†æ—¶å°¤ä¸ºæ³¨æ„ï¼ŒåŒæ—¶è¿™ä¸ªéœ€è¦è®°ä½ï¼Œä¹‹åç”¨åˆ°</li></ul><h2 id="Privoxy"><a href="#Privoxy" class="headerlink" title="Privoxy"></a>Privoxy</h2><p>Windows ç³»ç»Ÿå¯ä»¥é€šè¿‡å‡ ä¸ªå‘½ä»¤ï¼Œç”šè‡³æ˜¯å®¢æˆ·ç«¯çš„é€‰é¡¹å°±å¯ä»¥å®Œæˆä»£ç†<br><img src="https://lh3.googleusercontent.com/-wAiXakN3028/WngrqgUkMOI/AAAAAAAAAc4/cEjbWN4WqAswvggvNXrU55HYK047Q6JbQCHMYCw/I/a75c3e80gw1f4urdcywyqj206506imxj.jpg" alt="a75c3e80gw1f4urdcywyqj206506imxj"></p><p>å¯æƒœçš„æ˜¯ï¼ŒmacOS æ²¡æœ‰æä¾›è¿™æ ·çš„åŠŸèƒ½ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦å€ŸåŠ©åƒ <a href="http://www.privoxy.org/" target="_blank" rel="noopener">Privoxy</a> è¿™æ ·çš„å·¥å…·æ¥å®ç°Sock5å…±äº«ã€‚</p><h3 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h3><p>è¿™é‡Œåˆ†äº«çš„æ˜¯ä½¿ç”¨ <strong>Homebrew</strong> å®‰è£…</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew install privoxy</span><br></pre></td></tr></table></figure><p><strong>homebrew </strong>ä¼šæŠ¥é”™ <code>/usr/local/sbin is not writable</code>ï¼Œè¿™æ˜¯å› ä¸º <code>/usr/local/</code> è¿™ä¸ªç›®å½•ä¸å±äºå½“å‰ç”¨æˆ·ï¼Œæ‰€ä»¥ <strong>homebrew</strong> æ— æ³•è®¿é—®ã€‚è§£å†³æ–¹æ³•ä¸ºï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo mkdir /usr/<span class="built_in">local</span>/sbin</span><br><span class="line">sudo chown -R `whoami`:admin /usr/<span class="built_in">local</span>/sbin</span><br></pre></td></tr></table></figure><p>ä¹‹åè¿è¡Œï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew link privoxy</span><br></pre></td></tr></table></figure><h3 id="é…ç½®"><a href="#é…ç½®" class="headerlink" title="é…ç½®"></a>é…ç½®</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /usr/<span class="built_in">local</span>/etc/privoxy/config</span><br></pre></td></tr></table></figure><ol><li><p>åœ¨ vim ä¸­æœç´¢ <code>forward-socks5t  /</code> ï¼Œå»æ‰æ³¨é‡Šï¼Œå°†ç«¯å£æ”¹ä¸º <code>local_port</code> å·</p><blockquote><p><code>forward-socks5t / 127.0.0.1:1080</code></p></blockquote></li><li><p>æœç´¢ <code>listen-address 127.0.0.1:8118</code> ï¼Œå»æ‰æ³¨é‡Šï¼ŒæŠŠ <code>127.0.0.1</code> æ”¹ä¸º <code>0.0.0.0</code>ï¼Œç«¯å£å·é»˜è®¤æˆ–é€‰æ‹©ä¸€ä¸ªæœªå ç”¨çš„ç«¯å£ </p><blockquote><p><code>listen-address 0.0.0.0:6666</code> </p></blockquote></li><li><p>ä¿®æ”¹è¿™ä¸¤å¤„åï¼Œä¿å­˜å¹¶é€€å‡ºå³å¯</p></li></ol><h3 id="è¿è¡Œ"><a href="#è¿è¡Œ" class="headerlink" title="è¿è¡Œ"></a>è¿è¡Œ</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo /usr/<span class="built_in">local</span>/sbin/privoxy /usr/<span class="built_in">local</span>/etc/privoxy/config &amp;</span><br></pre></td></tr></table></figure><blockquote><p>æœ€åçš„ <code>&amp;</code> æ˜¯ä¸ºäº†è®© privoxy åœ¨åå°è¿è¡Œ</p><p>å‚è§ï¼š</p><p><a href="http://ju.outofmemory.cn/entry/251730" target="_blank" rel="noopener">http://ju.outofmemory.cn/entry/251730</a></p><p><a href="http://my.oschina.net/u/994235/blog/296702" target="_blank" rel="noopener">http://my.oschina.net/u/994235/blog/296702</a></p></blockquote><h3 id="è·å–æœ¬æœº-IP"><a href="#è·å–æœ¬æœº-IP" class="headerlink" title="è·å–æœ¬æœº IP"></a>è·å–æœ¬æœº <code>IP</code></h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ifconfig | grep <span class="string">'inet'</span></span><br></pre></td></tr></table></figure><p>å…¶ä¸­ <code>inet</code> åå³ä¸ºæœ¬æœº <code>IP</code></p><h3 id="å°†-Privoxy-æ·»åŠ åˆ°å¼€æœºå¯åŠ¨ä¸­"><a href="#å°†-Privoxy-æ·»åŠ åˆ°å¼€æœºå¯åŠ¨ä¸­" class="headerlink" title="å°† Privoxy æ·»åŠ åˆ°å¼€æœºå¯åŠ¨ä¸­"></a>å°† Privoxy æ·»åŠ åˆ°å¼€æœºå¯åŠ¨ä¸­</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ·»åŠ å¼€æœºå¯åŠ¨:</span></span><br><span class="line">ln -sfv /usr/<span class="built_in">local</span>/opt/privoxy/*.plist ~/Library/LaunchAgents  </span><br><span class="line"><span class="comment"># å¯åŠ¨ Privoxy:</span></span><br><span class="line">launchctl load ~/Library/LaunchAgents/homebrew.mxcl.privoxy.plist  </span><br><span class="line"><span class="comment"># å¦‚æœä¸éœ€è¦ç”¨ launchctl å°±ç›´æ¥è¿è¡Œ:</span></span><br><span class="line">privoxy /usr/<span class="built_in">local</span>/etc/privoxy/config</span><br></pre></td></tr></table></figure><h3 id="æŸ¥çœ‹çŠ¶æ€"><a href="#æŸ¥çœ‹çŠ¶æ€" class="headerlink" title="æŸ¥çœ‹çŠ¶æ€"></a>æŸ¥çœ‹çŠ¶æ€</h3><h4 id="æŸ¥çœ‹è¿›ç¨‹"><a href="#æŸ¥çœ‹è¿›ç¨‹" class="headerlink" title="æŸ¥çœ‹è¿›ç¨‹"></a>æŸ¥çœ‹è¿›ç¨‹</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ps aux | grep privoxy</span><br><span class="line"><span class="comment"># å¦‚æœè¿”å›å¦‚ä¸‹åˆ™è¯´æ˜å¯åŠ¨æˆåŠŸ</span></span><br><span class="line">root             34090   0.0  0.0  4278700   1196   ??  Ss    5:39PM   0:00.01 /usr/<span class="built_in">local</span>/sbin/privoxy /usr/<span class="built_in">local</span>/etc/privoxy/config</span><br></pre></td></tr></table></figure><h4 id="æŸ¥çœ‹ç«¯å£ç›‘å¬"><a href="#æŸ¥çœ‹ç«¯å£ç›‘å¬" class="headerlink" title="æŸ¥çœ‹ç«¯å£ç›‘å¬"></a>æŸ¥çœ‹ç«¯å£ç›‘å¬</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">netstat -an | grep 6666</span><br><span class="line"><span class="comment"># å¦‚æœè¿”å›å¦‚ä¸‹åˆ™è¯´æ˜å¯åŠ¨æˆåŠŸ</span></span><br><span class="line">tcp4       0      0  *.6666                 *.*                    LISTEN</span><br></pre></td></tr></table></figure><h3 id="ç»“æŸè¿›ç¨‹"><a href="#ç»“æŸè¿›ç¨‹" class="headerlink" title="ç»“æŸè¿›ç¨‹"></a>ç»“æŸè¿›ç¨‹</h3><p>å…ˆæŸ¥çœ‹è¿›ç¨‹IDï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ps aux | grep privoxy</span><br><span class="line"><span class="comment"># è¿”å› id ä¸º 34090</span></span><br><span class="line">root             34090   0.0  0.0  4278700   1196   ??  Ss    5:39PM   0:00.01 /usr/<span class="built_in">local</span>/sbin/privoxy /usr/<span class="built_in">local</span>/etc/privoxy/config</span><br></pre></td></tr></table></figure><p>ç„¶åï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo <span class="built_in">kill</span> 34090</span><br></pre></td></tr></table></figure><p>å½“ç„¶ï¼Œä¹Ÿå¯ä»¥ç›´æ¥æ ¹æ®<code>privoxy</code>è¿›ç¨‹åæ¥å…³é—­Privoxyï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo killall privoxy</span><br></pre></td></tr></table></figure><h3 id="ä½¿ç”¨å¿«æ·çŸ­è¯­"><a href="#ä½¿ç”¨å¿«æ·çŸ­è¯­" class="headerlink" title="ä½¿ç”¨å¿«æ·çŸ­è¯­"></a>ä½¿ç”¨å¿«æ·çŸ­è¯­</h3><p>é€šè¿‡ç»™ä»¥ä¸Šå‘½ä»¤åˆ«åï¼ˆaliasï¼‰æ¥å¿«é€Ÿæ“ä½œå’ŒæŸ¥çœ‹</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim ./.bashrc</span><br></pre></td></tr></table></figure><p>å¦‚æœä½¿ç”¨çš„æ˜¯ <strong>zsh</strong>ï¼Œåˆ™</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim ./.zshrc</span><br></pre></td></tr></table></figure><p>åœ¨åº•éƒ¨æ’å…¥å¦‚ä¸‹å‘½ä»¤</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># privoxy</span></span><br><span class="line"><span class="built_in">alias</span> privoxy=<span class="string">"sudo /usr/local/sbin/privoxy /usr/local/etc/privoxy/config;"</span></span><br><span class="line"><span class="built_in">alias</span> privoxy_status=<span class="string">"ps aux | grep privoxy;"</span></span><br><span class="line"><span class="built_in">alias</span> privoxy_port=<span class="string">"netstat -an | grep 6666;"</span></span><br><span class="line"><span class="built_in">alias</span> privoxy_quit=<span class="string">"sudo killall privoxy;"</span></span><br></pre></td></tr></table></figure><blockquote><p>è¿™é‡Œä¸º <code>alias åˆ«å=&quot;å‘½ä»¤;&quot;</code> ï¼Œåˆ«åå¯ä»¥å¡«è‡ªå·±å–œæ¬¢çš„ï¼Œå‘½ä»¤éœ€è¦å’Œä¹‹å‰çš„ä¸€è‡´</p></blockquote><p>ä¹‹åé‡å¯ <strong>Terminal</strong> å°±å¯ä»¥é€šè¿‡åˆ«åæ¥å¿«é€Ÿæ“ä½œäº†</p><h2 id="åœ¨å…¶ä»–è®¾å¤‡ä½¿ç”¨"><a href="#åœ¨å…¶ä»–è®¾å¤‡ä½¿ç”¨" class="headerlink" title="åœ¨å…¶ä»–è®¾å¤‡ä½¿ç”¨"></a>åœ¨å…¶ä»–è®¾å¤‡ä½¿ç”¨</h2><p>æ”¯æŒæ‰‹åŠ¨é…ç½®ä»£ç†çš„è®¾å¤‡ï¼Œåœ¨åŒä¸€ä¸ªWiFiä¸‹ï¼Œå³å¯æ‰‹åŠ¨é…ç½®ï¼Œä»¥NSä¸ºä¾‹ï¼š</p><p><img src="https://lh3.googleusercontent.com/-EY2wdqh7lOQ/Wngr3VXdGHI/AAAAAAAAAc8/rUKmtLmMraAVK6rVgQxJyJwWiott_2QigCHMYCw/I/DVQw1YoVQAEq-Ez.jpg" alt="DVQw1YoVQAEq-Ez"></p><p><strong>Proxy Setting</strong> ä¸‹ï¼Œ<code>Server</code> ä¸ºä¸»æœº <code>IP</code>ï¼Œ<code>Port</code> ä¸º <code>listen-address</code> çš„ç«¯å£å·ã€‚åŒç†iPhoneï¼ŒPS4ç­‰è®¾å¤‡ä¹Ÿå°±å¯ä»¥é€šè¿‡è¿™äº›é…ç½®æ¥å®ç°ç§‘å­¦ä¸Šç½‘äº†ã€‚</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æ–°ä¹°äº† NSï¼Œå´å‘ç°ä¸‹è½½é€Ÿåº¦æ…¢ï¼Œåˆ‡è‡ªèº«æ— æ³•è¿æ¥ ssï¼Œäºæ˜¯æ‰¾åˆ°äº†å°† macOS çš„å…¨å±€ç½‘ç»œåœ¨å±€åŸŸç½‘ä¸‹åˆ†äº«ç»™å…¶ä»–è®¾å¤‡çš„æ–¹æ³•ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="Tutorial" scheme="https://marara.xin/categories/Tutorial/"/>
    
    
      <category term="ShadowSocks" scheme="https://marara.xin/tags/ShadowSocks/"/>
    
  </entry>
  
  <entry>
    <title>ä½¿ç”¨Google Driveä½œä¸ºBlogçš„å›¾åºŠ</title>
    <link href="https://marara.xin/2017/12/10/%E4%BD%BF%E7%94%A8Google%20Drive%E4%BD%9C%E4%B8%BABlog%E7%9A%84%E5%9B%BE%E5%BA%8A/"/>
    <id>https://marara.xin/2017/12/10/ä½¿ç”¨Google Driveä½œä¸ºBlogçš„å›¾åºŠ/</id>
    <published>2017-12-10T13:36:30.436Z</published>
    <updated>2018-02-05T10:10:43.053Z</updated>
    
    <content type="html"><![CDATA[<p>æœ‰æ—¶å€™ä¼šç¢°åˆ°éœ€è¦åœ¨blogæˆ–è€…GitHubå†™ä¸€äº›ä¸œè¥¿çš„æ—¶å€™éœ€è¦ç”¨åˆ°å›¾ç‰‡ï¼Œå¾®åšå›¾åºŠæ€»æ˜¯å¤±æ•ˆï¼Œäºæ˜¯æƒ³åˆ°å¯ä»¥ä½¿ç”¨Google Driveä½œä¸ºå›¾åºŠä½¿ç”¨ã€‚</p><a id="more"></a><p>ç™»é™†Google Driveä¸Šä¼ å›¾ç‰‡ä¹‹åç‚¹å‡»è·å–é“¾æ¥ï¼Œæˆ‘ä»¬ä¼šå¾—åˆ°ä¸€ä¸ªå¦‚ä¸‹çš„URLåœ°å€</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://drive.google.com/open?id=YOUR_FILE_ID&amp;authuser=0</span><br></pre></td></tr></table></figure><p>ä½†æ˜¯è¿™ä¸ªåœ°å€æ˜¯æ— æ³•ç›´æ¥ä½œä¸ºimageçš„srcå€¼çš„ï¼Œæˆ‘ä»¬éœ€è¦ç¨å¾®åšä¸€ç‚¹ä¿®æ”¹(ä½ å¿…é¡»è®¾ç½®ä¸€ä¸‹googleçš„å…±äº«å±æ€§<strong>çŸ¥é“æ­¤é“¾æ¥çš„ä»»ä½•äººéƒ½å¯ä»¥æŸ¥çœ‹</strong>)</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://drive.google.com/uc?export=view&amp;id=YOUR_FILE_ID</span><br></pre></td></tr></table></figure><p>å¦‚æœéœ€è¦è®©è¿™ä¸ªæ–‡ä»¶ç›´æ¥æ”¯æŒä¸‹è½½çš„è¯ï¼Œè¯·ä½¿ç”¨å¦‚ä¸‹åœ°å€</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://drive.google.com/uc?export=download&amp;id=YOUR_FILE_ID</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æœ‰æ—¶å€™ä¼šç¢°åˆ°éœ€è¦åœ¨blogæˆ–è€…GitHubå†™ä¸€äº›ä¸œè¥¿çš„æ—¶å€™éœ€è¦ç”¨åˆ°å›¾ç‰‡ï¼Œå¾®åšå›¾åºŠæ€»æ˜¯å¤±æ•ˆï¼Œäºæ˜¯æƒ³åˆ°å¯ä»¥ä½¿ç”¨Google Driveä½œä¸ºå›¾åºŠä½¿ç”¨ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="Note" scheme="https://marara.xin/categories/Note/"/>
    
    
      <category term="MarkDown" scheme="https://marara.xin/tags/MarkDown/"/>
    
  </entry>
  
  <entry>
    <title>Swift UILabel å±æ€§</title>
    <link href="https://marara.xin/2017/12/10/Swift-UILabel-%E5%B1%9E%E6%80%A7/"/>
    <id>https://marara.xin/2017/12/10/Swift-UILabel-å±æ€§/</id>
    <published>2017-12-09T16:04:19.261Z</published>
    <updated>2018-02-05T10:11:09.591Z</updated>
    
    <content type="html"><![CDATA[<p>Swift ä¸­çš„ UILabel å±æ€§</p><a id="more"></a><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> UIKit</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ViewController</span>: <span class="title">UIViewController</span> </span>&#123;</span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">viewDidLoad</span><span class="params">()</span></span> &#123;</span><br><span class="line">       <span class="keyword">super</span>.viewDidLoad()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">//è®¾ç½®æ ‡ç­¾xåæ ‡ï¼š10ï¼Œyåæ ‡ï¼š20ï¼Œé•¿ï¼š300ï¼Œå®½ï¼š100</span></span><br><span class="line">        <span class="keyword">let</span> label = <span class="type">UILabel</span>(frame:<span class="type">CGRectMake</span>(<span class="number">10</span>,<span class="number">20</span>, <span class="number">300</span>, <span class="number">100</span>))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">//    æ˜¾ç¤ºæ–‡æœ¬ã€éœ€è¦æ˜¾ç¤ºä»€ä¹ˆå°±è®¾ç½®è¿™ä¸ª text çš„å±æ€§å³å¯ã€‘</span></span><br><span class="line">      label.text=<span class="string">" Welcome to study Swift ï¼"</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">// labelçš„å­—ä½“é¢œè‰²</span></span><br><span class="line">        label.textColor=<span class="type">UIColor</span>.redColor() <span class="comment">//çº¢è‰²æ–‡å­—</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">// labelçš„èƒŒæ™¯é¢œè‰²</span></span><br><span class="line">        label.backgroundColor=<span class="type">UIColor</span>.blackColor() <span class="comment">//é»‘è‰²èƒŒæ™¯</span></span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">        <span class="comment">// labelçš„æ–‡å­—å¯¹é½æ–¹å¼</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">          case Leftï¼ˆå·¦å¯¹é½ï¼‰</span></span><br><span class="line"><span class="comment">          case Centerï¼ˆå±…ä¸­ï¼‰</span></span><br><span class="line"><span class="comment">          case Rightï¼ˆå³å¯¹é½ï¼‰</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">         </span><br><span class="line">        label.textAlignment=<span class="type">NSTextAlignment</span>.<span class="type">Right</span> <span class="comment">//æ–‡å­—å³å¯¹é½</span></span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">//    labelé˜´å½±é¢œè‰²ã€è¦è®¾ç½®åç§»ä½ç½®ã€‘(å­—ä½“çš„é˜´å½±é¢œè‰²)</span></span><br><span class="line">        label.shadowColor=<span class="type">UIColor</span>.grayColor()  <span class="comment">//ç°è‰²é˜´å½±</span></span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">        <span class="comment">//    labelé˜´å½±åç§»ä½ç½®</span></span><br><span class="line">        label.shadowOffset=<span class="type">CGSizeMake</span>(-<span class="number">5</span>,<span class="number">5</span>)   <span class="comment">//é˜´å½±çš„åç§»é‡</span></span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">//    å¤šè¡Œæ˜¾ç¤ºï¼Œé»˜è®¤æ˜¯ä¸€è¡Œçš„,0è¡¨ç¤ºçš„å¤šè¡Œæ˜¾ç¤ºï¼ˆä¸é«˜åº¦æœ‰å…³ï¼‰Labelè‡ªé€‚åº”è‡ªåŠ¨æ¢è¡Œ</span></span><br><span class="line">        label.numberOfLines=<span class="number">0</span>   <span class="comment">//æ˜¾ç¤ºä¸¤è¡Œæ–‡å­—ï¼ˆé»˜è®¤åªæ˜¾ç¤ºä¸€è¡Œï¼Œè®¾ä¸º0è¡¨ç¤ºæ²¡æœ‰è¡Œæ•°é™åˆ¶ï¼‰</span></span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">        <span class="comment">//    è‡ªé€‚åº”ï¼ˆä¸å»ºè®®ä½¿ç”¨ï¼‰</span></span><br><span class="line"></span><br><span class="line">            <span class="comment">/**</span></span><br><span class="line"><span class="comment">              1ã€æ²¡æœ‰è®¾ç½®å¤šè¡Œæ˜¾ç¤ºï¼šå®½åº¦è‡ªé€‚åº”</span></span><br><span class="line"><span class="comment">              2ã€è®¾ç½®æœ‰å¤šè¡Œæ˜¾ç¤ºï¼šé«˜åº¦ä½¿ç”¨</span></span><br><span class="line"><span class="comment">              */</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// æ–‡æœ¬æœ‰å¤šå¤§,çª—å£æœ‰å¤šå¤§</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// ç»†èŠ‚: ä¸ç®¡é«˜åº¦å®½åº¦æ˜¯å¦è¶³å¤Ÿï¼Œéƒ½æ˜¾ç¤ºç›¸åº”çš„é«˜åº¦</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// ç»†èŠ‚: numberOfLinesä¸º1,é‚£ä¹ˆå°±æ˜¯å•è¡Œæ˜¾ç¤º</span></span><br><span class="line"></span><br><span class="line">        label.adjustsFontSizeToFitWidth=<span class="literal">true</span> <span class="comment">//å½“æ–‡å­—è¶…å‡ºæ ‡ç­¾å®½åº¦æ—¶ï¼Œè‡ªåŠ¨è°ƒæ•´æ–‡å­—å¤§å°ï¼Œä½¿å…¶ä¸è¢«æˆªæ–­</span></span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">        <span class="comment">// è®¾ç½®labelæ–‡æœ¬é«˜äº®</span></span><br><span class="line">        label.highlighted = <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">        <span class="comment">// è®¾ç½®labelæ–‡æœ¬é«˜äº®é¢œè‰²</span></span><br><span class="line">        label.highlightedTextColor = <span class="type">UIColor</span>.greenColor()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">// labelåœ†è§’å±æ€§</span></span><br><span class="line">        label.layer.masksToBounds = <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">        <span class="comment">// labelåœ†è§’åŠå¾„</span></span><br><span class="line">        label.layer.cornerRadius = <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">        <span class="comment">// labelåœ†è§’è¾¹æ¡†é¢œè‰²</span></span><br><span class="line">        label.layer.borderColor = <span class="type">UIColor</span>.blueColor().<span class="type">CGColor</span>;</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">        <span class="comment">// labelåœ†è§’è¾¹æ¡†å®½åº¦</span></span><br><span class="line">        label.layer.borderWidth = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">        <span class="comment">//  labelçš„å­—ä½“å¤§å°</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         systemFontOfSize(20) -&gt; UIFont         (æ–‡å­—å¤§å°)</span></span><br><span class="line"><span class="comment">         boldSystemFontOfSize(20) -&gt; UIFont     (åŠ ç²—ç±»å‹)</span></span><br><span class="line"><span class="comment">         italicSystemFontOfSize(20) -&gt; UIFont    (æ–œä½“ç±»å‹)</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line"></span><br><span class="line">        label.font = <span class="type">UIFont</span>.systemFontOfSize(<span class="number">50</span>)</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">        <span class="comment">// è®¾ç½®å­—ä½“æ—¶ï¼ŒåŒæ—¶è®¾ç½®å¤§å°</span></span><br><span class="line">        label.font = <span class="type">UIFont</span>(name:<span class="string">"æ‚¨å¥½ï¼"</span>, size:<span class="number">50</span>)</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">   </span><br><span class="line">        <span class="comment">// labelçš„ç‰¹æ®Šå±æ€§</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         case ByWordWrapping // Wrap at word boundaries, default</span></span><br><span class="line"><span class="comment">         case ByCharWrapping // Wrap at character boundaries</span></span><br><span class="line"><span class="comment">         case ByClipping // Simply clip</span></span><br><span class="line"><span class="comment">         case ByTruncatingHead // Truncate at head of line: "...wxyz"</span></span><br><span class="line"><span class="comment">         case ByTruncatingTail // Truncate at tail of line: "abcd..."</span></span><br><span class="line"><span class="comment">         case ByTruncatingMiddle // Truncate middle of line:  "ab...yz"</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line"></span><br><span class="line">label.lineBreakMode=<span class="type">NSLineBreakMode</span>.<span class="type">ByTruncatingTail</span>  <span class="comment">//éšè—å°¾éƒ¨å¹¶æ˜¾ç¤ºçœç•¥å·</span></span><br><span class="line">       label.lineBreakMode=<span class="type">NSLineBreakMode</span>.<span class="type">ByTruncatingMiddle</span>  <span class="comment">//éšè—ä¸­é—´éƒ¨åˆ†å¹¶æ˜¾ç¤ºçœç•¥å·</span></span><br><span class="line"></span><br><span class="line">   label.lineBreakMode=<span class="type">NSLineBreakMode</span>.<span class="type">ByTruncatingHead</span>  <span class="comment">//éšè—å¤´éƒ¨å¹¶æ˜¾ç¤ºçœç•¥å·</span></span><br><span class="line"></span><br><span class="line">        label.lineBreakMode=<span class="type">NSLineBreakMode</span>.<span class="type">ByClipping</span> <span class="comment">//æˆªå»å¤šä½™éƒ¨åˆ†ä¹Ÿä¸æ˜¾ç¤ºçœç•¥å·</span></span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">ã€€ã€€ <span class="comment">// å°†è§†å›¾æ·»åŠ åˆ°(self.view--&gt;çˆ¶è§†å›¾)ç•Œé¢ä¸­;  </span></span><br><span class="line">        <span class="keyword">self</span>.view.addSubview(label);</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">     <span class="comment">// å¯Œæ–‡æœ¬è®¾ç½®</span></span><br><span class="line">        <span class="keyword">let</span> attributeString = <span class="type">NSMutableAttributedString</span>(string:<span class="string">"Welcome to study Swift ï¼"</span>)</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">     </span><br><span class="line">     </span><br><span class="line">     <span class="comment">// ä»æ–‡æœ¬0å¼€å§‹6ä¸ªå­—ç¬¦å­—ä½“HelveticaNeue-Bold,16å·å­—ä½“å¤§å°</span></span><br><span class="line">        attributeString.addAttribute(<span class="type">NSFontAttributeName</span>, value: <span class="type">UIFont</span>(name: <span class="string">"HelveticaNeue-Bold"</span>, size: <span class="number">16</span>)!,range: <span class="type">NSMakeRange</span>(<span class="number">0</span>,<span class="number">6</span>))</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">        </span><br><span class="line">        </span><br><span class="line">     <span class="comment">// è®¾ç½®å­—ä½“é¢œè‰²       </span></span><br><span class="line">    attributeString.addAttribute(<span class="type">NSForegroundColorAttributeName</span>, value: <span class="type">UIColor</span>.blueColor(),range: <span class="type">NSMakeRange</span>(<span class="number">0</span>, <span class="number">3</span>))</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">     </span><br><span class="line">     <span class="comment">// è®¾ç½®æ–‡å­—èƒŒæ™¯é¢œè‰²       attributeString.addAttribute(NSBackgroundColorAttributeName, value: UIColor.greenColor(),range: NSMakeRange(3,3))</span></span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">        label.attributedText = attributeString</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">didReceiveMemoryWarning</span><span class="params">()</span></span> &#123;</span><br><span class="line">        <span class="keyword">super</span>.didReceiveMemoryWarning()</span><br><span class="line">        <span class="comment">// Dispose of any resources that can be recreated.</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;Swift ä¸­çš„ UILabel å±æ€§&lt;/p&gt;
    
    </summary>
    
      <category term="Note" scheme="https://marara.xin/categories/Note/"/>
    
    
      <category term="Swift" scheme="https://marara.xin/tags/Swift/"/>
    
  </entry>
  
  <entry>
    <title>å…¨å±€.gitignore</title>
    <link href="https://marara.xin/2017/11/23/gitignore%20global/"/>
    <id>https://marara.xin/2017/11/23/gitignore global/</id>
    <published>2017-11-23T08:10:01.054Z</published>
    <updated>2017-11-23T08:10:01.054Z</updated>
    
    <content type="html"><![CDATA[<p>ä»¥<code>.DS_Store</code>æ–‡ä»¶ä¸ºä¾‹ï¼š</p><h3 id="åˆ›å»º-gitignore-global-æ–‡ä»¶ï¼Œå°†éœ€è¦å¿½ç•¥çš„æ–‡ä»¶ç±»å‹å†™å…¥æ–‡ä»¶"><a href="#åˆ›å»º-gitignore-global-æ–‡ä»¶ï¼Œå°†éœ€è¦å¿½ç•¥çš„æ–‡ä»¶ç±»å‹å†™å…¥æ–‡ä»¶" class="headerlink" title="åˆ›å»º ~/.gitignore_global æ–‡ä»¶ï¼Œå°†éœ€è¦å¿½ç•¥çš„æ–‡ä»¶ç±»å‹å†™å…¥æ–‡ä»¶"></a>åˆ›å»º <code>~/.gitignore_global</code> æ–‡ä»¶ï¼Œå°†éœ€è¦å¿½ç•¥çš„æ–‡ä»¶ç±»å‹å†™å…¥æ–‡ä»¶</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">touch .gitignore_global</span><br></pre></td></tr></table></figure><h3 id="åœ¨-gitconfig-ä¸­å¼•ç”¨"><a href="#åœ¨-gitconfig-ä¸­å¼•ç”¨" class="headerlink" title="åœ¨.gitconfig ä¸­å¼•ç”¨"></a>åœ¨<code>.gitconfig</code> ä¸­å¼•ç”¨</h3><p>æ‰“å¼€<code>~/.gitconfig</code>ï¼Œè¾“å…¥ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[core] </span><br><span class="line">excludesfile = /Users/reon/.gitignore_global</span><br></pre></td></tr></table></figure><p>æˆ–æ˜¯é€šè¿‡ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git config --global core.excludesfile/Users/reon/.gitignore_global</span><br></pre></td></tr></table></figure><p>å‘½ä»¤æ¥å®ç°ã€‚</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;ä»¥&lt;code&gt;.DS_Store&lt;/code&gt;æ–‡ä»¶ä¸ºä¾‹ï¼š&lt;/p&gt;
&lt;h3 id=&quot;åˆ›å»º-gitignore-global-æ–‡ä»¶ï¼Œå°†éœ€è¦å¿½ç•¥çš„æ–‡ä»¶ç±»å‹å†™å…¥æ–‡ä»¶&quot;&gt;&lt;a href=&quot;#åˆ›å»º-gitignore-global-æ–‡ä»¶ï¼Œå°†éœ€è¦å¿½ç•¥çš„æ–‡ä»¶ç±»å‹å†™å…¥æ–‡ä»¶&quot; class=&quot;h
      
    
    </summary>
    
      <category term="Tutorial" scheme="https://marara.xin/categories/Tutorial/"/>
    
    
      <category term="Git" scheme="https://marara.xin/tags/Git/"/>
    
  </entry>
  
  <entry>
    <title>C# ä¸­çš„å§”æ‰˜å’Œäº‹ä»¶</title>
    <link href="https://marara.xin/2017/11/07/Delegates%20and%20events%20in%20Csharp/"/>
    <id>https://marara.xin/2017/11/07/Delegates and events in Csharp/</id>
    <published>2017-11-07T07:04:49.134Z</published>
    <updated>2017-12-12T00:45:56.289Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å¼•è¨€"><a href="#å¼•è¨€" class="headerlink" title="å¼•è¨€"></a>å¼•è¨€</h2><p><code>delegate</code> å’Œ <code>event</code>åœ¨ .Net Frameworkä¸­çš„åº”ç”¨éå¸¸å¹¿æ³›ï¼Œç„¶è€Œï¼Œè¾ƒå¥½åœ°ç†è§£å§”æ‰˜å’Œäº‹ä»¶å¯¹å¾ˆå¤šæ¥è§¦C#æ—¶é—´ä¸é•¿çš„äººæ¥è¯´å¹¶ä¸å®¹æ˜“ã€‚æœ¬æ–‡ä¸­ï¼Œæˆ‘å°†é€šè¿‡ä¸¤ä¸ªèŒƒä¾‹ç”±æµ…å…¥æ·±åœ°è®²è¿°ä»€ä¹ˆæ˜¯å§”æ‰˜ã€ä¸ºä»€ä¹ˆè¦ä½¿ç”¨å§”æ‰˜ã€äº‹ä»¶çš„ç”±æ¥ã€.Net Frameworkä¸­çš„å§”æ‰˜å’Œäº‹ä»¶ã€å§”æ‰˜å’Œäº‹ä»¶å¯¹Observerè®¾è®¡æ¨¡å¼çš„æ„ä¹‰ï¼Œå¯¹å®ƒä»¬çš„ä¸­é—´ä»£ç ä¹Ÿåšäº†è®¨è®ºã€‚</p><a id="more"></a><h2 id="å°†æ–¹æ³•ä½œä¸ºæ–¹æ³•çš„å‚æ•°"><a href="#å°†æ–¹æ³•ä½œä¸ºæ–¹æ³•çš„å‚æ•°" class="headerlink" title="å°†æ–¹æ³•ä½œä¸ºæ–¹æ³•çš„å‚æ•°"></a>å°†æ–¹æ³•ä½œä¸ºæ–¹æ³•çš„å‚æ•°</h2><p>æˆ‘ä»¬å…ˆä¸ç®¡è¿™ä¸ªæ ‡é¢˜å¦‚ä½•çš„ç»•å£ï¼Œä¹Ÿä¸ç®¡å§”æ‰˜ç©¶ç«Ÿæ˜¯ä¸ªä»€ä¹ˆä¸œè¥¿ï¼Œæ¥çœ‹ä¸‹é¢è¿™ä¸¤ä¸ªæœ€ç®€å•çš„æ–¹æ³•ï¼Œå®ƒä»¬ä¸è¿‡æ˜¯åœ¨å±å¹•ä¸Šè¾“å‡ºä¸€å¥é—®å€™çš„è¯è¯­ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">public void GreetPeople(string name) &#123;</span><br><span class="line">    // åšæŸäº›é¢å¤–çš„äº‹æƒ…ï¼Œæ¯”å¦‚åˆå§‹åŒ–ä¹‹ç±»ï¼Œæ­¤å¤„ç•¥</span><br><span class="line">    EnglishGreeting(name);</span><br><span class="line">&#125;</span><br><span class="line">public void EnglishGreeting(string name) &#123;</span><br><span class="line">    Console.WriteLine(&quot;Morning, &quot; + name);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æš‚ä¸”ä¸ç®¡è¿™ä¸¤ä¸ªæ–¹æ³•æœ‰æ²¡æœ‰ä»€ä¹ˆå®é™…æ„ä¹‰ã€‚<code>GreetPeople</code>ç”¨äºå‘æŸäººé—®å¥½ï¼Œå½“æˆ‘ä»¬ä¼ é€’ä»£è¡¨æŸäººå§“åçš„<code>name</code>å‚æ•°ï¼Œæ¯”å¦‚è¯´â€œJimmyâ€ï¼Œè¿›å»çš„æ—¶å€™ï¼Œåœ¨è¿™ä¸ªæ–¹æ³•ä¸­ï¼Œå°†è°ƒç”¨<code>EnglishGreeting</code>æ–¹æ³•ï¼Œå†æ¬¡ä¼ é€’<code>name</code>å‚æ•°ï¼Œ<code>EnglishGreeting</code>åˆ™ç”¨äºå‘å±å¹•è¾“å‡º â€œMorning, Jimmyâ€ã€‚</p><p>ç°åœ¨å‡è®¾è¿™ä¸ªç¨‹åºéœ€è¦è¿›è¡Œå…¨çƒåŒ–ï¼Œå“å‘€ï¼Œä¸å¥½äº†ï¼Œæˆ‘æ˜¯ä¸­å›½äººï¼Œæˆ‘ä¸æ˜ç™½â€œMorningâ€æ˜¯ä»€ä¹ˆæ„æ€ï¼Œæ€ä¹ˆåŠå‘¢ï¼Ÿå¥½å§ï¼Œæˆ‘ä»¬å†åŠ ä¸ªä¸­æ–‡ç‰ˆçš„é—®å€™æ–¹æ³•ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">public void ChineseGreeting(string name)&#123;</span><br><span class="line">    Console.WriteLine(&quot;æ—©ä¸Šå¥½, &quot; + name);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™æ—¶å€™ï¼Œ<code>GreetPeople</code>ä¹Ÿéœ€è¦æ”¹ä¸€æ”¹äº†ï¼Œä¸ç„¶å¦‚ä½•åˆ¤æ–­åˆ°åº•ç”¨å“ªä¸ªç‰ˆæœ¬çš„<code>Greeting</code>é—®å€™æ–¹æ³•åˆé€‚å‘¢ï¼Ÿåœ¨è¿›è¡Œè¿™ä¸ªä¹‹å‰ï¼Œæˆ‘ä»¬æœ€å¥½å†å®šä¹‰ä¸€ä¸ªæšä¸¾ä½œä¸ºåˆ¤æ–­çš„ä¾æ®ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">public enum Language&#123;</span><br><span class="line">    English, Chinese</span><br><span class="line">&#125;</span><br><span class="line">public void GreetPeople(string name, Language lang)&#123;</span><br><span class="line">    //åšæŸäº›é¢å¤–çš„äº‹æƒ…ï¼Œæ¯”å¦‚åˆå§‹åŒ–ä¹‹ç±»ï¼Œæ­¤å¤„ç•¥</span><br><span class="line">    swith(lang)&#123;</span><br><span class="line">        case Language.English:</span><br><span class="line">           EnglishGreeting(name);</span><br><span class="line">           break;</span><br><span class="line">       case Language.Chinese:</span><br><span class="line">           ChineseGreeting(name);</span><br><span class="line">           break;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>OKï¼Œå°½ç®¡è¿™æ ·è§£å†³äº†é—®é¢˜ï¼Œä½†æˆ‘ä¸è¯´å¤§å®¶ä¹Ÿå¾ˆå®¹æ˜“æƒ³åˆ°ï¼Œè¿™ä¸ªè§£å†³æ–¹æ¡ˆçš„å¯æ‰©å±•æ€§å¾ˆå·®ï¼Œå¦‚æœæ—¥åæˆ‘ä»¬éœ€è¦å†æ·»åŠ éŸ©æ–‡ç‰ˆã€æ—¥æ–‡ç‰ˆï¼Œå°±ä¸å¾—ä¸åå¤ä¿®æ”¹æšä¸¾å’Œ<code>GreetPeople()</code>æ–¹æ³•ï¼Œä»¥é€‚åº”æ–°çš„éœ€æ±‚ã€‚</p><p>åœ¨è€ƒè™‘æ–°çš„è§£å†³æ–¹æ¡ˆä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆçœ‹çœ‹ <code>GreetPeople</code>çš„æ–¹æ³•ç­¾åï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">public void GreetPeople(string name, Language lang)</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬ä»…çœ‹ <code>string name</code>ï¼Œåœ¨è¿™é‡Œï¼Œ<code>string</code> æ˜¯å‚æ•°ç±»å‹ï¼Œ<code>name</code> æ˜¯å‚æ•°å˜é‡ï¼Œå½“æˆ‘ä»¬èµ‹ç»™<code>name</code>å­—ç¬¦ä¸²â€œjimmyâ€æ—¶ï¼Œå®ƒå°±ä»£è¡¨â€œjimmyâ€è¿™ä¸ªå€¼ï¼›å½“æˆ‘ä»¬èµ‹ç»™å®ƒâ€œå¼ å­é˜³â€æ—¶ï¼Œå®ƒåˆä»£è¡¨ç€â€œå¼ å­é˜³â€è¿™ä¸ªå€¼ã€‚ç„¶åï¼Œæˆ‘ä»¬å¯ä»¥åœ¨æ–¹æ³•ä½“å†…å¯¹è¿™ä¸ª<code>name</code>è¿›è¡Œå…¶ä»–æ“ä½œã€‚å“ï¼Œè¿™ç®€ç›´æ˜¯åºŸè¯ä¹ˆï¼Œåˆšå­¦ç¨‹åºå°±çŸ¥é“äº†ã€‚</p><p>å¦‚æœä½ å†ä»”ç»†æƒ³æƒ³ï¼Œå‡å¦‚<code>GreetPeople()</code>æ–¹æ³•å¯ä»¥æ¥å—ä¸€ä¸ªå‚æ•°å˜é‡ï¼Œè¿™ä¸ªå˜é‡å¯ä»¥ä»£è¡¨å¦ä¸€ä¸ªæ–¹æ³•ï¼Œå½“æˆ‘ä»¬ç»™è¿™ä¸ªå˜é‡èµ‹å€¼ <code>EnglishGreeting</code>çš„æ—¶å€™ï¼Œå®ƒä»£è¡¨ç€ <code>EnglsihGreeting()</code> è¿™ä¸ªæ–¹æ³•ï¼›å½“æˆ‘ä»¬ç»™å®ƒèµ‹å€¼<code>ChineseGreeting</code> çš„æ—¶å€™ï¼Œå®ƒåˆä»£è¡¨ç€ <code>ChineseGreeting()</code>æ–¹æ³•ã€‚æˆ‘ä»¬å°†è¿™ä¸ªå‚æ•°å˜é‡å‘½åä¸º <code>MakeGreeting</code>ï¼Œé‚£ä¹ˆä¸æ˜¯å¯ä»¥å¦‚åŒç»™<code>name</code>èµ‹å€¼æ—¶ä¸€æ ·ï¼Œåœ¨è°ƒç”¨ <code>GreetPeople()</code>æ–¹æ³•çš„æ—¶å€™ï¼Œç»™è¿™ä¸ª<code>MakeGreeting</code> å‚æ•°ä¹Ÿèµ‹ä¸Šå€¼ä¹ˆ(ChineseGreetingæˆ–è€…EnglsihGreetingç­‰)ï¼Ÿç„¶åï¼Œæˆ‘ä»¬åœ¨æ–¹æ³•ä½“å†…ï¼Œä¹Ÿå¯ä»¥åƒä½¿ç”¨åˆ«çš„å‚æ•°ä¸€æ ·ä½¿ç”¨<code>MakeGreeting</code>ã€‚ä½†æ˜¯ï¼Œç”±äº<code>MakeGreeting</code>ä»£è¡¨ç€ä¸€ä¸ªæ–¹æ³•ï¼Œå®ƒçš„ä½¿ç”¨æ–¹å¼åº”è¯¥å’Œå®ƒè¢«èµ‹çš„æ–¹æ³•(æ¯”å¦‚ChineseGreeting)æ˜¯ä¸€æ ·çš„ï¼Œæ¯”å¦‚ï¼š</p><p><code>MakeGreeting(name);</code></p><p>å¥½äº†ï¼Œæœ‰äº†æ€è·¯äº†ï¼Œæˆ‘ä»¬ç°åœ¨å°±æ¥æ”¹æ”¹<code>GreetPeople()</code>æ–¹æ³•ï¼Œé‚£ä¹ˆå®ƒåº”è¯¥æ˜¯è¿™ä¸ªæ ·å­äº†ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">public void GreetPeople(string name, *** MakeGreeting)&#123;</span><br><span class="line">    MakeGreeting(name);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ³¨æ„åˆ° <code>***</code> ï¼Œè¿™ä¸ªä½ç½®é€šå¸¸æ”¾ç½®çš„åº”è¯¥æ˜¯å‚æ•°çš„ç±»å‹ï¼Œä½†åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬ä»…ä»…æ˜¯æƒ³åˆ°åº”è¯¥æœ‰ä¸ªå¯ä»¥ä»£è¡¨æ–¹æ³•çš„å‚æ•°ï¼Œå¹¶æŒ‰è¿™ä¸ªæ€è·¯å»æ”¹å†™<code>GreetPeople</code>æ–¹æ³•ï¼Œç°åœ¨å°±å‡ºç°äº†ä¸€ä¸ªå¤§é—®é¢˜ï¼š<code>***</code>è¿™ä¸ªä»£è¡¨ç€æ–¹æ³•çš„MakeGreetingå‚æ•°åº”è¯¥æ˜¯ä»€ä¹ˆç±»å‹çš„ï¼Ÿ</p><blockquote><p><strong>NOTEï¼š</strong>è¿™é‡Œå·²ä¸å†éœ€è¦æšä¸¾äº†ï¼Œå› ä¸ºåœ¨ç»™<code>MakeGreeting</code>èµ‹å€¼çš„æ—¶å€™åŠ¨æ€åœ°å†³å®šä½¿ç”¨å“ªä¸ªæ–¹æ³•ï¼Œæ˜¯<code>ChineseGreeting</code>è¿˜æ˜¯ <code>EnglishGreeting</code>ï¼Œè€Œåœ¨è¿™ä¸ªä¸¤ä¸ªæ–¹æ³•å†…éƒ¨ï¼Œå·²ç»å¯¹ä½¿ç”¨â€œmorningâ€è¿˜æ˜¯â€œæ—©ä¸Šå¥½â€ä½œäº†åŒºåˆ†ã€‚</p></blockquote><p>èªæ˜çš„ä½ åº”è¯¥å·²ç»æƒ³åˆ°äº†ï¼Œç°åœ¨æ˜¯å§”æ‰˜è¯¥å‡ºåœºçš„æ—¶å€™äº†ï¼Œä½†è®²è¿°å§”æ‰˜ä¹‹å‰ï¼Œæˆ‘ä»¬å†çœ‹çœ‹<code>MakeGreeting</code>å‚æ•°æ‰€èƒ½ä»£è¡¨çš„ <code>ChineseGreeting()</code>å’Œ<code>EnglishGreeting()</code>æ–¹æ³•çš„ç­¾åï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">public void EnglishGreeting(string name)</span><br><span class="line">public void ChineseGreeting(string name)</span><br></pre></td></tr></table></figure><p>å¦‚åŒ<code>name</code>å¯ä»¥æ¥å—<code>String</code>ç±»å‹çš„â€œtrueâ€å’Œâ€œ1â€ï¼Œä½†ä¸èƒ½æ¥å—<code>bool</code>ç±»å‹çš„trueå’Œintç±»å‹çš„1ä¸€æ ·ã€‚<strong><code>MakeGreeting</code>çš„ å‚æ•°ç±»å‹å®šä¹‰ åº”è¯¥èƒ½å¤Ÿç¡®å®š <code>MakeGreeting</code>å¯ä»¥ä»£è¡¨çš„æ–¹æ³•ç§ç±»ï¼Œå†è¿›ä¸€æ­¥è®²ï¼Œå°±æ˜¯<code>MakeGreeting</code>å¯ä»¥ä»£è¡¨çš„æ–¹æ³•çš„å‚æ•°ç±»å‹å’Œè¿”å›ç±»å‹ã€‚</strong></p><p>äºæ˜¯ï¼Œå§”æ‰˜å‡ºç°äº†ï¼š<strong>å®ƒå®šä¹‰äº†<code>MakeGreeting</code>å‚æ•°æ‰€èƒ½ä»£è¡¨çš„æ–¹æ³•çš„ç§ç±»ï¼Œä¹Ÿå°±æ˜¯<code>MakeGreeting</code>å‚æ•°çš„ç±»å‹ã€‚</strong></p><blockquote><p><strong>NOTEï¼š</strong>å¦‚æœä¸Šé¢è¿™å¥è¯æ¯”è¾ƒç»•å£ï¼Œæˆ‘æŠŠå®ƒç¿»è¯‘æˆè¿™æ ·ï¼š<code>string</code> å®šä¹‰äº†<code>name</code>å‚æ•°æ‰€èƒ½ä»£è¡¨çš„<strong>å€¼çš„ç§ç±»</strong>ï¼Œä¹Ÿå°±æ˜¯<code>name</code>å‚æ•°çš„ç±»å‹ã€‚</p></blockquote><p>æœ¬ä¾‹ä¸­å§”æ‰˜çš„å®šä¹‰ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">public delegate void GreetingDelegate(string name);</span><br></pre></td></tr></table></figure><p>å¯ä»¥ä¸ä¸Šé¢<code>EnglishGreeting()</code>æ–¹æ³•çš„ç­¾åå¯¹æ¯”ä¸€ä¸‹ï¼Œé™¤äº†åŠ å…¥äº†<code>delegate</code>å…³é”®å­—ä»¥å¤–ï¼Œå…¶ä½™çš„æ˜¯ä¸æ˜¯å®Œå…¨ä¸€æ ·ï¼Ÿ</p><p>ç°åœ¨ï¼Œè®©æˆ‘ä»¬å†æ¬¡æ”¹åŠ¨<code>GreetPeople()</code>æ–¹æ³•ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">public void GreetPeople(string name, GreetingDelegate MakeGreeting)&#123;</span><br><span class="line">    MakeGreeting(name);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¦‚ä½ æ‰€è§ï¼Œå§”æ‰˜GreetingDelegateå‡ºç°çš„ä½ç½®ä¸ stringç›¸åŒï¼Œstringæ˜¯ä¸€ä¸ªç±»å‹ï¼Œé‚£ä¹ˆGreetingDelegateåº”è¯¥ä¹Ÿæ˜¯ä¸€ä¸ªç±»å‹ï¼Œæˆ–è€…å«ç±»(Class)ã€‚ä½†æ˜¯å§”æ‰˜çš„å£°æ˜æ–¹å¼å’Œç±»å´å®Œå…¨ä¸åŒï¼Œè¿™æ˜¯æ€ä¹ˆä¸€å›äº‹ï¼Ÿå®é™…ä¸Šï¼Œå§”æ‰˜åœ¨ç¼–è¯‘çš„æ—¶å€™ç¡®å®ä¼šç¼–è¯‘æˆç±»ã€‚å› ä¸ºDelegateæ˜¯ä¸€ä¸ªç±»ï¼Œæ‰€ä»¥åœ¨ä»»ä½•å¯ä»¥å£°æ˜ç±»çš„åœ°æ–¹éƒ½å¯ä»¥å£°æ˜å§”æ‰˜ã€‚æ›´å¤šçš„å†…å®¹å°†åœ¨ä¸‹é¢è®²è¿°ï¼Œç°åœ¨ï¼Œè¯·çœ‹çœ‹è¿™ä¸ªèŒƒä¾‹çš„å®Œæ•´ä»£ç ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">using System;</span><br><span class="line">using System.Collections.Generic;</span><br><span class="line">using System.Text;</span><br><span class="line">namespace Delegate &#123;</span><br><span class="line">     //å®šä¹‰å§”æ‰˜ï¼Œå®ƒå®šä¹‰äº†å¯ä»¥ä»£è¡¨çš„æ–¹æ³•çš„ç±»å‹</span><br><span class="line">     public delegate void GreetingDelegate(string name);</span><br><span class="line">        class Program &#123;</span><br><span class="line">           private static void EnglishGreeting(string name) &#123;</span><br><span class="line">               Console.WriteLine(&quot;Morning, &quot; + name);</span><br><span class="line">           &#125;</span><br><span class="line">           private static void ChineseGreeting(string name) &#123;</span><br><span class="line">               Console.WriteLine(&quot;æ—©ä¸Šå¥½, &quot; + name);</span><br><span class="line">           &#125;</span><br><span class="line">           //æ³¨æ„æ­¤æ–¹æ³•ï¼Œå®ƒæ¥å—ä¸€ä¸ªGreetingDelegateç±»å‹çš„æ–¹æ³•ä½œä¸ºå‚æ•°</span><br><span class="line">           private static void GreetPeople(string name, GreetingDelegate MakeGreeting) &#123;</span><br><span class="line">               MakeGreeting(name);</span><br><span class="line">            &#125;</span><br><span class="line">           static void Main(string[] args) &#123;</span><br><span class="line">               GreetPeople(&quot;Jimmy Zhang&quot;, EnglishGreeting);</span><br><span class="line">               GreetPeople(&quot;å¼ å­é˜³&quot;, ChineseGreeting);</span><br><span class="line">               Console.ReadKey();</span><br><span class="line">           &#125;</span><br><span class="line">      &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¾“å‡ºå¦‚ä¸‹ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Morning, Jimmy Zhang</span><br><span class="line">æ—©ä¸Šå¥½, å¼ å­é˜³</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬ç°åœ¨å¯¹å§”æ‰˜åšä¸€ä¸ªæ€»ç»“ï¼š</p><p><strong>å§”æ‰˜æ˜¯ä¸€ä¸ªç±»ï¼Œå®ƒå®šä¹‰äº†æ–¹æ³•çš„ç±»å‹ï¼Œä½¿å¾—å¯ä»¥å°†æ–¹æ³•å½“ä½œå¦ä¸€ä¸ªæ–¹æ³•çš„å‚æ•°æ¥è¿›è¡Œä¼ é€’ï¼Œè¿™ç§å°†æ–¹æ³•åŠ¨æ€åœ°èµ‹ç»™å‚æ•°çš„åšæ³•ï¼Œå¯ä»¥é¿å…åœ¨ç¨‹åºä¸­å¤§é‡ä½¿ç”¨<code>If-Else(Switch)</code>è¯­å¥ï¼ŒåŒæ—¶ä½¿å¾—ç¨‹åºå…·æœ‰æ›´å¥½çš„å¯æ‰©å±•æ€§ã€‚</strong></p><h2 id="å°†æ–¹æ³•ç»‘å®šåˆ°å§”æ‰˜"><a href="#å°†æ–¹æ³•ç»‘å®šåˆ°å§”æ‰˜" class="headerlink" title="å°†æ–¹æ³•ç»‘å®šåˆ°å§”æ‰˜"></a>å°†æ–¹æ³•ç»‘å®šåˆ°å§”æ‰˜</h2><p>çœ‹åˆ°è¿™é‡Œï¼Œæ˜¯ä¸æ˜¯æœ‰é‚£ä¹ˆç‚¹å¦‚æ¢¦åˆé†’çš„æ„Ÿè§‰ï¼Ÿäºæ˜¯ï¼Œä½ æ˜¯ä¸æ˜¯åœ¨æƒ³ï¼šåœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä¸ä¸€å®šè¦ç›´æ¥åœ¨<code>GreetPeople()</code>æ–¹æ³•ä¸­ç»™ <code>name</code>å‚æ•°èµ‹å€¼ï¼Œæˆ‘å¯ä»¥åƒè¿™æ ·ä½¿ç”¨å˜é‡ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">static void Main(string[] args) &#123;</span><br><span class="line">    string name1, name2;</span><br><span class="line">    name1 = &quot;Jimmy Zhang&quot;;</span><br><span class="line">    name2 = &quot;å¼ å­é˜³&quot;; </span><br><span class="line">    GreetPeople(name1, EnglishGreeting);</span><br><span class="line">    GreetPeople(name2, ChineseGreeting);</span><br><span class="line">    Console.ReadKey();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è€Œæ—¢ç„¶å§”æ‰˜<code>GreetingDelegate</code> å’Œ ç±»å‹ <code>string</code> çš„åœ°ä½ä¸€æ ·ï¼Œéƒ½æ˜¯å®šä¹‰äº†ä¸€ç§å‚æ•°ç±»å‹ï¼Œé‚£ä¹ˆï¼Œæˆ‘æ˜¯ä¸æ˜¯ä¹Ÿå¯ä»¥è¿™ä¹ˆä½¿ç”¨å§”æ‰˜ï¼Ÿ</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">static void Main(string[] args) &#123;</span><br><span class="line">    GreetingDelegate delegate1, delegate2;</span><br><span class="line">    delegate1 = EnglishGreeting;</span><br><span class="line">    delegate2 = ChineseGreeting;</span><br><span class="line">    GreetPeople(&quot;Jimmy Zhang&quot;, delegate1);</span><br><span class="line">    GreetPeople(&quot;å¼ å­é˜³&quot;, delegate2);</span><br><span class="line">    Console.ReadKey();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¦‚ä½ æ‰€æ–™ï¼Œè¿™æ ·æ˜¯æ²¡æœ‰é—®é¢˜çš„ï¼Œç¨‹åºä¸€å¦‚é¢„æ–™çš„é‚£æ ·è¾“å‡ºã€‚è¿™é‡Œï¼Œæˆ‘æƒ³è¯´çš„æ˜¯å§”æ‰˜ä¸åŒäº<code>string</code>çš„ä¸€ä¸ªç‰¹æ€§ï¼šå¯ä»¥å°†å¤šä¸ªæ–¹æ³•èµ‹ç»™åŒä¸€ä¸ªå§”æ‰˜ï¼Œæˆ–è€…å«å°†å¤šä¸ªæ–¹æ³•ç»‘å®šåˆ°åŒä¸€ä¸ªå§”æ‰˜ï¼Œå½“è°ƒç”¨è¿™ä¸ªå§”æ‰˜çš„æ—¶å€™ï¼Œå°†ä¾æ¬¡è°ƒç”¨å…¶æ‰€ç»‘å®šçš„æ–¹æ³•ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œè¯­æ³•å¦‚ä¸‹ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">static void Main(string[] args) &#123;</span><br><span class="line">    GreetingDelegate delegate1;</span><br><span class="line">    delegate1 = EnglishGreeting; // å…ˆç»™å§”æ‰˜ç±»å‹çš„å˜é‡èµ‹å€¼</span><br><span class="line">    delegate1 += ChineseGreeting;   // ç»™æ­¤å§”æ‰˜å˜é‡å†ç»‘å®šä¸€ä¸ªæ–¹æ³•</span><br><span class="line">     // å°†å…ˆåè°ƒç”¨ EnglishGreeting ä¸ ChineseGreeting æ–¹æ³•</span><br><span class="line">    GreetPeople(&quot;Jimmy Zhang&quot;, delegate1);  </span><br><span class="line">    Console.ReadKey();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¾“å‡ºä¸ºï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Morning, Jimmy Zhang</span><br><span class="line">æ—©ä¸Šå¥½, Jimmy Zhang</span><br></pre></td></tr></table></figure><p>å®é™…ä¸Šï¼Œæˆ‘ä»¬å¯ä»¥ä¹Ÿå¯ä»¥ç»•è¿‡GreetPeopleæ–¹æ³•ï¼Œé€šè¿‡å§”æ‰˜æ¥ç›´æ¥è°ƒç”¨EnglishGreetingå’ŒChineseGreetingï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">static void Main(string[] args) &#123;</span><br><span class="line">    GreetingDelegate delegate1;</span><br><span class="line">    delegate1 = EnglishGreeting; // å…ˆç»™å§”æ‰˜ç±»å‹çš„å˜é‡èµ‹å€¼</span><br><span class="line">    delegate1 += ChineseGreeting;   // ç»™æ­¤å§”æ‰˜å˜é‡å†ç»‘å®šä¸€ä¸ªæ–¹æ³•</span><br><span class="line">    // å°†å…ˆåè°ƒç”¨ EnglishGreeting ä¸ ChineseGreeting æ–¹æ³•</span><br><span class="line">    delegate1 (&quot;Jimmy Zhang&quot;);   </span><br><span class="line">    Console.ReadKey();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p><strong>NOTEï¼š</strong>è¿™åœ¨æœ¬ä¾‹ä¸­æ˜¯æ²¡æœ‰é—®é¢˜çš„ï¼Œä½†å›å¤´çœ‹ä¸‹ä¸Šé¢GreetPeople()çš„å®šä¹‰ï¼Œåœ¨å®ƒä¹‹ä¸­å¯ä»¥åšä¸€äº›å¯¹äºEnglshihGreetingå’ŒChineseGreetingæ¥è¯´éƒ½éœ€è¦è¿›è¡Œçš„å·¥ä½œï¼Œä¸ºäº†ç®€ä¾¿æˆ‘åšäº†çœç•¥ã€‚</p></blockquote><p>æ³¨æ„è¿™é‡Œï¼Œç¬¬ä¸€æ¬¡ç”¨çš„â€œ<code>=</code>â€ï¼Œæ˜¯èµ‹å€¼çš„è¯­æ³•ï¼›ç¬¬äºŒæ¬¡ï¼Œç”¨çš„æ˜¯â€œ<code>+=</code>â€ï¼Œæ˜¯ç»‘å®šçš„è¯­æ³•ã€‚å¦‚æœç¬¬ä¸€æ¬¡å°±ä½¿ç”¨â€œ<code>+=</code>â€ï¼Œå°†å‡ºç°â€œä½¿ç”¨äº†æœªèµ‹å€¼çš„å±€éƒ¨å˜é‡â€çš„ç¼–è¯‘é”™è¯¯ã€‚</p><p>æˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨ä¸‹é¢çš„ä»£ç æ¥è¿™æ ·ç®€åŒ–è¿™ä¸€è¿‡ç¨‹ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">GreetingDelegate delegate1 = new GreetingDelegate(EnglishGreeting);</span><br><span class="line">delegate1 += ChineseGreeting;   // ç»™æ­¤å§”æ‰˜å˜é‡å†ç»‘å®šä¸€ä¸ªæ–¹æ³•</span><br></pre></td></tr></table></figure><p>çœ‹åˆ°è¿™é‡Œï¼Œåº”è¯¥æ³¨æ„åˆ°ï¼Œè¿™æ®µä»£ç ç¬¬ä¸€æ¡è¯­å¥ä¸å®ä¾‹åŒ–ä¸€ä¸ªç±»æ˜¯ä½•å…¶çš„ç›¸ä¼¼ï¼Œä½ ä¸ç¦æƒ³åˆ°ï¼šä¸Šé¢ç¬¬ä¸€æ¬¡ç»‘å®šå§”æ‰˜æ—¶ä¸å¯ä»¥ä½¿ç”¨â€œ<code>+=</code>â€çš„ç¼–è¯‘é”™è¯¯ï¼Œæˆ–è®¸å¯ä»¥ç”¨è¿™æ ·çš„æ–¹æ³•æ¥é¿å…ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">GreetingDelegate delegate1 = new GreetingDelegate();</span><br><span class="line">delegate1 += EnglishGreeting;   // è¿™æ¬¡ç”¨çš„æ˜¯ â€œ+=â€ï¼Œç»‘å®šè¯­æ³•ã€‚</span><br><span class="line">delegate1 += ChineseGreeting;   // ç»™æ­¤å§”æ‰˜å˜é‡å†ç»‘å®šä¸€ä¸ªæ–¹æ³•</span><br></pre></td></tr></table></figure><p>ä½†å®é™…ä¸Šï¼Œè¿™æ ·ä¼šå‡ºç°ç¼–è¯‘é”™è¯¯ï¼š <strong>â€œGreetingDelegateâ€æ–¹æ³•æ²¡æœ‰é‡‡ç”¨â€œ0â€ä¸ªå‚æ•°çš„é‡è½½</strong>ã€‚å°½ç®¡è¿™æ ·çš„ç»“æœè®©æˆ‘ä»¬è§‰å¾—æœ‰ç‚¹æ²®ä¸§ï¼Œä½†æ˜¯ç¼–è¯‘çš„æç¤ºï¼š<strong>â€œæ²¡æœ‰0ä¸ªå‚æ•°çš„é‡è½½â€</strong>å†æ¬¡è®©æˆ‘ä»¬è”æƒ³åˆ°äº†ç±»çš„æ„é€ å‡½æ•°ã€‚æˆ‘çŸ¥é“ä½ ä¸€å®šæŒ‰æºä¸ä½æƒ³æ¢ä¸ªç©¶ç«Ÿï¼Œä½†å†æ­¤ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦å…ˆæŠŠåŸºç¡€çŸ¥è¯†å’Œåº”ç”¨ä»‹ç»å®Œã€‚</p><p><strong>æ—¢ç„¶ç»™å§”æ‰˜å¯ä»¥ç»‘å®šä¸€ä¸ªæ–¹æ³•ï¼Œé‚£ä¹ˆä¹Ÿåº”è¯¥æœ‰åŠæ³•å–æ¶ˆå¯¹æ–¹æ³•çš„ç»‘å®šï¼Œå¾ˆå®¹æ˜“æƒ³åˆ°ï¼Œè¿™ä¸ªè¯­æ³•æ˜¯â€œ-=â€ï¼š</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">static void Main(string[] args) &#123;</span><br><span class="line">    GreetingDelegate delegate1 = new GreetingDelegate(EnglishGreeting);</span><br><span class="line">    delegate1 += ChineseGreeting;   // ç»™æ­¤å§”æ‰˜å˜é‡å†ç»‘å®šä¸€ä¸ªæ–¹æ³•</span><br><span class="line">    // å°†å…ˆåè°ƒç”¨ EnglishGreeting ä¸ ChineseGreeting æ–¹æ³•</span><br><span class="line">    GreetPeople(&quot;Jimmy Zhang&quot;, delegate1);  </span><br><span class="line">    Console.WriteLine();</span><br><span class="line">    delegate1 -= EnglishGreeting; //å–æ¶ˆå¯¹EnglishGreetingæ–¹æ³•çš„ç»‘å®š</span><br><span class="line">    // å°†ä»…è°ƒç”¨ ChineseGreeting </span><br><span class="line">    GreetPeople(&quot;å¼ å­é˜³&quot;, delegate1); </span><br><span class="line">    Console.ReadKey();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¾“å‡ºä¸ºï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Morning, Jimmy Zhang</span><br><span class="line">æ—©ä¸Šå¥½, Jimmy Zhang</span><br><span class="line">æ—©ä¸Šå¥½, å¼ å­é˜³</span><br></pre></td></tr></table></figure><p>è®©æˆ‘ä»¬å†æ¬¡å¯¹å§”æ‰˜ä½œä¸ªæ€»ç»“ï¼š</p><p><strong>ä½¿ç”¨å§”æ‰˜å¯ä»¥å°†å¤šä¸ªæ–¹æ³•ç»‘å®šåˆ°åŒä¸€ä¸ªå§”æ‰˜å˜é‡ï¼Œå½“è°ƒç”¨æ­¤å˜é‡æ—¶(è¿™é‡Œç”¨â€œè°ƒç”¨â€è¿™ä¸ªè¯ï¼Œæ˜¯å› ä¸ºæ­¤å˜é‡ä»£è¡¨ä¸€ä¸ªæ–¹æ³•)ï¼Œå¯ä»¥ä¾æ¬¡è°ƒç”¨æ‰€æœ‰ç»‘å®šçš„æ–¹æ³•ã€‚</strong></p><h2 id="äº‹ä»¶çš„ç”±æ¥"><a href="#äº‹ä»¶çš„ç”±æ¥" class="headerlink" title="äº‹ä»¶çš„ç”±æ¥"></a>äº‹ä»¶çš„ç”±æ¥</h2><p>æˆ‘ä»¬ç»§ç»­æ€è€ƒä¸Šé¢çš„ç¨‹åºï¼šä¸Šé¢çš„ä¸‰ä¸ªæ–¹æ³•éƒ½å®šä¹‰åœ¨<code>Programe</code>ç±»ä¸­ï¼Œè¿™æ ·åšæ˜¯ä¸ºäº†ç†è§£çš„æ–¹ä¾¿ï¼Œå®é™…åº”ç”¨ä¸­ï¼Œé€šå¸¸éƒ½æ˜¯ <code>GreetPeople</code> åœ¨ä¸€ä¸ªç±»ä¸­ï¼Œ<code>ChineseGreeting</code>å’Œ <code>EnglishGreeting</code> åœ¨å¦å¤–çš„ç±»ä¸­ã€‚ç°åœ¨ä½ å·²ç»å¯¹å§”æ‰˜æœ‰äº†åˆæ­¥äº†è§£ï¼Œæ˜¯æ—¶å€™å¯¹ä¸Šé¢çš„ä¾‹å­åšä¸ªæ”¹è¿›äº†ã€‚å‡è®¾æˆ‘ä»¬å°†GreetingPeople()æ”¾åœ¨ä¸€ä¸ªå«<code>GreetingManager</code>çš„ç±»ä¸­ï¼Œé‚£ä¹ˆæ–°ç¨‹åºåº”è¯¥æ˜¯è¿™ä¸ªæ ·å­çš„ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">namespace Delegate &#123;</span><br><span class="line">    //å®šä¹‰å§”æ‰˜ï¼Œå®ƒå®šä¹‰äº†å¯ä»¥ä»£è¡¨çš„æ–¹æ³•çš„ç±»å‹</span><br><span class="line">    public delegate void GreetingDelegate(string name);</span><br><span class="line">    //æ–°å»ºçš„GreetingManagerç±»</span><br><span class="line">    public class GreetingManager&#123;</span><br><span class="line">       public void GreetPeople(string name, GreetingDelegate MakeGreeting) &#123;</span><br><span class="line">           MakeGreeting(name);</span><br><span class="line">       &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    class Program &#123;</span><br><span class="line">       private static void EnglishGreeting(string name) &#123;</span><br><span class="line">           Console.WriteLine(&quot;Morning, &quot; + name);</span><br><span class="line">       &#125;</span><br><span class="line">       private static void ChineseGreeting(string name) &#123;</span><br><span class="line">           Console.WriteLine(&quot;æ—©ä¸Šå¥½, &quot; + name);</span><br><span class="line">       &#125;</span><br><span class="line">       static void Main(string[] args) &#123;</span><br><span class="line">           // ... ...</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªæ—¶å€™ï¼Œå¦‚æœè¦å®ç°å‰é¢æ¼”ç¤ºçš„è¾“å‡ºæ•ˆæœï¼Œ<code>Main</code>æ–¹æ³•æˆ‘æƒ³åº”è¯¥æ˜¯è¿™æ ·çš„ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">static void Main(string[] args) &#123;</span><br><span class="line">    GreetingManager gm = new  GreetingManager();</span><br><span class="line">    gm.GreetPeople(&quot;Jimmy Zhang&quot;, EnglishGreeting);</span><br><span class="line">    gm.GreetPeople(&quot;å¼ å­é˜³&quot;, ChineseGreeting);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬è¿è¡Œè¿™æ®µä»£ç ï¼Œå—¯ï¼Œæ²¡æœ‰ä»»ä½•é—®é¢˜ã€‚ç¨‹åºä¸€å¦‚é¢„æ–™åœ°é‚£æ ·è¾“å‡ºäº†ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Morning, Jimmy Zhang</span><br><span class="line">æ—©ä¸Šå¥½, å¼ å­é˜³</span><br></pre></td></tr></table></figure><p>ç°åœ¨ï¼Œå‡è®¾æˆ‘ä»¬éœ€è¦ä½¿ç”¨ä¸Šä¸€èŠ‚å­¦åˆ°çš„çŸ¥è¯†ï¼Œå°†å¤šä¸ªæ–¹æ³•ç»‘å®šåˆ°åŒä¸€ä¸ªå§”æ‰˜å˜é‡ï¼Œè¯¥å¦‚ä½•åšå‘¢ï¼Ÿè®©æˆ‘ä»¬å†æ¬¡æ”¹å†™ä»£ç ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">static void Main(string[] args) &#123;</span><br><span class="line">    GreetingManager gm = new  GreetingManager();</span><br><span class="line">    GreetingDelegate delegate1;</span><br><span class="line">    delegate1 = EnglishGreeting;</span><br><span class="line">    delegate1 += ChineseGreeting;</span><br><span class="line">    gm.GreetPeople(&quot;Jimmy Zhang&quot;, delegate1);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¾“å‡ºï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Morning, Jimmy Zhang</span><br><span class="line">æ—©ä¸Šå¥½, Jimmy Zhang</span><br></pre></td></tr></table></figure><p>åˆ°äº†è¿™é‡Œï¼Œæˆ‘ä»¬ä¸ç¦æƒ³åˆ°ï¼šé¢å‘å¯¹è±¡è®¾è®¡ï¼Œè®²ç©¶çš„æ˜¯å¯¹è±¡çš„å°è£…ï¼Œæ—¢ç„¶å¯ä»¥å£°æ˜å§”æ‰˜ç±»å‹çš„å˜é‡(åœ¨ä¸Šä¾‹ä¸­æ˜¯delegate1)ï¼Œæˆ‘ä»¬ä½•ä¸å°†è¿™ä¸ªå˜é‡å°è£…åˆ° <code>GreetManager</code>ç±»ä¸­ï¼Ÿåœ¨è¿™ä¸ªç±»çš„å®¢æˆ·ç«¯ä¸­ä½¿ç”¨ä¸æ˜¯æ›´æ–¹ä¾¿ä¹ˆï¼Ÿäºæ˜¯ï¼Œæˆ‘ä»¬æ”¹å†™<code>GreetManager</code>ç±»ï¼Œåƒè¿™æ ·ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">public class GreetingManager&#123;</span><br><span class="line">    //åœ¨GreetingManagerç±»çš„å†…éƒ¨å£°æ˜delegate1å˜é‡</span><br><span class="line">    public GreetingDelegate delegate1;  </span><br><span class="line">    public void GreetPeople(string name, GreetingDelegate MakeGreeting) &#123;</span><br><span class="line">       MakeGreeting(name);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç°åœ¨ï¼Œæˆ‘ä»¬å¯ä»¥è¿™æ ·ä½¿ç”¨è¿™ä¸ªå§”æ‰˜å˜é‡ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">static void Main(string[] args) &#123;</span><br><span class="line">    GreetingManager gm = new  GreetingManager();</span><br><span class="line">    gm.delegate1 = EnglishGreeting;</span><br><span class="line">    gm.delegate1 += ChineseGreeting;</span><br><span class="line">    gm.GreetPeople(&quot;Jimmy Zhang&quot;, gm.delegate1);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¾“å‡ºä¸ºï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Morning, Jimmy Zhang</span><br><span class="line">æ—©ä¸Šå¥½, Jimmy Zhang</span><br></pre></td></tr></table></figure><p>å°½ç®¡è¿™æ ·åšæ²¡æœ‰ä»»ä½•é—®é¢˜ï¼Œä½†æˆ‘ä»¬å‘ç°è¿™æ¡è¯­å¥å¾ˆå¥‡æ€ªã€‚åœ¨è°ƒç”¨gm.GreetPeopleæ–¹æ³•çš„æ—¶å€™ï¼Œå†æ¬¡ä¼ é€’äº†<code>gm</code>çš„<code>delegate1</code>å­—æ®µï¼š</p><p><code>gm.GreetPeople(&quot;Jimmy Zhang&quot;, gm.delegate1);</code></p><p>æ—¢ç„¶å¦‚æ­¤ï¼Œæˆ‘ä»¬ä½•ä¸ä¿®æ”¹ <code>GreetingManager</code> ç±»æˆè¿™æ ·ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">public class GreetingManager&#123;</span><br><span class="line">    //åœ¨GreetingManagerç±»çš„å†…éƒ¨å£°æ˜delegate1å˜é‡</span><br><span class="line">    public GreetingDelegate delegate1;  </span><br><span class="line">    public void GreetPeople(string name) &#123;</span><br><span class="line">        if(delegate1!=null)&#123;     //å¦‚æœæœ‰æ–¹æ³•æ³¨å†Œå§”æ‰˜å˜é‡</span><br><span class="line">          delegate1(name);      //é€šè¿‡å§”æ‰˜è°ƒç”¨æ–¹æ³•</span><br><span class="line">       &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨å®¢æˆ·ç«¯ï¼Œè°ƒç”¨çœ‹ä¸Šå»æ›´ç®€æ´ä¸€äº›ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">static void Main(string[] args) &#123;</span><br><span class="line">    GreetingManager gm = new  GreetingManager();</span><br><span class="line">    gm.delegate1 = EnglishGreeting;</span><br><span class="line">    gm.delegate1 += ChineseGreeting;</span><br><span class="line">    gm.GreetPeople(&quot;Jimmy Zhang&quot;);      //æ³¨æ„ï¼Œè¿™æ¬¡ä¸éœ€è¦å†ä¼ é€’ delegate1å˜é‡</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¾“å‡ºä¸ºï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Morning, Jimmy Zhang</span><br><span class="line">æ—©ä¸Šå¥½, Jimmy Zhang</span><br></pre></td></tr></table></figure><p>å°½ç®¡è¿™æ ·è¾¾åˆ°äº†æˆ‘ä»¬è¦çš„æ•ˆæœï¼Œä½†æ˜¯è¿˜æ˜¯å­˜åœ¨ç€é—®é¢˜ï¼š</p><p>åœ¨è¿™é‡Œï¼Œ<code>delegate1</code>å’Œæˆ‘ä»¬å¹³æ—¶ç”¨çš„<code>string</code>ç±»å‹çš„å˜é‡æ²¡æœ‰ä»€ä¹ˆåˆ†åˆ«ï¼Œè€Œæˆ‘ä»¬çŸ¥é“ï¼Œå¹¶ä¸æ˜¯æ‰€æœ‰çš„å­—æ®µéƒ½åº”è¯¥å£°æ˜æˆ<code>public</code>ï¼Œåˆé€‚çš„åšæ³•æ˜¯åº”è¯¥<code>public</code>çš„æ—¶å€™<code>public</code>ï¼Œåº”è¯¥<code>private</code>çš„æ—¶å€™<code>private</code>ã€‚</p><p>æˆ‘ä»¬å…ˆçœ‹çœ‹å¦‚æœæŠŠ <code>delegate1</code> å£°æ˜ä¸º <code>private</code>ä¼šæ€æ ·ï¼Ÿç»“æœå°±æ˜¯ï¼š<strong>è¿™ç®€ç›´å°±æ˜¯åœ¨æç¬‘ã€‚å› ä¸ºå£°æ˜å§”æ‰˜çš„ç›®çš„å°±æ˜¯ä¸ºäº†æŠŠå®ƒæš´éœ²åœ¨ç±»çš„å®¢æˆ·ç«¯è¿›è¡Œæ–¹æ³•çš„æ³¨å†Œï¼Œä½ æŠŠå®ƒå£°æ˜ä¸º<code>private</code>äº†ï¼Œå®¢æˆ·ç«¯å¯¹å®ƒæ ¹æœ¬å°±ä¸å¯è§ï¼Œé‚£å®ƒè¿˜æœ‰ä»€ä¹ˆç”¨ï¼Ÿ</strong></p><p>å†çœ‹çœ‹æŠŠ<code>delegate1</code> å£°æ˜ä¸º <code>public</code> ä¼šæ€æ ·ï¼Ÿç»“æœå°±æ˜¯ï¼š<strong>åœ¨å®¢æˆ·ç«¯å¯ä»¥å¯¹å®ƒè¿›è¡Œéšæ„çš„èµ‹å€¼ç­‰æ“ä½œï¼Œä¸¥é‡ç ´åå¯¹è±¡çš„å°è£…æ€§ã€‚</strong></p><p>æœ€åï¼Œç¬¬ä¸€ä¸ªæ–¹æ³•æ³¨å†Œç”¨â€œ<code>=</code>â€ï¼Œæ˜¯èµ‹å€¼è¯­æ³•ï¼Œå› ä¸ºè¦è¿›è¡Œå®ä¾‹åŒ–ï¼Œç¬¬äºŒä¸ªæ–¹æ³•æ³¨å†Œåˆ™ç”¨çš„æ˜¯â€œ<code>+=</code>â€ã€‚ä½†æ˜¯ï¼Œä¸<strong>ç®¡æ˜¯èµ‹å€¼è¿˜æ˜¯æ³¨å†Œï¼Œéƒ½æ˜¯å°†æ–¹æ³•ç»‘å®šåˆ°å§”æ‰˜ä¸Šï¼Œé™¤äº†è°ƒç”¨æ—¶å…ˆåé¡ºåºä¸åŒï¼Œå†æ²¡æœ‰ä»»ä½•çš„åˆ†åˆ«ï¼Œè¿™æ ·ä¸æ˜¯è®©äººè§‰å¾—å¾ˆåˆ«æ‰­ä¹ˆï¼Ÿ</strong></p><p>ç°åœ¨æˆ‘ä»¬æƒ³æƒ³ï¼Œå¦‚æœ<code>delegate1</code>ä¸æ˜¯ä¸€ä¸ªå§”æ‰˜ç±»å‹ï¼Œè€Œæ˜¯ä¸€ä¸ª<code>string</code>ç±»å‹ï¼Œä½ ä¼šæ€ä¹ˆåšï¼Ÿ<strong>ç­”æ¡ˆæ˜¯ä½¿ç”¨å±æ€§å¯¹å­—æ®µè¿›è¡Œå°è£…ã€‚</strong></p><p>äºæ˜¯ï¼Œ<code>Event</code>å‡ºåœºäº†ï¼Œå®ƒå°è£…äº†å§”æ‰˜ç±»å‹çš„å˜é‡ï¼Œä½¿å¾—ï¼š<strong>åœ¨ç±»çš„å†…éƒ¨ï¼Œä¸ç®¡ä½ å£°æ˜å®ƒæ˜¯<code>public</code>è¿˜æ˜¯<code>protected</code>ï¼Œå®ƒæ€»æ˜¯<code>private</code>çš„ã€‚åœ¨ç±»çš„å¤–éƒ¨ï¼Œæ³¨å†Œâ€œ<code>+=</code>â€å’Œæ³¨é”€â€œ<code>-=</code>â€çš„è®¿é—®é™å®šç¬¦ä¸ä½ åœ¨å£°æ˜äº‹ä»¶æ—¶ä½¿ç”¨çš„è®¿é—®ç¬¦ç›¸åŒã€‚</strong></p><p>æˆ‘ä»¬æ”¹å†™<code>GreetingManager</code>ç±»ï¼Œå®ƒå˜æˆäº†è¿™ä¸ªæ ·å­ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">public class GreetingManager&#123;</span><br><span class="line">    //è¿™ä¸€æ¬¡æˆ‘ä»¬åœ¨è¿™é‡Œå£°æ˜ä¸€ä¸ªäº‹ä»¶</span><br><span class="line">    public event GreetingDelegate MakeGreet;</span><br><span class="line">    public void GreetPeople(string name) &#123;</span><br><span class="line">        MakeGreet(name);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¾ˆå®¹æ˜“æ³¨æ„åˆ°ï¼š<code>MakeGreet</code> äº‹ä»¶çš„å£°æ˜ä¸ä¹‹å‰å§”æ‰˜å˜é‡<code>delegate1</code>çš„å£°æ˜å”¯ä¸€çš„åŒºåˆ«æ˜¯å¤šäº†ä¸€ä¸ª<code>event</code>å…³é”®å­—ã€‚çœ‹åˆ°è¿™é‡Œï¼Œåœ¨ç»“åˆä¸Šé¢çš„è®²è§£ï¼Œä½ åº”è¯¥æ˜ç™½åˆ°ï¼š<strong>äº‹ä»¶å…¶å®æ²¡ä»€ä¹ˆä¸å¥½ç†è§£çš„ï¼Œå£°æ˜ä¸€ä¸ªäº‹ä»¶ä¸è¿‡ç±»ä¼¼äºå£°æ˜ä¸€ä¸ªè¿›è¡Œäº†å°è£…çš„å§”æ‰˜ç±»å‹çš„å˜é‡è€Œå·²ã€‚</strong></p><p>ä¸ºäº†è¯æ˜ä¸Šé¢çš„æ¨è®ºï¼Œå¦‚æœæˆ‘ä»¬åƒä¸‹é¢è¿™æ ·æ”¹å†™<code>Main</code>æ–¹æ³•ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">static void Main(string[] args) &#123;</span><br><span class="line">    GreetingManager gm = new  GreetingManager();</span><br><span class="line">    gm.MakeGreet = EnglishGreeting;         // ç¼–è¯‘é”™è¯¯1</span><br><span class="line">    gm.MakeGreet += ChineseGreeting;</span><br><span class="line">    gm.GreetPeople(&quot;Jimmy Zhang&quot;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¼šå¾—åˆ°ç¼–è¯‘é”™è¯¯ï¼š<code>äº‹ä»¶â€œDelegate.GreetingManager.MakeGreetâ€åªèƒ½å‡ºç°åœ¨ += æˆ– -= çš„å·¦è¾¹(ä»ç±»å‹â€œDelegate.GreetingManagerâ€ä¸­ä½¿ç”¨æ—¶é™¤å¤–)ã€‚</code></p><h2 id="äº‹ä»¶å’Œå§”æ‰˜çš„ç¼–è¯‘ä»£ç "><a href="#äº‹ä»¶å’Œå§”æ‰˜çš„ç¼–è¯‘ä»£ç " class="headerlink" title="äº‹ä»¶å’Œå§”æ‰˜çš„ç¼–è¯‘ä»£ç "></a>äº‹ä»¶å’Œå§”æ‰˜çš„ç¼–è¯‘ä»£ç </h2><p>è¿™æ—¶å€™ï¼Œæˆ‘ä»¬æ³¨é‡Šæ‰ç¼–è¯‘é”™è¯¯çš„è¡Œï¼Œç„¶åé‡æ–°è¿›è¡Œç¼–è¯‘ï¼Œå†å€ŸåŠ©Reflactoræ¥å¯¹ <code>event</code>çš„å£°æ˜è¯­å¥åšä¸€æ¢ç©¶ï¼Œçœ‹çœ‹ä¸ºä»€ä¹ˆä¼šå‘ç”Ÿè¿™æ ·çš„é”™è¯¯ï¼š</p><p><code>public event GreetingDelegate MakeGreet;</code></p><p><img src="http://www.tracefact.net/graph/delegate/01.gif" alt=" "></p><p>å¯ä»¥çœ‹åˆ°ï¼Œå®é™…ä¸Šå°½ç®¡æˆ‘ä»¬åœ¨<code>GreetingManager</code>é‡Œå°† <code>MakeGreet</code> å£°æ˜ä¸º<code>public</code>ï¼Œä½†æ˜¯ï¼Œå®é™…ä¸Š<code>MakeGreet</code>ä¼šè¢«ç¼–è¯‘æˆ ç§æœ‰å­—æ®µï¼Œéš¾æ€ªä¼šå‘ç”Ÿä¸Šé¢çš„ç¼–è¯‘é”™è¯¯äº†ï¼Œå› ä¸ºå®ƒæ ¹æœ¬å°±ä¸å…è®¸åœ¨<code>GreetingManager</code>ç±»çš„å¤–é¢ä»¥èµ‹å€¼çš„æ–¹å¼è®¿é—®ï¼Œä»è€ŒéªŒè¯äº†æˆ‘ä»¬ä¸Šé¢æ‰€åšçš„æ¨è®ºã€‚</p><p>æˆ‘ä»¬å†è¿›ä¸€æ­¥çœ‹ä¸‹<code>MakeGreet</code>æ‰€äº§ç”Ÿçš„ä»£ç ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">private GreetingDelegate MakeGreet; //å¯¹äº‹ä»¶çš„å£°æ˜ å®é™…æ˜¯ å£°æ˜ä¸€ä¸ªç§æœ‰çš„å§”æ‰˜å˜é‡</span><br><span class="line">[MethodImpl(MethodImplOptions.Synchronized)]</span><br><span class="line">public void add_MakeGreet(GreetingDelegate value)&#123;</span><br><span class="line">    this.MakeGreet = (GreetingDelegate) Delegate.Combine(this.MakeGreet, value);</span><br><span class="line">&#125;</span><br><span class="line">[MethodImpl(MethodImplOptions.Synchronized)]</span><br><span class="line">public void remove_MakeGreet(GreetingDelegate value)&#123;</span><br><span class="line">    this.MakeGreet = (GreetingDelegate) Delegate.Remove(this.MakeGreet, value);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç°åœ¨å·²ç»å¾ˆæ˜ç¡®äº†ï¼š<strong><code>MakeGreet</code>äº‹ä»¶ç¡®å®æ˜¯ä¸€ä¸ª<code>GreetingDelegate</code>ç±»å‹çš„å§”æ‰˜ï¼Œåªä¸è¿‡ä¸ç®¡æ˜¯ä¸æ˜¯å£°æ˜ä¸º<code>public</code>ï¼Œå®ƒæ€»æ˜¯è¢«å£°æ˜ä¸º<code>private</code>ã€‚å¦å¤–ï¼Œå®ƒè¿˜æœ‰ä¸¤ä¸ªæ–¹æ³•ï¼Œåˆ†åˆ«æ˜¯<code>add_MakeGreet</code>å’Œ<code>remove_MakeGreet</code>ï¼Œè¿™ä¸¤ä¸ªæ–¹æ³•åˆ†åˆ«ç”¨äºæ³¨å†Œå§”æ‰˜ç±»å‹çš„æ–¹æ³•å’Œå–æ¶ˆæ³¨å†Œã€‚</strong>å®é™…ä¸Šä¹Ÿå°±æ˜¯ï¼š â€œ<code>+=</code> â€å¯¹åº” <code>add_MakeGreet</code>ï¼Œâ€œ<code>-=</code>â€å¯¹åº”<code>remove_MakeGreet</code>ã€‚è€Œè¿™ä¸¤ä¸ªæ–¹æ³•çš„è®¿é—®é™åˆ¶å–å†³äºå£°æ˜äº‹ä»¶æ—¶çš„è®¿é—®é™åˆ¶ç¬¦ã€‚</p><p>åœ¨<code>add_MakeGreet()</code>æ–¹æ³•å†…éƒ¨ï¼Œå®é™…ä¸Šè°ƒç”¨äº†<code>System.Delegate</code>çš„<code>Combine()</code>é™æ€æ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•ç”¨äºå°†å½“å‰çš„å˜é‡æ·»åŠ åˆ°å§”æ‰˜é“¾è¡¨ä¸­ã€‚æˆ‘ä»¬å‰é¢æåˆ°è¿‡ä¸¤æ¬¡ï¼Œè¯´å§”æ‰˜å®é™…ä¸Šæ˜¯ä¸€ä¸ªç±»ï¼Œåœ¨æˆ‘ä»¬å®šä¹‰å§”æ‰˜çš„æ—¶å€™ï¼š</p><p><code>public delegate void GreetingDelegate(string name);</code></p><p>å½“ç¼–è¯‘å™¨é‡åˆ°è¿™æ®µä»£ç çš„æ—¶å€™ï¼Œä¼šç”Ÿæˆä¸‹é¢è¿™æ ·ä¸€ä¸ªå®Œæ•´çš„ç±»ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">public sealed class GreetingDelegate:System.MulticastDelegate&#123;</span><br><span class="line">    public GreetingDelegate(object @object, IntPtr method);</span><br><span class="line">    public virtual IAsyncResult BeginInvoke(string name, AsyncCallback callback, object @object);</span><br><span class="line">    public virtual void EndInvoke(IAsyncResult result);</span><br><span class="line">    public virtual void Invoke(string name);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="http://www.tracefact.net/graph/delegate/02.gif" alt=" "></p><blockquote><p>å…³äºè¿™ä¸ªç±»çš„æ›´æ·±å…¥å†…å®¹ï¼Œå¯ä»¥å‚é˜…ã€ŠCLR Via C#ã€‹ç­‰ç›¸å…³ä¹¦ç±ï¼Œè¿™é‡Œå°±ä¸å†è®¨è®ºäº†ã€‚</p></blockquote><h2 id="å§”æ‰˜ã€äº‹ä»¶ä¸Observerè®¾è®¡æ¨¡å¼"><a href="#å§”æ‰˜ã€äº‹ä»¶ä¸Observerè®¾è®¡æ¨¡å¼" class="headerlink" title="å§”æ‰˜ã€äº‹ä»¶ä¸Observerè®¾è®¡æ¨¡å¼"></a>å§”æ‰˜ã€äº‹ä»¶ä¸Observerè®¾è®¡æ¨¡å¼</h2><h3 id="èŒƒä¾‹è¯´æ˜"><a href="#èŒƒä¾‹è¯´æ˜" class="headerlink" title="èŒƒä¾‹è¯´æ˜"></a>èŒƒä¾‹è¯´æ˜</h3><p>ä¸Šé¢çš„ä¾‹å­å·²ä¸è¶³ä»¥å†è¿›è¡Œä¸‹é¢çš„è®²è§£äº†ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªæ–°çš„èŒƒä¾‹ï¼Œå› ä¸ºä¹‹å‰å·²ç»ä»‹ç»äº†å¾ˆå¤šçš„å†…å®¹ï¼Œæ‰€ä»¥æœ¬èŠ‚çš„è¿›åº¦ä¼šç¨å¾®å¿«ä¸€äº›ï¼š</p><p>å‡è®¾æˆ‘ä»¬æœ‰ä¸ªé«˜æ¡£çš„çƒ­æ°´å™¨ï¼Œæˆ‘ä»¬ç»™å®ƒé€šä¸Šç”µï¼Œå½“æ°´æ¸©è¶…è¿‡95åº¦çš„æ—¶å€™ï¼š</p><ol><li>æ‰¬å£°å™¨ä¼šå¼€å§‹å‘å‡ºè¯­éŸ³ï¼Œå‘Šè¯‰ä½ æ°´çš„æ¸©åº¦ï¼›</li><li>æ¶²æ™¶å±ä¹Ÿä¼šæ”¹å˜æ°´æ¸©çš„æ˜¾ç¤ºï¼Œæ¥æç¤ºæ°´å·²ç»å¿«çƒ§å¼€äº†ã€‚</li></ol><p>ç°åœ¨æˆ‘ä»¬éœ€è¦å†™ä¸ªç¨‹åºæ¥æ¨¡æ‹Ÿè¿™ä¸ªçƒ§æ°´çš„è¿‡ç¨‹ï¼Œæˆ‘ä»¬å°†å®šä¹‰ä¸€ä¸ªç±»æ¥ä»£è¡¨çƒ­æ°´å™¨ï¼Œæˆ‘ä»¬ç®¡å®ƒå«ï¼š<code>Heater</code>ï¼Œå®ƒæœ‰ä»£è¡¨æ°´æ¸©çš„å­—æ®µï¼Œå«åš<code>temperature</code>ï¼›å½“ç„¶ï¼Œè¿˜æœ‰å¿…ä¸å¯å°‘çš„ç»™æ°´åŠ çƒ­æ–¹æ³•<code>BoilWater()</code>ï¼Œä¸€ä¸ªå‘å‡ºè¯­éŸ³è­¦æŠ¥çš„æ–¹æ³•<code>MakeAlert()</code>ï¼Œä¸€ä¸ªæ˜¾ç¤ºæ°´æ¸©çš„æ–¹æ³•ï¼Œ<code>ShowMsg()</code>ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">namespace Delegate &#123;</span><br><span class="line">    class Heater &#123;</span><br><span class="line">        private int temperature; // æ°´æ¸©</span><br><span class="line">        // çƒ§æ°´</span><br><span class="line">        public void BoilWater() &#123;</span><br><span class="line">            for (int i = 0; i &lt;= 100; i++) &#123;</span><br><span class="line">               temperature = i;</span><br><span class="line">               if (temperature &gt; 95) &#123;</span><br><span class="line">                   MakeAlert(temperature);</span><br><span class="line">                   ShowMsg(temperature);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    // å‘å‡ºè¯­éŸ³è­¦æŠ¥</span><br><span class="line">    private void MakeAlert(int param) &#123;</span><br><span class="line">       Console.WriteLine(&quot;Alarmï¼šå˜€å˜€å˜€ï¼Œæ°´å·²ç» &#123;0&#125; åº¦äº†ï¼š&quot; , param);</span><br><span class="line">    &#125;</span><br><span class="line">    // æ˜¾ç¤ºæ°´æ¸©</span><br><span class="line">    private void ShowMsg(int param) &#123;</span><br><span class="line">       Console.WriteLine(&quot;Displayï¼šæ°´å¿«å¼€äº†ï¼Œå½“å‰æ¸©åº¦ï¼š&#123;0&#125;åº¦ã€‚&quot; , param);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">    class Program &#123;</span><br><span class="line">        static void Main() &#123;</span><br><span class="line">           Heater ht = new Heater();</span><br><span class="line">           ht.BoilWater();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="Observerè®¾è®¡æ¨¡å¼ç®€ä»‹"><a href="#Observerè®¾è®¡æ¨¡å¼ç®€ä»‹" class="headerlink" title="Observerè®¾è®¡æ¨¡å¼ç®€ä»‹"></a>Observerè®¾è®¡æ¨¡å¼ç®€ä»‹</h3><p>ä¸Šé¢çš„ä¾‹å­æ˜¾ç„¶èƒ½å®Œæˆæˆ‘ä»¬ä¹‹å‰æè¿°çš„å·¥ä½œï¼Œä½†æ˜¯å´å¹¶ä¸å¤Ÿå¥½ã€‚ç°åœ¨å‡è®¾çƒ­æ°´å™¨ç”±ä¸‰éƒ¨åˆ†ç»„æˆï¼šçƒ­æ°´å™¨ã€è­¦æŠ¥å™¨ã€æ˜¾ç¤ºå™¨ï¼Œå®ƒä»¬æ¥è‡ªäºä¸åŒå‚å•†å¹¶è¿›è¡Œäº†ç»„è£…ã€‚é‚£ä¹ˆï¼Œåº”è¯¥æ˜¯<strong>çƒ­æ°´å™¨</strong>ä»…ä»…è´Ÿè´£çƒ§æ°´ï¼Œå®ƒä¸èƒ½å‘å‡ºè­¦æŠ¥ä¹Ÿä¸èƒ½æ˜¾ç¤ºæ°´æ¸©ï¼›åœ¨æ°´çƒ§å¼€æ—¶ç”±<strong>è­¦æŠ¥å™¨</strong>å‘å‡ºè­¦æŠ¥ã€<strong>æ˜¾ç¤ºå™¨</strong>æ˜¾ç¤ºæç¤ºå’Œæ°´æ¸©ã€‚</p><p>è¿™æ—¶å€™ï¼Œä¸Šé¢çš„ä¾‹å­å°±åº”è¯¥å˜æˆè¿™ä¸ªæ ·å­ï¼š    </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">// çƒ­æ°´å™¨</span><br><span class="line">public class Heater &#123; </span><br><span class="line">    private int temperature;</span><br><span class="line">    // çƒ§æ°´</span><br><span class="line">    private void BoilWater() &#123;</span><br><span class="line">       for (int i = 0; i &lt;= 100; i++) &#123;</span><br><span class="line">           temperature = i;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">// è­¦æŠ¥å™¨</span><br><span class="line">public class Alarm&#123;</span><br><span class="line">    private void MakeAlert(int param) &#123;</span><br><span class="line">       Console.WriteLine(&quot;Alarmï¼šå˜€å˜€å˜€ï¼Œæ°´å·²ç» &#123;0&#125; åº¦äº†ï¼š&quot; , param);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">// æ˜¾ç¤ºå™¨</span><br><span class="line">public class Display&#123;</span><br><span class="line">    private void ShowMsg(int param) &#123;</span><br><span class="line">       Console.WriteLine(&quot;Displayï¼šæ°´å·²çƒ§å¼€ï¼Œå½“å‰æ¸©åº¦ï¼š&#123;0&#125;åº¦ã€‚&quot; , param);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™é‡Œå°±å‡ºç°äº†ä¸€ä¸ªé—®é¢˜ï¼šå¦‚ä½•åœ¨æ°´çƒ§å¼€çš„æ—¶å€™é€šçŸ¥æŠ¥è­¦å™¨å’Œæ˜¾ç¤ºå™¨ï¼Ÿåœ¨ç»§ç»­è¿›è¡Œä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆäº†è§£ä¸€ä¸‹<code>Observer</code>è®¾è®¡æ¨¡å¼ï¼ŒObserverè®¾è®¡æ¨¡å¼ä¸­ä¸»è¦åŒ…æ‹¬å¦‚ä¸‹ä¸¤ç±»å¯¹è±¡ï¼š</p><ol><li><code>Subject</code>ï¼šç›‘è§†å¯¹è±¡ï¼Œå®ƒå¾€å¾€åŒ…å«ç€å…¶ä»–å¯¹è±¡æ‰€æ„Ÿå…´è¶£çš„å†…å®¹ã€‚åœ¨æœ¬èŒƒä¾‹ä¸­ï¼Œçƒ­æ°´å™¨å°±æ˜¯ä¸€ä¸ªç›‘è§†å¯¹è±¡ï¼Œå®ƒåŒ…å«çš„å…¶ä»–å¯¹è±¡æ‰€æ„Ÿå…´è¶£çš„å†…å®¹ï¼Œå°±æ˜¯<code>temprature</code>å­—æ®µï¼Œå½“è¿™ä¸ªå­—æ®µçš„å€¼å¿«åˆ°100æ—¶ï¼Œä¼šä¸æ–­æŠŠæ•°æ®å‘ç»™ç›‘è§†å®ƒçš„å¯¹è±¡ã€‚</li><li><code>Observer</code>ï¼šç›‘è§†è€…ï¼Œå®ƒç›‘è§†<code>Subject</code>ï¼Œå½“<code>Subject</code>ä¸­çš„æŸä»¶äº‹å‘ç”Ÿçš„æ—¶å€™ï¼Œä¼šå‘ŠçŸ¥<code>Observer</code>ï¼Œè€Œ<code>Observer</code>åˆ™ä¼šé‡‡å–ç›¸åº”çš„è¡ŒåŠ¨ã€‚åœ¨æœ¬èŒƒä¾‹ä¸­ï¼Œ<code>Observer</code>æœ‰è­¦æŠ¥å™¨å’Œæ˜¾ç¤ºå™¨ï¼Œå®ƒä»¬é‡‡å–çš„è¡ŒåŠ¨åˆ†åˆ«æ˜¯å‘å‡ºè­¦æŠ¥å’Œæ˜¾ç¤ºæ°´æ¸©ã€‚</li></ol><p>åœ¨æœ¬ä¾‹ä¸­ï¼Œäº‹æƒ…å‘ç”Ÿçš„é¡ºåºåº”è¯¥æ˜¯è¿™æ ·çš„ï¼š</p><ol><li>è­¦æŠ¥å™¨å’Œæ˜¾ç¤ºå™¨å‘Šè¯‰çƒ­æ°´å™¨ï¼Œå®ƒå¯¹å®ƒçš„æ¸©åº¦æ¯”è¾ƒæ„Ÿå…´è¶£(æ³¨å†Œ)ã€‚</li><li>çƒ­æ°´å™¨çŸ¥é“åä¿ç•™å¯¹è­¦æŠ¥å™¨å’Œæ˜¾ç¤ºå™¨çš„å¼•ç”¨ã€‚</li><li>çƒ­æ°´å™¨è¿›è¡Œçƒ§æ°´è¿™ä¸€åŠ¨ä½œï¼Œå½“æ°´æ¸©è¶…è¿‡95åº¦æ—¶ï¼Œé€šè¿‡å¯¹è­¦æŠ¥å™¨å’Œæ˜¾ç¤ºå™¨çš„å¼•ç”¨ï¼Œè‡ªåŠ¨è°ƒç”¨è­¦æŠ¥å™¨çš„<code>MakeAlert()</code>æ–¹æ³•ã€æ˜¾ç¤ºå™¨çš„<code>ShowMsg()</code>æ–¹æ³•ã€‚</li></ol><p>ç±»ä¼¼è¿™æ ·çš„ä¾‹å­æ˜¯å¾ˆå¤šçš„ï¼ŒGOFå¯¹å®ƒè¿›è¡Œäº†æŠ½è±¡ï¼Œç§°ä¸º<code>Observer</code>è®¾è®¡æ¨¡å¼ï¼š<strong><code>Observer</code>è®¾è®¡æ¨¡å¼æ˜¯ä¸ºäº†å®šä¹‰å¯¹è±¡é—´çš„ä¸€ç§ä¸€å¯¹å¤šçš„ä¾èµ–å…³ç³»ï¼Œä»¥ä¾¿äºå½“ä¸€ä¸ªå¯¹è±¡çš„çŠ¶æ€æ”¹å˜æ—¶ï¼Œå…¶ä»–ä¾èµ–äºå®ƒçš„å¯¹è±¡ä¼šè¢«è‡ªåŠ¨å‘ŠçŸ¥å¹¶æ›´æ–°ã€‚<code>Observer</code>æ¨¡å¼æ˜¯ä¸€ç§æ¾è€¦åˆçš„è®¾è®¡æ¨¡å¼ã€‚</strong></p><h3 id="å®ç°èŒƒä¾‹çš„Observerè®¾è®¡æ¨¡å¼"><a href="#å®ç°èŒƒä¾‹çš„Observerè®¾è®¡æ¨¡å¼" class="headerlink" title="å®ç°èŒƒä¾‹çš„Observerè®¾è®¡æ¨¡å¼"></a>å®ç°èŒƒä¾‹çš„Observerè®¾è®¡æ¨¡å¼</h3><p>æˆ‘ä»¬ä¹‹å‰å·²ç»å¯¹å§”æ‰˜å’Œäº‹ä»¶ä»‹ç»å¾ˆå¤šäº†ï¼Œç°åœ¨å†™ä»£ç åº”è¯¥å¾ˆå®¹æ˜“äº†ï¼Œç°åœ¨åœ¨è¿™é‡Œç›´æ¥ç»™å‡ºä»£ç ï¼Œå¹¶åœ¨æ³¨é‡Šä¸­åŠ ä»¥è¯´æ˜ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">using System;</span><br><span class="line">using System.Collections.Generic;</span><br><span class="line">using System.Text;</span><br><span class="line">namespace Delegate &#123;</span><br><span class="line">    // çƒ­æ°´å™¨</span><br><span class="line">    public class Heater &#123;</span><br><span class="line">       private int temperature;</span><br><span class="line">       public delegate void BoilHandler(int param);   //å£°æ˜å§”æ‰˜</span><br><span class="line">       public event BoilHandler BoilEvent;        //å£°æ˜äº‹ä»¶</span><br><span class="line">       // çƒ§æ°´</span><br><span class="line">       public void BoilWater() &#123;</span><br><span class="line">           for (int i = 0; i &lt;= 100; i++) &#123;</span><br><span class="line">              temperature = i;</span><br><span class="line">              if (temperature &gt; 95) &#123;</span><br><span class="line">                  if (BoilEvent != null) &#123; //å¦‚æœæœ‰å¯¹è±¡æ³¨å†Œ</span><br><span class="line">                      BoilEvent(temperature);  //è°ƒç”¨æ‰€æœ‰æ³¨å†Œå¯¹è±¡çš„æ–¹æ³•</span><br><span class="line">                  &#125;</span><br><span class="line">              &#125;</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    // è­¦æŠ¥å™¨</span><br><span class="line">    public class Alarm &#123;</span><br><span class="line">       public void MakeAlert(int param) &#123;</span><br><span class="line">           Console.WriteLine(&quot;Alarmï¼šå˜€å˜€å˜€ï¼Œæ°´å·²ç» &#123;0&#125; åº¦äº†ï¼š&quot;, param);</span><br><span class="line">       &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    // æ˜¾ç¤ºå™¨</span><br><span class="line">    public class Display &#123;</span><br><span class="line">       public static void ShowMsg(int param) &#123; //é™æ€æ–¹æ³•</span><br><span class="line">           Console.WriteLine(&quot;Displayï¼šæ°´å¿«çƒ§å¼€äº†ï¼Œå½“å‰æ¸©åº¦ï¼š&#123;0&#125;åº¦ã€‚&quot;, param);</span><br><span class="line">       &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    class Program &#123;</span><br><span class="line">       static void Main() &#123;</span><br><span class="line">           Heater heater = new Heater();</span><br><span class="line">           Alarm alarm = new Alarm();</span><br><span class="line">           heater.BoilEvent += alarm.MakeAlert;    //æ³¨å†Œæ–¹æ³•</span><br><span class="line">           heater.BoilEvent += (new Alarm()).MakeAlert;   //ç»™åŒ¿åå¯¹è±¡æ³¨å†Œæ–¹æ³•</span><br><span class="line">           heater.BoilEvent += Display.ShowMsg;       //æ³¨å†Œé™æ€æ–¹æ³•</span><br><span class="line">           heater.BoilWater();   //çƒ§æ°´ï¼Œä¼šè‡ªåŠ¨è°ƒç”¨æ³¨å†Œè¿‡å¯¹è±¡çš„æ–¹æ³•</span><br><span class="line">       &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¾“å‡ºä¸ºï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Alarmï¼šå˜€å˜€å˜€ï¼Œæ°´å·²ç» 96 åº¦äº†ï¼š</span><br><span class="line">Alarmï¼šå˜€å˜€å˜€ï¼Œæ°´å·²ç» 96 åº¦äº†ï¼š</span><br><span class="line">Displayï¼šæ°´å¿«çƒ§å¼€äº†ï¼Œå½“å‰æ¸©åº¦ï¼š96åº¦ã€‚</span><br><span class="line">// çœç•¥...</span><br></pre></td></tr></table></figure><h2 id="Net-Frameworkä¸­çš„å§”æ‰˜ä¸äº‹ä»¶"><a href="#Net-Frameworkä¸­çš„å§”æ‰˜ä¸äº‹ä»¶" class="headerlink" title=".Net Frameworkä¸­çš„å§”æ‰˜ä¸äº‹ä»¶"></a>.Net Frameworkä¸­çš„å§”æ‰˜ä¸äº‹ä»¶</h2><p>å°½ç®¡ä¸Šé¢çš„èŒƒä¾‹å¾ˆå¥½åœ°å®Œæˆäº†æˆ‘ä»¬æƒ³è¦å®Œæˆçš„å·¥ä½œï¼Œä½†æ˜¯æˆ‘ä»¬ä¸ä»…ç–‘æƒ‘ï¼šä¸ºä»€ä¹ˆ.Net Framework ä¸­çš„äº‹ä»¶æ¨¡å‹å’Œä¸Šé¢çš„ä¸åŒï¼Ÿä¸ºä»€ä¹ˆæœ‰å¾ˆå¤šçš„EventArgså‚æ•°ï¼Ÿ</p><p>åœ¨å›ç­”ä¸Šé¢çš„é—®é¢˜ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆææ‡‚ .Net Frameworkçš„ç¼–ç è§„èŒƒï¼š</p><ul><li>å§”æ‰˜ç±»å‹çš„åç§°éƒ½åº”è¯¥ä»¥<code>EventHandler</code>ç»“æŸã€‚</li><li>å§”æ‰˜çš„åŸå‹å®šä¹‰ï¼šæœ‰ä¸€ä¸ª<code>void</code>è¿”å›å€¼ï¼Œå¹¶æ¥å—ä¸¤ä¸ªè¾“å…¥å‚æ•°ï¼šä¸€ä¸ª<code>Object</code> ç±»å‹ï¼Œä¸€ä¸ª <code>EventArgs</code>ç±»å‹(æˆ–ç»§æ‰¿è‡ª<code>EventArgs</code>)ã€‚</li><li>äº‹ä»¶çš„å‘½åä¸º å§”æ‰˜å»æ‰ <code>EventHandler</code>ä¹‹åå‰©ä½™çš„éƒ¨åˆ†ã€‚</li><li>ç»§æ‰¿è‡ª<code>EventArgs</code>çš„ç±»å‹åº”è¯¥ä»¥<code>EventArgs</code>ç»“å°¾ã€‚</li></ul><p>å†åšä¸€ä¸‹è¯´æ˜ï¼š</p><ol><li>å§”æ‰˜å£°æ˜åŸå‹ä¸­çš„<code>Object</code>ç±»å‹çš„å‚æ•°ä»£è¡¨äº†<code>Subject</code>ï¼Œä¹Ÿå°±æ˜¯ç›‘è§†å¯¹è±¡ï¼Œåœ¨æœ¬ä¾‹ä¸­æ˜¯ <code>Heater</code>(çƒ­æ°´å™¨)ã€‚å›è°ƒå‡½æ•°(æ¯”å¦‚<code>Alarm</code>çš„<code>MakeAlert</code>)å¯ä»¥é€šè¿‡å®ƒè®¿é—®è§¦å‘äº‹ä»¶çš„å¯¹è±¡(<code>Heater</code>)ã€‚</li><li><code>EventArgs</code> å¯¹è±¡åŒ…å«äº†<code>Observer</code>æ‰€æ„Ÿå…´è¶£çš„æ•°æ®ï¼Œåœ¨æœ¬ä¾‹ä¸­æ˜¯<code>temperature</code>ã€‚</li></ol><p><strong>ä¸Šé¢è¿™äº›å…¶å®ä¸ä»…ä»…æ˜¯ä¸ºäº†ç¼–ç è§„èŒƒè€Œå·²ï¼Œè¿™æ ·ä¹Ÿä½¿å¾—ç¨‹åºæœ‰æ›´å¤§çš„çµæ´»æ€§ã€‚</strong>æ¯”å¦‚è¯´ï¼Œå¦‚æœæˆ‘ä»¬ä¸å…‰æƒ³è·å¾—çƒ­æ°´å™¨çš„æ¸©åº¦ï¼Œè¿˜æƒ³åœ¨<code>Observer</code>ç«¯(è­¦æŠ¥å™¨æˆ–è€…æ˜¾ç¤ºå™¨)æ–¹æ³•ä¸­è·å¾—å®ƒçš„ç”Ÿäº§æ—¥æœŸã€å‹å·ã€ä»·æ ¼ï¼Œé‚£ä¹ˆå§”æ‰˜å’Œæ–¹æ³•çš„å£°æ˜éƒ½ä¼šå˜å¾—å¾ˆéº»çƒ¦ï¼Œè€Œå¦‚æœæˆ‘ä»¬å°†çƒ­æ°´å™¨çš„å¼•ç”¨ä¼ ç»™è­¦æŠ¥å™¨çš„æ–¹æ³•ï¼Œå°±å¯ä»¥åœ¨æ–¹æ³•ä¸­ç›´æ¥è®¿é—®çƒ­æ°´å™¨äº†ã€‚</p><p>ç°åœ¨æˆ‘ä»¬æ”¹å†™ä¹‹å‰çš„èŒƒä¾‹ï¼Œè®©å®ƒç¬¦åˆ .Net Framework çš„è§„èŒƒï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line">using System;</span><br><span class="line">using System.Collections.Generic;</span><br><span class="line">using System.Text;</span><br><span class="line">namespace Delegate &#123;</span><br><span class="line">    // çƒ­æ°´å™¨</span><br><span class="line">    public class Heater &#123;</span><br><span class="line">       private int temperature;</span><br><span class="line">       public string type = &quot;RealFire 001&quot;;       // æ·»åŠ å‹å·ä½œä¸ºæ¼”ç¤º</span><br><span class="line">       public string area = &quot;China Xian&quot;;         // æ·»åŠ äº§åœ°ä½œä¸ºæ¼”ç¤º</span><br><span class="line">       //å£°æ˜å§”æ‰˜</span><br><span class="line">       public delegate void BoiledEventHandler(Object sender, BoiledEventArgs e);</span><br><span class="line">       public event BoiledEventHandler Boiled; //å£°æ˜äº‹ä»¶</span><br><span class="line">       // å®šä¹‰BoiledEventArgsç±»ï¼Œä¼ é€’ç»™Observeræ‰€æ„Ÿå…´è¶£çš„ä¿¡æ¯</span><br><span class="line">       public class BoiledEventArgs : EventArgs &#123;</span><br><span class="line">           public readonly int temperature;</span><br><span class="line">           public BoiledEventArgs(int temperature) &#123;</span><br><span class="line">              this.temperature = temperature;</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;</span><br><span class="line">       // å¯ä»¥ä¾›ç»§æ‰¿è‡ª Heater çš„ç±»é‡å†™ï¼Œä»¥ä¾¿ç»§æ‰¿ç±»æ‹’ç»å…¶ä»–å¯¹è±¡å¯¹å®ƒçš„ç›‘è§†</span><br><span class="line">       protected virtual void OnBoiled(BoiledEventArgs e) &#123;</span><br><span class="line">           if (Boiled != null) &#123; // å¦‚æœæœ‰å¯¹è±¡æ³¨å†Œ</span><br><span class="line">              Boiled(this, e);  // è°ƒç”¨æ‰€æœ‰æ³¨å†Œå¯¹è±¡çš„æ–¹æ³•</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;</span><br><span class="line">       // çƒ§æ°´ã€‚</span><br><span class="line">       public void BoilWater() &#123;</span><br><span class="line">           for (int i = 0; i &lt;= 100; i++) &#123;</span><br><span class="line">              temperature = i;</span><br><span class="line">              if (temperature &gt; 95) &#123;</span><br><span class="line">                  //å»ºç«‹BoiledEventArgs å¯¹è±¡ã€‚</span><br><span class="line">                  BoiledEventArgs e = new BoiledEventArgs(temperature);</span><br><span class="line">                  OnBoiled(e);  // è°ƒç”¨ OnBoliedæ–¹æ³•</span><br><span class="line">              &#125;</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    // è­¦æŠ¥å™¨</span><br><span class="line">    public class Alarm &#123;</span><br><span class="line">       public void MakeAlert(Object sender, Heater.BoiledEventArgs e) &#123;</span><br><span class="line">           Heater heater = (Heater)sender;     //è¿™é‡Œæ˜¯ä¸æ˜¯å¾ˆç†Ÿæ‚‰å‘¢ï¼Ÿ</span><br><span class="line">           //è®¿é—® sender ä¸­çš„å…¬å…±å­—æ®µ</span><br><span class="line">           Console.WriteLine(&quot;Alarmï¼š&#123;0&#125; - &#123;1&#125;: &quot;, heater.area, heater.type);</span><br><span class="line">           Console.WriteLine(&quot;Alarm: å˜€å˜€å˜€ï¼Œæ°´å·²ç» &#123;0&#125; åº¦äº†ï¼š&quot;, e.temperature);</span><br><span class="line">           Console.WriteLine();</span><br><span class="line">       &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    // æ˜¾ç¤ºå™¨</span><br><span class="line">    public class Display &#123;</span><br><span class="line">       public static void ShowMsg(Object sender, Heater.BoiledEventArgs e) &#123;   //é™æ€æ–¹æ³•</span><br><span class="line">           Heater heater = (Heater)sender;</span><br><span class="line">           Console.WriteLine(&quot;Displayï¼š&#123;0&#125; - &#123;1&#125;: &quot;, heater.area, heater.type);</span><br><span class="line">           Console.WriteLine(&quot;Displayï¼šæ°´å¿«çƒ§å¼€äº†ï¼Œå½“å‰æ¸©åº¦ï¼š&#123;0&#125;åº¦ã€‚&quot;, e.temperature);</span><br><span class="line">           Console.WriteLine();</span><br><span class="line">       &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    class Program &#123;</span><br><span class="line">       static void Main() &#123;</span><br><span class="line">           Heater heater = new Heater();</span><br><span class="line">           Alarm alarm = new Alarm();</span><br><span class="line">           heater.Boiled += alarm.MakeAlert;   //æ³¨å†Œæ–¹æ³•</span><br><span class="line">           heater.Boiled += (new Alarm()).MakeAlert;      //ç»™åŒ¿åå¯¹è±¡æ³¨å†Œæ–¹æ³•</span><br><span class="line">           heater.Boiled += new Heater.BoiledEventHandler(alarm.MakeAlert);    //ä¹Ÿå¯ä»¥è¿™ä¹ˆæ³¨å†Œ</span><br><span class="line">           heater.Boiled += Display.ShowMsg;       //æ³¨å†Œé™æ€æ–¹æ³•</span><br><span class="line">           heater.BoilWater();   //çƒ§æ°´ï¼Œä¼šè‡ªåŠ¨è°ƒç”¨æ³¨å†Œè¿‡å¯¹è±¡çš„æ–¹æ³•</span><br><span class="line">       &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¾“å‡ºä¸ºï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Alarmï¼šChina Xian - RealFire 001:</span><br><span class="line">Alarm: å˜€å˜€å˜€ï¼Œæ°´å·²ç» 96 åº¦äº†ï¼š</span><br><span class="line">Alarmï¼šChina Xian - RealFire 001:</span><br><span class="line">Alarm: å˜€å˜€å˜€ï¼Œæ°´å·²ç» 96 åº¦äº†ï¼š</span><br><span class="line">Alarmï¼šChina Xian - RealFire 001:</span><br><span class="line">Alarm: å˜€å˜€å˜€ï¼Œæ°´å·²ç» 96 åº¦äº†ï¼š</span><br><span class="line">Displayï¼šChina Xian - RealFire 001:</span><br><span class="line">Displayï¼šæ°´å¿«çƒ§å¼€äº†ï¼Œå½“å‰æ¸©åº¦ï¼š96åº¦ã€‚</span><br><span class="line">// çœç•¥ ...</span><br></pre></td></tr></table></figure><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>åœ¨æœ¬æ–‡ä¸­æˆ‘é¦–å…ˆé€šè¿‡ä¸€ä¸ª<code>GreetingPeople</code>çš„å°ç¨‹åºå‘å¤§å®¶ä»‹ç»äº†å§”æ‰˜çš„æ¦‚å¿µã€å§”æ‰˜ç”¨æ¥åšä»€ä¹ˆï¼Œéšååˆå¼•å‡ºäº†äº‹ä»¶ï¼Œæ¥ç€å¯¹å§”æ‰˜ä¸äº‹ä»¶æ‰€äº§ç”Ÿçš„ä¸­é—´ä»£ç åšäº†ç²—ç•¥çš„è®²è¿°ã€‚</p><p>åœ¨ç¬¬äºŒä¸ªç¨å¾®å¤æ‚ç‚¹çš„çƒ­æ°´å™¨çš„èŒƒä¾‹ä¸­ï¼Œæˆ‘å‘å¤§å®¶ç®€è¦ä»‹ç»äº† <code>Observer</code>è®¾è®¡æ¨¡å¼ï¼Œå¹¶é€šè¿‡å®ç°è¿™ä¸ªèŒƒä¾‹å®Œæˆäº†è¯¥æ¨¡å¼ï¼Œéšåè®²è¿°äº†.Net Frameworkä¸­å§”æ‰˜ã€äº‹ä»¶çš„å®ç°æ–¹å¼ã€‚</p><h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><p>æ–‡ç« è½¬è½½è‡ª<a href="http://www.tracefact.net/csharp-programming/delegates-and-events-in-csharp.aspx" target="_blank" rel="noopener">å¼ å­é˜³ -ã€Š.NETä¹‹ç¾ã€‹</a></p>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;å¼•è¨€&quot;&gt;&lt;a href=&quot;#å¼•è¨€&quot; class=&quot;headerlink&quot; title=&quot;å¼•è¨€&quot;&gt;&lt;/a&gt;å¼•è¨€&lt;/h2&gt;&lt;p&gt;&lt;code&gt;delegate&lt;/code&gt; å’Œ &lt;code&gt;event&lt;/code&gt;åœ¨ .Net Frameworkä¸­çš„åº”ç”¨éå¸¸å¹¿æ³›ï¼Œç„¶è€Œï¼Œè¾ƒå¥½åœ°ç†è§£å§”æ‰˜å’Œäº‹ä»¶å¯¹å¾ˆå¤šæ¥è§¦C#æ—¶é—´ä¸é•¿çš„äººæ¥è¯´å¹¶ä¸å®¹æ˜“ã€‚æœ¬æ–‡ä¸­ï¼Œæˆ‘å°†é€šè¿‡ä¸¤ä¸ªèŒƒä¾‹ç”±æµ…å…¥æ·±åœ°è®²è¿°ä»€ä¹ˆæ˜¯å§”æ‰˜ã€ä¸ºä»€ä¹ˆè¦ä½¿ç”¨å§”æ‰˜ã€äº‹ä»¶çš„ç”±æ¥ã€.Net Frameworkä¸­çš„å§”æ‰˜å’Œäº‹ä»¶ã€å§”æ‰˜å’Œäº‹ä»¶å¯¹Observerè®¾è®¡æ¨¡å¼çš„æ„ä¹‰ï¼Œå¯¹å®ƒä»¬çš„ä¸­é—´ä»£ç ä¹Ÿåšäº†è®¨è®ºã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="Note" scheme="https://marara.xin/categories/Note/"/>
    
    
      <category term="C#" scheme="https://marara.xin/tags/C/"/>
    
  </entry>
  
  <entry>
    <title>å‘½ä»¤è¡Œã€ç»ˆç«¯å’Œ Git çš„ä»£ç†è®¾ç½®</title>
    <link href="https://marara.xin/2017/10/31/Proxy%20setting%20of%20CMD:Terminal/"/>
    <id>https://marara.xin/2017/10/31/Proxy setting of CMD:Terminal/</id>
    <published>2017-10-31T08:19:58.131Z</published>
    <updated>2017-10-31T08:19:58.131Z</updated>
    
    <content type="html"><![CDATA[<p>æœ¬æ–‡æ•´ç†äº† Windows å‘½ä»¤è¡Œ å’Œ Linux ç»ˆç«¯ä»¥åŠ Git ä¸­è®¾ç½®ä»£ç†çš„å‘½ä»¤ã€‚ä»¥æœ¬åœ° HTTP/HTTPS ä»£ç† <code>127.0.0.1:8118</code> å’Œ SOCKS5 ä»£ç† <code>127.0.0.1:1080</code> ä¸ºä¾‹ã€‚</p><a id="more"></a><h2 id="Windows-å‘½ä»¤è¡Œä»£ç†è®¾ç½®"><a href="#Windows-å‘½ä»¤è¡Œä»£ç†è®¾ç½®" class="headerlink" title="Windows å‘½ä»¤è¡Œä»£ç†è®¾ç½®"></a>Windows å‘½ä»¤è¡Œä»£ç†è®¾ç½®</h2><p>HTTP ä»£ç†è®¾ç½®ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">set http_proxy=http://127.0.0.1:8118</span><br><span class="line">set https_proxy=http://127.0.0.1:8118</span><br></pre></td></tr></table></figure><p>SOCKS5 ä»£ç†è®¾ç½®ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">set http_proxy=socks5://127.0.0.1:1080</span><br><span class="line">set https_proxy=socks5://127.0.0.1:1080</span><br></pre></td></tr></table></figure><p>å¯ä»¥é€šè¿‡ <code>echo %http_proxy%</code> å‘½ä»¤æŸ¥çœ‹æ˜¯å¦è®¾ç½®æˆåŠŸã€‚</p><p>å–æ¶ˆä»£ç†è®¾ç½®ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">set http_proxy=</span><br><span class="line">set https_proxy=</span><br></pre></td></tr></table></figure><h2 id="Linux-ç»ˆç«¯ä»£ç†è®¾ç½®"><a href="#Linux-ç»ˆç«¯ä»£ç†è®¾ç½®" class="headerlink" title="Linux ç»ˆç«¯ä»£ç†è®¾ç½®"></a>Linux ç»ˆç«¯ä»£ç†è®¾ç½®</h2><h3 id="ä¸´æ—¶ä»£ç†è®¾ç½®"><a href="#ä¸´æ—¶ä»£ç†è®¾ç½®" class="headerlink" title="ä¸´æ—¶ä»£ç†è®¾ç½®"></a>ä¸´æ—¶ä»£ç†è®¾ç½®</h3><p>Linux ç»ˆç«¯è®¾ç½® HTTP ä»£ç†ï¼ˆåªå¯¹å½“å‰ç»ˆç«¯æœ‰æ•ˆï¼‰ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">export</span> http_proxy=http://127.0.0.1:8118</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">export</span> https_proxy=http://127.0.0.1:8118</span></span><br></pre></td></tr></table></figure><p>Linux ä¸­è®¾ç½® SOCKS5 ä»£ç†ï¼ˆåªå¯¹å½“å‰ç»ˆç«¯æœ‰æ•ˆï¼‰ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">export</span> http_proxy=socks5://127.0.0.1:1080</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">export</span> https_proxy=socks5://127.0.0.1:1080</span></span><br></pre></td></tr></table></figure><p>è®¾ç½®ç»ˆç«¯ä¸­çš„ wgetã€curl ç­‰éƒ½èµ° SOCKS5 ä»£ç†ï¼ˆåªå¯¹å½“å‰ç»ˆç«¯æœ‰æ•ˆï¼‰ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">export</span> ALL_PROXY=socks5://127.0.0.1:1080</span></span><br></pre></td></tr></table></figure><p>Linux ç»ˆç«¯ä¸­å–æ¶ˆä»£ç†è®¾ç½®ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">unset</span> http_proxy</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">unset</span> https_proxy</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">unset</span> ALL_RPOXY</span></span><br></pre></td></tr></table></figure><h3 id="æ°¸ä¹…ä»£ç†è®¾ç½®"><a href="#æ°¸ä¹…ä»£ç†è®¾ç½®" class="headerlink" title="æ°¸ä¹…ä»£ç†è®¾ç½®"></a>æ°¸ä¹…ä»£ç†è®¾ç½®</h3><p>å°†ä»£ç†å‘½ä»¤å†™å…¥é…ç½®æ–‡ä»¶ <code>~/.profile</code> æˆ– <code>~/.bashrc</code> æˆ– <code>~/.zshrc</code> ä¸­ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> HTTP ä»£ç†è®¾ç½®</span></span><br><span class="line">export http_proxy=http://127.0.0.1:8118</span><br><span class="line">export https_proxy=http://127.0.0.1:8118</span><br></pre></td></tr></table></figure><p>æˆ–</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> SOCKS5 ä»£ç†è®¾ç½®</span></span><br><span class="line">export http_proxy=socks5://127.0.0.1:1080</span><br><span class="line">export https_proxy=socks5://127.0.0.1:1080</span><br></pre></td></tr></table></figure><p>æˆ–</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> å¼ºåˆ¶ç»ˆç«¯ä¸­çš„ wgetã€curl ç­‰éƒ½èµ° SOCKS5 ä»£ç†</span></span><br><span class="line">export ALL_PROXY=socks5://127.0.0.1:1080</span><br></pre></td></tr></table></figure><p>æˆ–ç®€åŒ–æ“ä½œ</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alias pc="export ALL_PROXY=socks5://127.0.0.1:1080; echo 'Proxy on';"</span><br></pre></td></tr></table></figure><h2 id="Git-è®¾ç½®ä»£ç†"><a href="#Git-è®¾ç½®ä»£ç†" class="headerlink" title="Git è®¾ç½®ä»£ç†"></a>Git è®¾ç½®ä»£ç†</h2><p>ä»£ç†æ ¼å¼ <code>[protocol://][user[:password]@]proxyhost[:port]</code><br>å‚è€ƒ <a href="https://git-scm.com/docs/git-config" target="_blank" rel="noopener">https://git-scm.com/docs/git-config</a></p><p>è®¾ç½® HTTP ä»£ç†ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git config --global http.proxy http://127.0.0.1:8118</span><br><span class="line">git config --global https.proxy http://127.0.0.1:8118</span><br></pre></td></tr></table></figure><p>è®¾ç½® SOCKS5 ä»£ç†ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git config --global http.proxy socks5://127.0.0.1:1080</span><br><span class="line">git config --global https.proxy socks5://127.0.0.1:1080</span><br></pre></td></tr></table></figure><p>Git å–æ¶ˆä»£ç†è®¾ç½®ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git config --global --unset http.proxy</span><br><span class="line">git config --global --unset https.proxy</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æœ¬æ–‡æ•´ç†äº† Windows å‘½ä»¤è¡Œ å’Œ Linux ç»ˆç«¯ä»¥åŠ Git ä¸­è®¾ç½®ä»£ç†çš„å‘½ä»¤ã€‚ä»¥æœ¬åœ° HTTP/HTTPS ä»£ç† &lt;code&gt;127.0.0.1:8118&lt;/code&gt; å’Œ SOCKS5 ä»£ç† &lt;code&gt;127.0.0.1:1080&lt;/code&gt; ä¸ºä¾‹ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="Tutorial" scheme="https://marara.xin/categories/Tutorial/"/>
    
    
      <category term="Git" scheme="https://marara.xin/tags/Git/"/>
    
      <category term="Terminal" scheme="https://marara.xin/tags/Terminal/"/>
    
  </entry>
  
  <entry>
    <title>åˆæ­¥äº†è§£ Swift ä¸­çš„å¯é€‰ç±»å‹å’Œæ–¹æ³•å‡½æ•°</title>
    <link href="https://marara.xin/2017/10/25/Optional%20types%20and%20method%20functions%20in%20Swift/"/>
    <id>https://marara.xin/2017/10/25/Optional types and method functions in Swift/</id>
    <published>2017-10-25T09:19:23.069Z</published>
    <updated>2017-10-25T10:17:38.164Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å¯é€‰ç±»å‹å’Œè§£åŒ…"><a href="#å¯é€‰ç±»å‹å’Œè§£åŒ…" class="headerlink" title="å¯é€‰ç±»å‹å’Œè§£åŒ…"></a>å¯é€‰ç±»å‹å’Œè§£åŒ…</h2><p>Swiftä¸­ï¼Œåœ¨æ•°ç»„çš„æ–¹æ‹¬å·å†…å¿…é¡»å†™ä¸Šç±»å‹ï¼Œæˆ–è€…åœ¨<code>Array</code>åé¢çš„å°–æ‹¬å·<code>&lt;&gt;</code>å†…å†™ä¸Šç±»å‹ã€‚</p><p>å¯¹äºå­—å…¸è€Œè¨€ï¼Œä½ ä¸€å…±éœ€è¦æä¾›ä¸¤ä¸ªç±»å‹ï¼Œä¸€ä¸ªç”¨äºé”®ï¼Œè€Œå¦ä¸€ä¸ªç”¨äºå€¼ã€‚</p><p>Swiftè¦æ±‚æ‰€æœ‰çš„å˜é‡å’Œå¸¸é‡éƒ½å¿…é¡»æœ‰å€¼ã€‚ä½ å¯ä»¥åœ¨å£°æ˜å®ƒä»¬çš„æ—¶å€™ç»™å®ƒä»¬æŒ‡å®šä¸€ä¸ªå€¼ï¼Œä¹Ÿå¯ä»¥é€šè¿‡<code>init</code>æ–¹æ³•ç»™å®ƒä»¬åˆ†é…å€¼ã€‚</p><a id="more"></a><p>æœ‰æ—¶ï¼Œä½ éœ€è¦ä¸€ä¸ªå˜é‡å¯ä»¥æ²¡æœ‰å€¼ï¼Œè¿™ç§æƒ…å†µï¼Œä½ éœ€è¦å°†å˜é‡å£°æ˜ä¸ºå¯é€‰å‹ï¼š</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> checklistToEdit: <span class="type">Checklist</span>?</span><br></pre></td></tr></table></figure><p>å¯æ˜¯ä½ ä¸èƒ½ç›´æ¥ä½¿ç”¨è¿™ç§ç±»å‹çš„å˜é‡ï¼Œä½ å¿…é¡»åœ¨ä½¿ç”¨å®ƒä»¬ä¹‹å‰ï¼Œä¾¦æµ‹ä¸€ä¸‹å…¶ä¸­æ˜¯å¦æœ‰å€¼ï¼Œè¿™ä¸ªè¡Œä¸ºå°±å«åšå¯é€‰å‹è§£åŒ…ï¼š</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> <span class="keyword">let</span> checklist = checklistToEdit &#123;</span><br><span class="line">  <span class="comment">// â€œchecklistâ€ now contains the real object</span></span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">  <span class="comment">// the optional was nil</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸‹é¢ä¾‹å­ä¸­çš„å˜é‡<code>age</code>å°±æ˜¯ä¸€ä¸ªå¯é€‰å‹ï¼Œå› ä¸ºæ²¡æœ‰ä»»ä½•ä¿è¯è¯´å­—å…¸ä¸­å­˜åœ¨ä¸€ä¸ªåä¸ºâ€Jony Iveâ€çš„é”®ï¼Œæ‰€ä»¥<code>age</code>çš„ç±»å‹æ˜¯<code>Int?</code>ï¼Œè€Œä¸æ˜¯<code>Int</code>ï¼š</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> <span class="keyword">let</span> age = dict[<span class="string">"Jony Ive"</span>] &#123;</span><br><span class="line"><span class="comment">// ä½¿ç”¨ageå˜é‡</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¦‚æœä½ 100%çš„ç¡®å®šå­—å…¸ä¸­å­˜åœ¨ä¸€ä¸ªå«åšâ€Jony Iveâ€çš„é”®çš„è¯ï¼Œé‚£ä¹ˆä½ å°±å¯ä»¥å¯¹<code>age</code>å˜é‡è¿›è¡Œå¼ºåˆ¶è§£åŒ…ï¼š</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> age = dict[<span class="string">"Jony Ive"</span>]!</span><br></pre></td></tr></table></figure><p>ä½ ä½¿ç”¨æ„Ÿå¹å·<code>!</code>æ¥é€šçŸ¥Swiftï¼Œâ€œè¿™ä¸ªå¯é€‰å‹ä¸ä¼šä¸ºnilï¼Œæˆ‘ç”¨æˆ‘çš„åèª‰æ‰“èµŒï¼â€ï¼Œå½“ç„¶ï¼Œå¦‚æœä½ é”™äº†çš„è¯ï¼Œè¿™ä¸ªå˜é‡çš„å€¼ä¸º<code>nil</code>ï¼Œé‚£ä¹ˆappå°±ä¼šæŒ‚æ‰ï¼Œä½ ä¹Ÿå°±åèª‰æ‰«åœ°äº†ï¼Œæ‰€ä»¥ä½ åœ¨ä½¿ç”¨å¼ºåˆ¶è§£åŒ…çš„æ—¶å€™ä¸€å®šè¦å°å¿ƒã€‚</p><p>å¦ä¸€ç§ç¨å¾®å®‰å…¨ç‚¹çš„å¼ºåˆ¶è§£åŒ…æ–¹å¼å«åšå¯é€‰å‹é“¾æ¥ã€‚ä¾‹å¦‚ï¼Œä¸‹é¢çš„è¯­å¥ä¼šåœ¨<code>navigationController</code>ä¸º<code>nil</code>æ—¶æŠŠappæŒ‚æ‰ã€‚</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">navigationController!.delegate = <span class="keyword">self</span></span><br></pre></td></tr></table></figure><p>ä½†æ˜¯åƒè¿™æ ·åšåˆ™ä¸ä¼šæŠŠappæŒ‚æ‰ï¼š</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">navigationController?.delegate = <span class="keyword">self</span></span><br></pre></td></tr></table></figure><p>ä½äºé—®å·åé¢çš„ä»»ä½•ä¸œè¥¿ï¼Œéƒ½ä¼šåœ¨<code>navigationController</code>ä¸º<code>nil</code>æ—¶æŠŠå®ƒå¿½è§†æ‰ã€‚è¿™ä¸ªä½¿ç”¨é—®å·å¼ºåˆ¶è§£åŒ…çš„è¯­å¥ç­‰ä»·äºä¸‹é¢çš„è¯­å¥ï¼š</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> navigationController != <span class="literal">nil</span> &#123;</span><br><span class="line">  navigationController!.delegate = <span class="keyword">self</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨å£°æ˜å¯é€‰å‹çš„æ—¶å€™ï¼Œä¹Ÿå¯ä»¥ç”¨æ„Ÿå¹å·æ¥ä»£æ›¿é—®å·ï¼Œè¿™æ ·å°±æ˜¯ä¸€ä¸ªéšå¼è§£åŒ…å¯é€‰å‹äº†ï¼š</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> dataModel: <span class="type">DataModel</span>!</span><br></pre></td></tr></table></figure><p>è¿™æ ·çš„å˜é‡ä¼šå¸¦æ¥æ½œåœ¨çš„å±é™©ï¼Œå› ä¸ºä½ å¯ä»¥å¦‚åŒä½¿ç”¨å¸¸è§„å˜é‡é‚£æ ·ç›´æ¥ä½¿ç”¨å®ƒï¼Œå¹¶ä¸éœ€è¦å…ˆè§£åŒ…ã€‚ä¸€æ—¦å¦‚æœå®ƒçš„å€¼ä¸ºç©ºï¼Œé‚£ä¹ˆappå°±æŒ‚äº†ã€‚è€Œå½“ä½¿ç”¨çš„å¸¸è§„å˜é‡ä¸ºç©ºæ—¶ï¼Œç¼–è¯‘å™¨åˆ™ä¼šæç¤ºä½ è¯¥æ€ä¹ˆåšã€‚</p><p>å¯é€‰å‹å¹³æ—¶è¢«åŒ…è£¹èµ·æ¥ï¼Œä»¥é¿å…appå´©æºƒï¼Œä½†æ˜¯ä½¿ç”¨äº†æ„Ÿå¹å·ä»¥åï¼Œå°±è§£é™¤äº†å¯é€‰å‹çš„å®‰å…¨çº§åˆ«ã€‚</p><p>ç„¶è€Œï¼Œæœ‰æ—¶ä½¿ç”¨<strong>éšå¼è§£åŒ…å¯é€‰å‹</strong>æ¯”ä½¿ç”¨<strong>å¯é€‰å‹</strong>è¦æ–¹ä¾¿ä¸€äº›ã€‚å½“ä½ æ— æ³•ç»™ä¸€ä¸ªå˜é‡åˆå§‹å€¼ï¼Œä¹Ÿæ— æ³•ç”¨<code>init</code>æ–¹æ³•å¯¹å…¶åˆå§‹åŒ–çš„æ—¶å€™ï¼Œä½ å°±ä¼šéœ€è¦åˆ°è¿™ç§éšå¼è§£åŒ…å¯é€‰å‹ã€‚</p><p>å¦‚æœä½ ç»™äº†ä¸€ä¸ªå˜é‡ä¸€ä¸ªå€¼åï¼Œå°±ä¸åº”è¯¥å†ä½¿å®ƒä¸º<code>nil</code>ï¼Œå¦‚æœä¸€ä¸ªå˜é‡å¯ä»¥ä»æœ‰å€¼å˜ä¸º<code>nil</code>ï¼Œé‚£ä¹ˆä½ æœ€å¥½è¿˜æ˜¯ä½¿ç”¨ç”¨é—®å·å£°æ˜çš„å¯é€‰å‹ã€‚</p><h2 id="æ–¹æ³•ä¸å‡½æ•°ï¼ˆMethods-and-functionsï¼‰"><a href="#æ–¹æ³•ä¸å‡½æ•°ï¼ˆMethods-and-functionsï¼‰" class="headerlink" title="æ–¹æ³•ä¸å‡½æ•°ï¼ˆMethods and functionsï¼‰"></a>æ–¹æ³•ä¸å‡½æ•°ï¼ˆMethods and functionsï¼‰</h2><p>æœ‰è¿™æ ·çš„ä¸€ç§å¯¹è±¡ï¼Œå®ƒæ˜¯æ‰€æœ‰appçš„åŸºç¡€ç»„æˆéƒ¨åˆ†ï¼ŒåŒæ—¶å…·æœ‰æ•°æ®å’ŒåŠŸèƒ½ã€‚å®ä¾‹å˜é‡åŠå¸¸é‡æä¾›æ•°æ®ï¼Œæ–¹æ³•æä¾›åŠŸèƒ½ã€‚</p><h3 id="æ–¹æ³•çš„è¿”å›å€¼"><a href="#æ–¹æ³•çš„è¿”å›å€¼" class="headerlink" title="æ–¹æ³•çš„è¿”å›å€¼"></a>æ–¹æ³•çš„è¿”å›å€¼</h3><p>å½“ä½ è°ƒç”¨ä¸€ä¸ªæ–¹æ³•ï¼Œappå°±ä¼šè·³è½¬åˆ°æ–¹æ³•ä¸­ï¼Œé€æ¡çš„æ‰§è¡Œå…¶ä¸­çš„è¯­å¥ï¼Œå½“æ–¹æ³•ä¸­æœ€åä¸€æ¡è¯­å¥è¢«æ‰§è¡Œå®Œæ¯•åï¼Œappå°±ä¼šä¼šåˆ°ä¹‹å‰ç¦»å¼€çš„åœ°æ–¹ï¼š</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> result = performUselessCalculation(<span class="number">314</span>)</span><br><span class="line"><span class="built_in">print</span>(result)</span><br><span class="line">...</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">performUselessCalculation</span><span class="params">(<span class="number">_</span> a: Int)</span></span> -&gt; <span class="type">Int</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> b = <span class="type">Int</span>(arc4random_uniform(<span class="number">100</span>))</span><br><span class="line">    <span class="keyword">var</span> <span class="built_in">c</span> = a / <span class="number">2</span></span><br><span class="line">    <span class="keyword">return</span> (a + b) * <span class="built_in">c</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ–¹æ³•ç»å¸¸ä¼šè¿”å›ä¸€ä¸ªå€¼ç»™è°ƒç”¨è€…ï¼Œæ¯”å¦‚ä¸€ä¸ªè®¡ç®—ç»“æœæˆ–è€…ä»ä¸€ä¸ªé›†åˆä¸­æ‰¾åˆ°çš„ä¸€ä¸ªå¯¹è±¡ã€‚è¿”å›å€¼çš„ç±»å‹ä¼šå†™åœ¨<code>-&gt;</code>ç¬¦å·çš„åé¢ã€‚åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œè¿”å›å€¼çš„ç±»å‹æ˜¯<code>Int</code>ã€‚å¦‚æœä¸å­˜åœ¨<code>-&gt;</code>è¿™ä¸ªç¬¦å·ï¼Œé‚£ä¹ˆå°±æ˜¯è¯´è¿™ä¸ªæ–¹æ³•ä¸è¿”å›ä»»ä½•å€¼ã€‚</p><h3 id="æ–¹æ³•çš„è°ƒç”¨"><a href="#æ–¹æ³•çš„è°ƒç”¨" class="headerlink" title="æ–¹æ³•çš„è°ƒç”¨"></a>æ–¹æ³•çš„è°ƒç”¨</h3><p>æ–¹æ³•å°±æ˜¯å±äºæŸä¸€ç‰¹å®šå¯¹è±¡çš„å‡½æ•°ï¼ŒSwiftä¸­ä¹Ÿå­˜åœ¨ç‹¬ç«‹çš„å‡½æ•°ï¼Œæ¯”å¦‚<code>print()</code>æˆ–è€…<code>arc4random_uniform()</code>ã€‚</p><p>å‡½æ•°å’Œæ–¹æ³•çš„å·¥ä½œåŸç†ä¸€æ ·ï¼Œä¸€ä¸ªå¯é‡å¤ä½¿ç”¨çš„åŠŸèƒ½å—ï¼Œä½†æ˜¯å‡½æ•°ä¸å±äºä»»ä½•å¯¹è±¡ã€‚åƒè¿™ç§å‡½æ•°ä¹Ÿè¢«ç§°ä¸ºè‡ªç”±å‡½æ•°æˆ–è€…å…¨å±€å‡½æ•°ã€‚</p><p>ä¸‹é¢æ˜¯ä¸€äº›å…³äºæ–¹æ³•çš„ä¾‹å­ï¼š</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è¿™ä¸ªæ–¹æ³•æ²¡æœ‰è¿”å›å€¼åŠå‚æ•°çš„æ–¹æ³•</span></span><br><span class="line"><span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">viewDidLoad</span><span class="params">()</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// è¿™ä¸ªæ–¹æ³•æœ‰ä¸€ä¸ªsliderå‚æ•°ï¼Œä½†æ˜¯ä¸€æ ·æ²¡æœ‰è¿”å›å€¼</span></span><br><span class="line"><span class="comment">// å…³é”®å­—@IBActionæ„å‘³ç€è¿™ä¸ªæ–¹æ³•å¯ä»¥è¢«è¿æ¥åˆ°ç•Œé¢å»ºé€ å™¨çš„æ§ä»¶ä¸Š</span></span><br><span class="line"><span class="meta">@IBAction</span> <span class="function"><span class="keyword">func</span> <span class="title">sliderMoved</span><span class="params">(<span class="number">_</span> slider: UISlider)</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// è¿™ä¸ªæ–¹æ³•æ²¡æœ‰å‚æ•°ï¼Œä½†æ˜¯æœ‰ä¸€ä¸ªIntå‹çš„è¿”å›å€¼</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">countUncheckedItems</span><span class="params">()</span></span> -&gt; <span class="type">Int</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// è¿™ä¸ªæ–¹æ³•æœ‰ä¸¤ä¸ªå‚æ•°ï¼Œcellå’Œitemï¼Œä½†æ˜¯æ²¡æœ‰è¿”å›å€¼</span></span><br><span class="line"><span class="comment">// æ³¨æ„ä¸€ä¸‹ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æœ‰ä¸€ä¸ªå¤–éƒ¨åç§°forï¼Œè€Œç¬¬äºŒä¸ªå‚æ•°æœ‰ä¸€ä¸ªå¤–éƒ¨åç§°with</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">configureCheckmarkFor</span><span class="params">(<span class="keyword">for</span> cell: UITableViewCell,</span></span></span><br><span class="line"><span class="function"><span class="params">                           with item: ChecklistItem)</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// è¿™ä¸ªæ–¹æ³•æœ‰ä¸¤ä¸ªå‚æ•°, tableViewå’Œsection. å¹¶ä¸”æœ‰ä¸€ä¸ªIntå‹çš„è¿”å›å€¼ã€‚</span></span><br><span class="line"><span class="comment">// ç¬¬ä¸€ä¸ªå‚æ•°å‰çš„ä¸‹åˆ’çº¿ä»£è¡¨è¿™ä¸ªå‚æ•°æ²¡æœ‰å¤–éƒ¨åç§°ã€‚</span></span><br><span class="line"><span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">tableView</span><span class="params">(<span class="number">_</span> tableView: UITableView,</span></span></span><br><span class="line"><span class="function"><span class="params">                        numberOfRowsInSection section: Int)</span></span> -&gt; <span class="type">Int</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// è¿™ä¸ªæ–¹æ³•æœ‰ä¸¤ä¸ªå‚æ•°, tableViewå’ŒindexPath.</span></span><br><span class="line"><span class="comment">// é—®å·ä»£è¡¨å®ƒè¿”å›ä¸€ä¸ªä¸ºå¯é€‰å‹çš„IndexPathå¯¹è±¡ã€‚</span></span><br><span class="line"><span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">tableView</span><span class="params">(<span class="number">_</span> tableView: UITableView,</span></span></span><br><span class="line"><span class="function"><span class="params">                    willSelectRowAt indexPath: IndexPath)</span></span> -&gt; <span class="type">IndexPath</span>?</span><br></pre></td></tr></table></figure><p>åœ¨ä¸€ä¸ªå¯¹è±¡ä¸Šè°ƒç”¨ä¸€ä¸ªæ–¹æ³•ï¼Œè¯­æ³•æ˜¯<code>object.method(parameters)</code>ã€‚ä¾‹å¦‚ï¼š</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Calling a method on the lists object:</span></span><br><span class="line">lists.append(checklist)</span><br><span class="line"><span class="comment">// Calling a method with more than one parameter:</span></span><br><span class="line">tableView.insertRows(at: indexPaths, with: .fade)</span><br></pre></td></tr></table></figure><p>ä½ å¯ä»¥æŠŠè°ƒç”¨æ–¹æ³•æƒ³è±¡ä¸ºä»ä¸€ä¸ªå¯¹è±¡å‘å¦ä¸€ä¸ªå¯¹è±¡ä¼ é€’æ¶ˆæ¯ï¼šâ€œå—¨ listsï¼Œæˆ‘ä»checklistå¯¹è±¡ä¸­å‘ä½ å‘é€äº†appendçš„æ¶ˆæ¯ã€‚â€</p><p>ä½ è°ƒç”¨æ¶ˆæ¯æ‰€å±çš„å¯¹è±¡è¢«ç§°ä¸ºæ¶ˆæ¯çš„æ¥æ”¶è€…ã€‚</p><p>ä»åŒä¸€ä¸ªå¯¹è±¡ä¸­è°ƒç”¨æ–¹æ³•éå¸¸å¸¸è§ï¼Œä¸‹é¢çš„ä¾‹å­ä¸­ï¼Œ<code>loadChecklists()</code>è°ƒç”¨äº†<code>sortChecklists()</code>ã€‚å®ƒä»¬éƒ½æ˜¯<code>DataModel</code>å¯¹è±¡ä¸­çš„æˆå‘˜ï¼š</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">DataModel</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">func</span> <span class="title">loadChecklists</span><span class="params">()</span></span> &#123;</span><br><span class="line">        ...</span><br><span class="line">        sortChecklists()</span><br><span class="line">  &#125;</span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">sortChecklists</span><span class="params">()</span></span> &#123;</span><br><span class="line">        ...</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æœ‰æ—¶ä½ ä¼šå†™ä¸ºä¸‹é¢è¿™ä¸ªæ ·å­ï¼š</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">loadChecklists</span><span class="params">()</span></span> &#123;</span><br><span class="line">    ...</span><br><span class="line">    <span class="keyword">self</span>.sortChecklists()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å…³é”®å­—<code>self</code>æ¸…æ™°çš„è¡¨æ˜äº†<code>DataModel</code>å¯¹è±¡è‡ªå·±æ˜¯è¿™ä¸ªæ¶ˆæ¯çš„æ¥å—è€…ã€‚</p><blockquote><p>âš ï¸ï¼šåœ¨æˆ‘ä»¬çš„è¯¾ç¨‹ä¸­ï¼Œè°ƒç”¨æ–¹æ³•çš„æ—¶å€™ï¼Œæˆ‘çœç•¥äº†selfå…³é”®å­—ï¼Œå› ä¸ºå¹¶ä¸æ˜¯å¿…é¡»è¦è¿™æ ·åšã€‚Object-Cå¼€å‘è€…ä¼šéå¸¸ä¹æ„åœ¨æ¯ä¸ªåœ°æ–¹éƒ½å†™ä¸Šselfï¼Œæ‰€ä»¥ä½ ä¹Ÿè®¸ä¼šè§åˆ°å®ƒåœ¨Swiftä¸­ä¹Ÿè¢«å¤§é‡ä½¿ç”¨ã€‚åˆ°åº•å†™ä¸ä¸å†™ï¼Œè¿™æ˜¯ç¨‹åºå‘˜é—´å¯ä»¥å¼•å‘æˆ˜äº‰çš„ä¸€ä¸ªè¯é¢˜ï¼Œä½†æ˜¯æ— è®ºå¦‚ä½•ï¼Œappå¹¶ä¸æ˜¯å¤ªå…³å¿ƒè¿™ç‚¹ã€‚</p></blockquote><p>åœ¨ä¸€ä¸ªæ–¹æ³•çš„å†…éƒ¨ï¼Œä½ ä¹Ÿå¯ä»¥ä½¿ç”¨selfå…³é”®å­—æ¥å¼•ç”¨è¿™ä¸ªå¯¹è±¡è‡ªå·±ï¼š</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@IBAction</span> <span class="function"><span class="keyword">func</span> <span class="title">cancel</span><span class="params">()</span></span> &#123;</span><br><span class="line">delegate?.itemDetailViewControllerDidCancel(<span class="keyword">self</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™é‡Œ<code>cancel()</code>æ–¹æ³•å°†å¯¹è±¡è‡ªèº«çš„å¼•ç”¨å‘é€ç»™<code>delegate</code>ï¼Œæ‰€ä»¥<code>delegate</code>çŸ¥é“è°å‘é€äº†è¿™ä¸ª<code>itemDetailViewControllerDidCancel()</code>æ¶ˆæ¯ã€‚</p><p>åŒæ—¶æ³¨æ„ä¸€ä¸‹è¿™é‡Œçš„å¯é€‰å‹é“¾æ¥ã€‚è¿™ä¸ª<code>delegate</code>å±æ€§æ˜¯ä¸ªå¯é€‰å‹ï¼Œæ‰€ä»¥å®ƒå¯ä»¥ä¸ºnilã€‚åœ¨è°ƒç”¨æ–¹æ³•å‰ä½¿ç”¨ä¸€ä¸ªé—®å·æ¥ç¡®ä¿<code>delegate</code>ä¸º<code>nil</code>æ—¶ï¼Œappä¸ä¼šæŒ‚æ‰ã€‚</p><h3 id="æ–¹æ³•çš„å‚æ•°"><a href="#æ–¹æ³•çš„å‚æ•°" class="headerlink" title="æ–¹æ³•çš„å‚æ•°"></a>æ–¹æ³•çš„å‚æ•°</h3><p>æ–¹æ³•ç»å¸¸ä¼šå…·æœ‰ä¸€ä¸ªæˆ–å¤šä¸ªå‚æ•°ï¼Œæ‰€ä»¥ä½ å¯ä»¥è®©å®ƒä»¬æ¥æ”¶ä¸åŒæ•°æ®æºä¸Šçš„æ•°æ®ã€‚ä¸€ä¸ªè¢«é™å®šäº†æ•°æ®æºçš„æ–¹æ³•ï¼Œå°±ä¸ä¼šéå¸¸æœ‰ä»·å€¼ã€‚ä¾‹å¦‚ä¸‹é¢çš„<code>sumValuesFormArray()</code>æ–¹æ³•ï¼Œå®ƒæ²¡æœ‰å‚æ•°ï¼š</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyObject</span> </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> numbers = [<span class="type">Int</span>]()</span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">sunValuesFromArray</span><span class="params">()</span></span> -&gt; <span class="type">Int</span> &#123;</span><br><span class="line">        <span class="keyword">var</span> total = <span class="number">0</span></span><br><span class="line">        <span class="keyword">for</span> number <span class="keyword">in</span> numbers &#123;</span><br><span class="line">            total += number</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> total</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™é‡Œï¼Œ<code>numbers</code>æ˜¯ä¸€ä¸ªå®ä¾‹å˜é‡ã€‚æ–¹æ³•<code>sumValuesFromArray()</code>è¢«è¿™ä¸ªå®ä¾‹å˜é‡ç»‘å®šæ­»äº†ï¼Œå¦‚æœè¿™ä¸ªå˜é‡ä¸å­˜åœ¨ï¼Œé‚£ä¹ˆè¿™ä¸ªæ–¹æ³•å°±æ²¡ç”¨äº†ã€‚</p><p>å‡è®¾ä½ åœ¨è¿™ä¸ªappä¸­æ·»åŠ äº†ç¬¬äºŒæ•°ç»„ï¼Œä¹Ÿæƒ³è¦åº”ç”¨ä¸Šé¢çš„è®¡ç®—ï¼Œæ–¹æ³•ä¹‹ä¸€æ˜¯æŠŠè¿™ä¸ªæ–¹æ³•å¤åˆ¶ä¸€éï¼Œé‡æ–°å‘½åä¸ºä¸€ä¸ªæ–°çš„æ–¹æ³•æ¥å¤„ç†è¿™ä¸ªæ–°çš„æ•°ç»„ã€‚è¿™æ ·åšç¡®å®å¯è¡Œï¼Œä½†æ˜¯è€…çœ‹èµ·æ¥ä¸é‚£ä¹ˆèªæ˜ã€‚</p><p>å¦ä¸€ä¸ªå¥½ä¸€ç‚¹çš„é€‰æ‹©æ˜¯ï¼Œç»™è¿™ä¸ªæ–¹æ³•ä¸€ä¸ªå‚æ•°ï¼Œä½¿å¾—ä½ å¯ä»¥ä¼ é€ä»»ä½•ä½ æƒ³è¦è®¡ç®—çš„æ•°ç»„ï¼Œè¿™æ ·ï¼Œè¿™ä¸ªæ–¹æ³•å°±ä»å®ä¾‹å˜é‡ä¸­è§£æ”¾å‡ºæ¥äº†ï¼š</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">sumValues</span><span class="params">(from array: [Int])</span></span> -&gt; <span class="type">Int</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> total = <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> number <span class="keyword">in</span> array &#123;</span><br><span class="line">    total += number</span><br><span class="line">    &#125;</span><br><span class="line">  <span class="keyword">return</span> total</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç°åœ¨ä½ å¯ä»¥ç”¨ä»»ä½•æ•´æ•°å‹çš„æ•°ç»„ä½œä¸ºå®ƒçš„å‚æ•°äº†ã€‚</p><blockquote><p>è¿™å¹¶ä¸æ˜¯è¯´æ–¹æ³•ä¸åº”è¯¥ä½¿ç”¨å®ä¾‹å˜é‡ï¼Œåªæ˜¯è¯´ä½ æƒ³è¦ä¸€ä¸ªæ–¹æ³•çš„åº”ç”¨æ›´åŠ å¹¿æ³›ï¼Œé‚£ä¹ˆç»™å®ƒä¸€ä¸ªå‚æ•°æ˜¯ä¸ªå¾ˆå¥½çš„é€‰æ‹©ã€‚</p></blockquote><p>æ–¹æ³•çš„å‚æ•°ç»å¸¸ä¼šæœ‰ä¸¤ä¸ªåå­—ï¼Œä¸€ä¸ª<strong>å¤–éƒ¨åç§°</strong>ï¼Œä¸€ä¸ª<strong>å†…éƒ¨åç§°</strong>ï¼Œä¾‹å¦‚ï¼š</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">downloadImage</span><span class="params">(<span class="keyword">for</span> searchResult: SearchResult,withTimeout timeout: TimeInterval,andPlaceOn button: UIButton)</span></span> &#123;</span><br><span class="line">...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªæ–¹æ³•æœ‰ä¸‰ä¸ªå‚æ•°ï¼š<code>searchResult</code>ï¼Œ<code>timeout</code>å’Œ<code>button</code>ã€‚è¿™äº›æ˜¯<strong>å†…éƒ¨åç§°</strong>ï¼Œä½ åœ¨æ–¹æ³•çš„<strong>å†…éƒ¨</strong>ç”¨è¿™äº›åç§°æ¥è°ƒç”¨å‚æ•°ã€‚</p><p><strong>æ–¹æ³•çš„å¤–éƒ¨åç§°æ˜¯æ–¹æ³•åç§°çš„ä¸€éƒ¨åˆ†</strong>ã€‚æ‰€ä»¥è¿™ä¸ªæ–¹æ³•çš„å…¨åæ˜¯<code>downloadImage(for,withTimeout,andPlaceOn)</code>ï¼ŒSwiftä¸­çš„æ–¹æ³•åç§°ç»å¸¸ä¼šç‰¹åˆ«çš„é•¿ã€‚</p><p>è°ƒç”¨è¿™ä¸ªæ–¹æ³•çš„æ—¶å€™ï¼Œä½ éœ€è¦ä½¿ç”¨å¤–éƒ¨åç§°ï¼š</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">downloadImage(<span class="keyword">for</span>:result,withTimeout:<span class="number">10</span>,andPlaceButton)</span><br></pre></td></tr></table></figure><p>æœ‰æ—¶ï¼Œä½ ä¼šçœ‹åˆ°ä¸€ä¸ªæ–¹æ³•å®ƒçš„ç¬¬ä¸€ä¸ªå‚æ•°æ²¡æœ‰å¤–éƒ¨åç§°ï¼Œå–è€Œä»£ä¹‹çš„æ˜¯ä¸€ä¸ªä¸‹åˆ’çº¿ï¼š</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">tableView</span><span class="params">(<span class="number">_</span> tableView: UITableView,numberOfRowsInSection section: Int)</span></span>-&gt; <span class="type">Int</span></span><br></pre></td></tr></table></figure><p>è¿™ç§æƒ…å†µç»å¸¸å‡ºç°åœ¨å§”æ‰˜æ–¹æ³•ä¸­ï¼Œå®ƒæ˜¯Object-Cçš„é—ç•™ç‰©ï¼Œç¬¬ä¸€ä¸ªå‚æ•°çš„å†…éƒ¨å’Œå¤–éƒ¨åç§°éƒ½ä¼šè¢«åŒ…å«åœ¨æ–¹æ³•åç§°ä¸­ï¼Œæ¯”å¦‚åœ¨Object-Cä¸­<code>downloadImage()</code>æ–¹æ³•çš„å…¨åä¼šæ˜¯<code>downloadImageForSearchResult</code>ã€‚åƒè¿™æ ·çš„å‘½åæ–¹å¼ï¼Œä»¥åä¼šéå¸¸å°‘è§ã€‚</p><p>å¦‚æœæ˜¯åœ¨Object-Cä¸­ï¼Œè¿™ä¸ªæ–¹æ³•çš„åç§°ä¼šæ˜¯<code>tableViewTableVIew</code>ï¼Œéå¸¸å¤æ€ªæ˜¯å§ï¼Œè€ŒSwiftä¸­ï¼Œä»¥ä¸‹åˆ’çº¿ä»£æ›¿å¤–éƒ¨åç§°æ—¶ï¼Œæ–¹æ³•åç§°ä¸­å°±å¯ä»¥çœç•¥è¿™ä¸ªå‚æ•°çš„å¤–éƒ¨åç§°ï¼Œåœ¨Swiftä¸­ï¼Œè¿™ä¸ªæ–¹æ³•çš„å…¨åæ˜¯<code>tableView(numberOfRowsInSection)</code>ã€‚è¿™æ ·æ˜¯ä¸æ˜¯å®¹æ˜“æ˜ç™½å¤šäº†ï¼ŸSwiftåœ¨å¯¹æ–¹æ³•å‘½åæ—¶æ›´åŠ çµæ´»ï¼Œä½†å®ƒè¿˜æ˜¯ä¼šä¿ç•™ä¸€äº›æ—§çš„æƒ¯ä¾‹ã€‚</p><h2 id="å¾ªç¯å’Œåˆ¤æ–­"><a href="#å¾ªç¯å’Œåˆ¤æ–­" class="headerlink" title="å¾ªç¯å’Œåˆ¤æ–­"></a>å¾ªç¯å’Œåˆ¤æ–­</h2><p>åœ¨ä¸€ä¸ªæ–¹æ³•çš„å†…éƒ¨ï¼Œä½ å¯ä»¥åšä»¥ä¸‹äº‹æƒ…ï¼š</p><ul><li><p>åˆ›å»ºå±€éƒ¨å˜é‡æˆ–è€…å¸¸é‡</p></li><li><p>è¿›è¡ŒåŸºæœ¬çš„æ•°å­¦è¿ç®—ï¼Œæ¯”å¦‚åŠ å‡ä¹˜é™¤</p></li><li><p>å°†ä¸€ä¸ªæ–°çš„å€¼æ”¾å…¥å˜é‡ï¼ˆå±€éƒ¨å˜é‡æˆ–å®ä¾‹å˜é‡ï¼‰</p></li><li><p>è°ƒç”¨å…¶ä»–æ–¹æ³•</p></li><li><p>ä½¿ç”¨<code>if</code>æˆ–è€…<code>switch</code>ä½œå‡ºåˆ¤æ–­</p></li><li><p>ç”¨<code>for</code>æˆ–è€…<code>while</code>è¿›è¡Œå¾ªç¯å¤„ç†</p></li><li><p>è¿”å›ä¸€ä¸ªå€¼ç»™è°ƒç”¨è€…</p></li></ul><p>è®©æˆ‘ä»¬æ¥çœ‹çœ‹<code>if</code>å’Œ<code>for</code>è¯­å¥çš„æ›´å¤šç»†èŠ‚ã€‚</p><h3 id="åˆ¤æ–­"><a href="#åˆ¤æ–­" class="headerlink" title="åˆ¤æ–­"></a>åˆ¤æ–­</h3><h4 id="ifè¯­å¥"><a href="#ifè¯­å¥" class="headerlink" title="ifè¯­å¥"></a><code>if</code>è¯­å¥</h4><p><code>if</code>è¯­å¥çš„åŸºæœ¬ç»“æ„æ˜¯è¿™ä¸ªæ ·å­çš„ï¼š</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> <span class="built_in">count</span> == <span class="number">0</span> &#123;</span><br><span class="line">text = <span class="string">"No Items"</span></span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> <span class="built_in">count</span> == <span class="number">1</span> &#123;</span><br><span class="line">text = <span class="string">"1 Item"</span></span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">text = <span class="string">"\(count) Items"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>if</code>åé¢çš„è¡¨è¾¾å¼ç§°ä¹‹ä¸ºæ¡ä»¶ã€‚å¦‚æœæ¡ä»¶ä¸ºçœŸï¼Œé‚£ä¹ˆ<code>if</code>åé¢èŠ±æ‹¬å·å†…çš„è¯­å¥ä¼šè¢«æ‰§è¡Œã€‚å¦‚æœæ²¡æœ‰ä¸€ä¸ªæ¡ä»¶ä¸ºçœŸï¼Œé‚£ä¹ˆæœ€åä¸€ä¸ª<code>else</code>åé¢çš„èŠ±æ‹¬å·å†…çš„è¯­å¥ä¼šè¢«æ‰§è¡Œã€‚</p><p>é€šè¿‡ä½¿ç”¨æ¯”è¾ƒè¿ç®—ç¬¦æ¥å¯¹ä¸¤ä¸ªå€¼è¿›è¡Œæ¯”è¾ƒï¼š</p><ul><li><p><code>==</code> ç­‰äº</p></li><li><p><code>!=</code> ä¸ç­‰äº</p></li><li><code>&lt;</code> å°äº</li><li><code>&lt;=</code> å°äºç­‰äº</li><li><code>&gt;</code> å¤§äº</li><li><code>&gt;=</code> å¤§äºç­‰äº</li></ul><p>ä½¿ç”¨ç­‰äºæ“ä½œæ—¶ï¼Œè¢«æ¯”è¾ƒçš„ä¸¤ä¸ªå¯¹è±¡ä»…åœ¨ç›¸ç­‰æ—¶è¿”å›<code>true</code>ï¼Œæ¯”å¦‚ï¼š</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> a = <span class="string">"Hello,world"</span></span><br><span class="line"><span class="keyword">let</span> b = <span class="string">"Hello,"</span> + <span class="string">"world"</span></span><br><span class="line"><span class="built_in">print</span>(a == b) <span class="comment">//æ‰“å°ç»“æœä¸ºtrue</span></span><br></pre></td></tr></table></figure><p>è¿™ä¸ªå’ŒObject-Cæœ‰æ‰€ä¸åŒï¼Œåœ¨Object-Cä¸­ï¼Œå¿…é¡»ä¸¤ä¸ªå¯¹è±¡æ˜¯å†…å­˜ä¸­çš„åŒä¸€ä¸ªå®ä¾‹ï¼Œæ‰ä¼šè¿”å›ä¸º<code>true</code>ã€‚è€ŒSwiftä¸­çš„<code>==</code>æ“ä½œï¼Œä»…ä»…æ˜¯æ¯”è¾ƒå¯¹è±¡çš„å€¼ï¼Œè€Œä¸ç®¡å®ƒåœ¨å†…å­˜ä¸­æ˜¯ä¸æ˜¯åŒä¸€ä¸ªå¯¹è±¡ï¼Œå¦‚æœåœ¨Swiftä¸­åƒåšè¿™ä¸ªæ“ä½œçš„è¯ï¼Œéœ€è¦ä½¿ç”¨è¿ç®—ç¬¦ <code>===</code>ï¼Œä¸‰ä¸ªç­‰å·ã€‚</p><p>ä½ è¿˜å¯ä»¥ä½¿ç”¨é€»è¾‘æ“ä½œç¬¦æ¥è¿æ¥ä¸¤ä¸ªè¡¨è¾¾å¼ï¼š</p><ul><li><p><code>&amp;&amp;</code> ä¸æ“ä½œï¼Œ<code>a &amp;&amp; b</code>å¿…é¡»åœ¨<code>a</code>å’Œ<code>b</code>éƒ½ä¸º<code>true</code>æ—¶æ‰è¿”å›<code>true</code></p></li><li><p><code>||</code> æˆ–æ“ä½œç¬¦ï¼Œ<code>a || b</code>å½“<code>a</code>ï¼Œ<code>b</code>å…¶ä¸­ä¹‹ä¸€ä¸º<code>true</code>æ—¶ï¼Œè¿”å›`true``</p></li><li><p><code>`ï¼</code> é€»è¾‘éæ“ä½œç¬¦ï¼Œå®ƒçš„ä½œç”¨æ˜¯å°†åŸæœ¬çš„<code>true</code>è½¬ä¸º<code>false</code>ï¼ŒåŸæœ¬çš„<code>false</code>è½¬ä¸º<code>true</code>ã€‚</p><blockquote><p>ä¸è¦å’Œå¯é€‰å‹å¼„æ··äº†ï¼Œé€»è¾‘éæ“ä½œç¬¦å‡ºç°åœ¨å¯¹è±¡çš„å‰é¢ï¼Œè€Œå¯é€‰å‹çš„æ„Ÿå¹å·å‡ºç°åœ¨å¯¹è±¡çš„åé¢</p></blockquote></li></ul><p>å¯ä»¥ä½¿ç”¨æ‹¬å·<code>()</code>æ¥å¯¹è¡¨è¾¾å¼åˆ†ç»„ï¼š</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> ((this &amp;&amp; that) || (such &amp;&amp; so)) &amp;&amp; !other &#123;</span><br><span class="line">...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å®ƒè¯»ä½œï¼š</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> ((this and that) or (such and so)) and not other &#123;</span><br><span class="line">...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸ºäº†çœ‹èµ·æ¥æ›´åŠ æ¸…æ™°ä¸€äº›ï¼Œæˆ‘ä»¬å†™çš„æœ‰å±‚æ¬¡ä¸€ç‚¹ï¼š</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (</span><br><span class="line">  (this and that)</span><br><span class="line">  or</span><br><span class="line">  (such and so)</span><br><span class="line">)</span><br><span class="line">and</span><br><span class="line">  (not other)</span><br></pre></td></tr></table></figure><h4 id="switchè¯­å¥"><a href="#switchè¯­å¥" class="headerlink" title="switchè¯­å¥"></a><code>switch</code>è¯­å¥</h4><p>å½“ç„¶ï¼Œä½ å¼„çš„è¶Šå¤æ‚ï¼Œè¶Šéš¾è®°æ¸…æ¥šè‡ªå·±åœ¨åšä»€ä¹ˆï¼</p><p>Swiftä¸­è¿˜æœ‰ä¸€ç§éå¸¸å¼ºå¤§çš„ç»“æ„ï¼Œå¯ä»¥ç”¨æ¥åšå‡ºåˆ¤æ–­ï¼Œé‚£å°±æ˜¯<code>switch</code>è¯­å¥ï¼š</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">switch</span> condition &#123;</span><br><span class="line">    <span class="keyword">case</span> value1:</span><br><span class="line">      <span class="comment">//è¯­å¥</span></span><br><span class="line">    <span class="keyword">case</span> value2:</span><br><span class="line">      <span class="comment">//è¯­å¥</span></span><br><span class="line">    <span class="keyword">case</span> value3:</span><br><span class="line">      <span class="comment">//è¯­å¥</span></span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">    <span class="comment">//è¯­å¥</span></span><br></pre></td></tr></table></figure><p>å®ƒçš„æ•ˆæœå’Œå¤šä¸ª<code>if else</code>çš„æ•ˆæœæ˜¯ä¸€è‡´çš„ï¼Œä¸Šé¢çš„ä»£ç ç­‰åŒäºï¼š</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> condition == value1 &#123;</span><br><span class="line">  <span class="comment">//è¯­å¥</span></span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> condition == value2 &#123;</span><br><span class="line">  <span class="comment">//è¯­å¥</span></span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> condition == value3 &#123;</span><br><span class="line">  <span class="comment">//è¯­å¥</span></span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">  <span class="comment">//è¯­å¥</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç›¸è¾ƒä¹‹ä¸‹ï¼Œ<code>switch</code>åœ¨è¿™ç§æƒ…å†µä¸­æ›´åŠ ä¾¿åˆ©ï¼Œè€Œä¸”æ„æ€æ¸…æ™°ã€‚è€Œä¸”Swiftç‰ˆçš„<code>switch</code>æ¯”Object-Cç‰ˆçš„æ›´åŠ å¼ºå¤§ã€‚ä¾‹å¦‚ï¼Œä½ å¯ä»¥ä½¿ç”¨åŒºé—´èŒƒå›´ï¼š</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">switch</span> difference &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">0</span>:</span><br><span class="line">      title = <span class="string">"Perfect!"</span></span><br><span class="line">    <span class="keyword">case</span> <span class="number">1</span>..&lt;<span class="number">5</span>:</span><br><span class="line">      title = <span class="string">"You almost had it!"</span></span><br><span class="line">    <span class="keyword">case</span> <span class="number">5</span>..&lt;<span class="number">10</span>:</span><br><span class="line">      title = <span class="string">"Pretty good!"</span></span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">      title = <span class="string">"Not even close..."</span></span><br></pre></td></tr></table></figure><p>è¿™é‡Œçš„<code>..&lt;</code>æ˜¯åŠå¼€åŒºé—´æ“ä½œç¬¦ã€‚å®ƒå¯ä»¥åˆ›å»ºä¸¤ä¸ªå€¼ä¹‹é—´çš„åŒºé—´ï¼Œå…¶ä¸­çš„å€¼éƒ½æ˜¯ä¸é‡å¤çš„ï¼ŒåŠå¼€åŒºé—´<code>1..&lt;5</code>ç­‰ä»·äºé—­åŒºé—´<code>1...4</code>ã€‚</p><p>æœ‰æ—¶ä½ ä¼šçœ‹åˆ°ä¸‹é¢è¿™ä¸ªæ ·å­çš„ä»£ç ï¼š</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">someMethod</span><span class="params">()</span></span> &#123;</span><br><span class="line">  <span class="keyword">if</span> condition1 &#123;</span><br><span class="line">    <span class="keyword">if</span> condition2 &#123;</span><br><span class="line">      <span class="keyword">if</span> condition3 &#123;</span><br><span class="line">        <span class="comment">//è¯­å¥</span></span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">//è¯­å¥</span></span><br><span class="line">     &#125;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">  <span class="comment">//è¯­å¥</span></span><br><span class="line"> &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">  <span class="comment">//è¯­å¥</span></span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™ç§ä»£ç éå¸¸éš¾è¯»ï¼Œæˆ‘å–œæ¬¢å°†å®ƒä»¬é‡æ„ä¸ºä¸‹é¢è¿™ä¸ªæ ·å­ï¼š</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">someMethod</span><span class="params">()</span></span> &#123;</span><br><span class="line"><span class="keyword">if</span> !condition1 &#123;</span><br><span class="line"><span class="comment">//è¯­å¥</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> !condition2 &#123;</span><br><span class="line"><span class="comment">//è¯­å¥</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> !condition3 &#123;</span><br><span class="line">    <span class="comment">//è¯­å¥</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//è¯­å¥</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™ä¸¤æ®µä»£ç çš„ä½œç”¨å…¶å®æ˜¯ä¸€æ ·çš„ï¼Œä½†æ˜¯åä¸€ç§æ›´åŠ å®¹æ˜“ç†è§£ã€‚ï¼ˆæ³¨æ„ä¸€ä¸‹ï¼Œç¬¬äºŒç§å†™æ³•ä¸­ä½¿ç”¨äº†<code>ï¼</code>é€»è¾‘éæ¥è½¬æ¢äº†è¡¨è¾¾å¼çš„æ„æ€ï¼‰</p><p>Swiftä¸­æœ‰ä¸€ç§ç‰¹æ®Šçš„è¯­å¥ï¼Œ<code>guard</code>æ¥å¸®åŠ©ä½ å¤„ç†è¿™ç§å¤æ‚çš„æƒ…å†µï¼Œç”¨<code>guard</code>é‡å†™ä¸€ä¸‹ä¸Šé¢çš„æ–¹æ³•å°±æ˜¯ï¼š</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">someMethod</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">guard</span> condition1 <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">//è¯­å¥</span></span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">guard</span> condition21 <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">//è¯­å¥</span></span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">...</span><br></pre></td></tr></table></figure><p>ä½ è¦è‡ªå·±å°è¯•è¿™äº›æ–¹æ³•ï¼Œæ¯”è¾ƒçœ‹çœ‹å“ªç§å¯è¯»æ€§æœ€å¥½ï¼Œå“ªç§çœ‹èµ·æ¥æœ€å¥½ï¼Œè¿™æ ·æ…¢æ…¢çš„ä½ å°±ä¼šå¾ˆæœ‰ç»éªŒäº†ã€‚</p><h3 id="å¾ªç¯"><a href="#å¾ªç¯" class="headerlink" title="å¾ªç¯"></a>å¾ªç¯</h3><p><code>for</code>å¾ªç¯</p><p>ä½ ä¹‹å‰å·²ç»è§è¯†è¿‡äº†ï¼Œå¦‚ä½•ç”¨<code>for in</code>æ¥å†éä¸€ä¸ªæ•°ç»„ï¼š</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> item <span class="keyword">in</span> items &#123;</span><br><span class="line">    <span class="keyword">if</span> !item.checked &#123;</span><br><span class="line">    <span class="built_in">count</span> += <span class="number">1</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¹Ÿå¯ä»¥å†™ä½œï¼š</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> item <span class="keyword">in</span> items <span class="keyword">where</span> !item.checked &#123;</span><br><span class="line">  <span class="built_in">count</span> += <span class="number">1</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>for in</code>ä¸­çš„è¯­å¥ä¼šå¯¹æ¯ä¸ª<code>items</code>æ•°ç»„ä¸­çš„å¯¹è±¡æ‰§è¡Œä¸€éã€‚</p><p>æ³¨æ„ä¸€ä¸‹ï¼Œå˜é‡<code>item</code>çš„ä»…åœ¨<code>for</code>è¯­å¥ä¸­æœ‰æ•ˆï¼Œä½ ä¸èƒ½åœ¨å¤–é¢å¼•ç”¨å®ƒï¼Œå®ƒçš„ç”Ÿå‘½æœŸæ¯”å±€éƒ¨å˜é‡è¿˜è¦çŸ­ã€‚</p><p>æœ‰äº›è¯­è¨€ï¼Œä¹ŸåŒ…æ‹¬Swift 2ï¼Œä¸­çš„<code>for</code>è¯­å¥æ˜¯è¿™ä¸ªæ ·å­çš„ï¼š</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> <span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; ++i &#123;</span><br><span class="line"><span class="built_in">print</span>(i)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å½“ä½ è¿è¡Œè¿™ä¸ªä»£ç ï¼Œä¼šå¾—åˆ°å¦‚ä¸‹ç»“æœï¼š</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">0</span></span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="number">2</span></span><br><span class="line"><span class="number">3</span></span><br><span class="line"><span class="number">4</span></span><br></pre></td></tr></table></figure><p>ç„¶è€Œï¼Œåœ¨Swift 3ç§ï¼Œè¿™ç§<code>for</code>å¾ªç¯å·²ç»è¢«æŠ›å¼ƒäº†ï¼Œå–è€Œä»£ä¹‹çš„æ˜¯ï¼Œä½ å¯ä»¥ç›´æ¥ä½¿ç”¨åŒºé—´èŒƒå›´ï¼Œå°±åƒä¸‹é¢è¿™æ ·ï¼š</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="number">0</span> ... <span class="number">4</span> &#123;</span><br><span class="line"><span class="built_in">print</span>(i)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é¡ºä¾¿è¯´ä¸€ä¸‹ï¼Œä¹Ÿå¯å†™ä½œï¼š</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">stride</span>(from: <span class="number">0</span>,to: <span class="number">5</span>,by: <span class="number">1</span>) &#123;</span><br><span class="line"><span class="built_in">print</span>(i)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>stride</code>å‡½æ•°åˆ›å»ºäº†ä¸€ä¸ªä¸“é—¨çš„å¯¹è±¡æ¥ä»£è¡¨ä»1åˆ°5ï¼Œæ¯æ¬¡å¢åŠ 1ã€‚å¦‚æœä½ åªæƒ³è¦å¶æ•°ï¼Œä½ å¯ä»¥æŠŠ<code>by</code>å‚æ•°æ”¹ä¸º2ã€‚å¦‚æœä½ ç»™<code>by</code>å‚æ•°ä¸€ä¸ªè´Ÿæ•°çš„è¯ï¼Œé‚£ä¹ˆ<code>stride</code>å°±å¯ä»¥å®ç°å€’ç€æ•°çš„åŠŸèƒ½ã€‚</p><p><code>while</code>è¯­å¥</p><p><code>for</code>è¯­å¥å¹¶ä¸æ˜¯å”¯ä¸€çš„æ‰§è¡Œå¾ªç¯çš„è¯­å¥ï¼Œå¦ä¸€ä¸ªéå¸¸å¼ºå¤§çš„å¾ªç¯ç»“æ„å°±æ˜¯<code>while</code>è¯­å¥ï¼š</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span> something <span class="keyword">is</span> <span class="literal">true</span> &#123;</span><br><span class="line"><span class="comment">//è¯­å¥</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>whileè¯­å¥ä¼šä¸€ç›´ä¿æŒå¾ªç¯ï¼ŒçŸ¥é“æ¡ä»¶ä¸ºfalseä¸ºæ­¢ã€‚è¿˜å¯ä»¥ä½¿ç”¨ä¸‹é¢è¿™ç§å½¢å¼ï¼š</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">repeat</span> &#123;</span><br><span class="line"> <span class="comment">//è¯­å¥</span></span><br><span class="line">&#125; <span class="keyword">while</span> something <span class="keyword">is</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><p>åœ¨è¿™ç§æƒ…å†µä¸­ï¼Œæ¡ä»¶æ˜¯åœ¨è¯­å¥æ‰§è¡Œåæ‰åˆ¤æ–­çš„ï¼Œæ‰€ä»¥æ‹¬å·å†…çš„è¯­å¥è‡³å°‘ä¹Ÿä¼šè¢«æ‰§è¡Œä¸€æ¬¡ã€‚</p><p>ä½ å¯ä»¥ä½¿ç”¨<code>while</code>è¯­å¥é‡å†™ä¸€ä¸‹å¾ªç¯<code>Checklists</code>ä¸­çš„å¯¹è±¡ï¼š</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> <span class="built_in">count</span> = <span class="number">0</span></span><br><span class="line"><span class="keyword">var</span> i = <span class="number">0</span></span><br><span class="line"><span class="keyword">while</span> i &lt; items.<span class="built_in">count</span> &#123;</span><br><span class="line">   <span class="keyword">let</span> item = items[i]</span><br><span class="line">   <span class="keyword">if</span> !item.checked &#123;</span><br><span class="line">     <span class="built_in">count</span> += <span class="number">1</span></span><br><span class="line">   &#125;</span><br><span class="line">   i += <span class="number">1</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™äº›å¾ªç¯ç»“æ„çš„ä½œç”¨å¤§è‡´ç›¸åŒï¼Œåªæ˜¯çœ‹èµ·æ¥æœ‰äº›ä¸ä¸€æ ·ã€‚æ¯ä¸€ç§éƒ½å¯ä»¥ä½¿ä½ é‡å¤æ‰§è¡Œä¸€æ®µè¯­å¥ï¼Œç›´åˆ°æ¡ä»¶ä¸ç¬¦åˆä¸ºæ­¢ã€‚</p><p>ç„¶è€Œï¼Œä½¿ç”¨<code>while</code>ä¼šæ¯”<code>for in</code>è¦çœ‹èµ·æ¥å¤æ‚ä¸€äº›ï¼Œæ‰€ä»¥å¤§å¤šæ•°æ—¶å€™ï¼Œæˆ‘ä»¬éƒ½ä¼šä½¿ç”¨<code>for in</code>ã€‚</p><p>ä½¿ç”¨<code>for in</code>ã€<code>while</code>ã€<code>repeat</code>å¹¶æ²¡æœ‰ä»€ä¹ˆä¸åŒï¼Œåªæ˜¯å¯è¯»æ€§ä¸Šæœ‰æ‰€åŒºåˆ«ã€‚</p><blockquote><p>âš ï¸ï¼šä¸Šé¢ä¾‹å­ä¸­çš„<code>item.count</code>å’Œ<code>count</code>æ˜¯ä¸¤ç§ä¸åŒçš„ä¸œè¥¿ï¼Œåªæ˜¯åå­—ä¸€æ ·ã€‚<code>item.count</code>ä¸­çš„<code>count</code>æ˜¯æ•°ç»„<code>items</code>ä¸­çš„å±æ€§ç”¨äºè¿”å›æ•°ç»„ä¸­å…ƒç´ çš„ä¸ªæ•°ï¼›åé¢çš„ä¸€ä¸ª<code>count</code>æ˜¯ä¸€ä¸ªå±€éƒ¨å˜é‡ï¼Œç”¨äºå¯¹æ²¡æœ‰æ¿€æ´»å¯¹å‹¾ç¬¦å·çš„itemå¯¹è±¡è®¡æ•°ã€‚</p></blockquote><p>å°±ä½ å¯ä»¥åœ¨æ–¹æ³•ä¸­ä½¿ç”¨<code>return</code>é€€å‡ºæ–¹æ³•ä¸€æ ·ï¼Œä½ å¯ä»¥ä½¿ç”¨<code>break</code>æ¥æå‰é€€å‡ºå¾ªç¯ï¼š</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> found = <span class="literal">false</span></span><br><span class="line"><span class="keyword">for</span> item <span class="keyword">in</span> array &#123;</span><br><span class="line">  <span class="keyword">if</span> item == searchText &#123;</span><br><span class="line">    found = <span class="literal">true</span></span><br><span class="line">    <span class="keyword">break</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªä¾‹å­ä¸­ï¼Œ<code>for</code>è¯­å¥åœ¨æ•°ç»„ä¸­å¾ªç¯ï¼Œç›´åˆ°æ‰¾åˆ°ç¬¬ä¸€ä¸ªä¸<code>searchText</code>çš„å€¼ç›¸å½“çš„å€¼åï¼Œå°†<code>found</code>è®¾ç½®ä¸º<code>true</code>ï¼Œç„¶åé€€å‡ºå¾ªç¯ï¼Œä¸å†æŸ¥çœ‹æ•°ç»„ä¸­å‰©ä¸‹çš„å¯¹è±¡ã€‚å› ä¸ºä½ å·²ç»æ‰¾åˆ°äº†ä½ æƒ³è¦çš„ä¸œè¥¿ï¼Œæ‰€ä»¥æ²¡æœ‰å¿…è¦æŠŠæ•´ä¸ªæ•°ç»„éƒ½å¾ªç¯å®Œæ¯•ã€‚</p><p>è¿˜å­˜åœ¨ä¸€ä¸ª<code>contiue</code>è¯­å¥ï¼Œå’Œ<code>break</code>çš„ä½œç”¨æ­£å¥½ç›¸åã€‚å®ƒçš„ä½œç”¨æ˜¯ç«‹å³è·³åˆ°ä¸‹ä¸€ä¸ªè¿­ä»£ä¸­ï¼Œå½“ä½ ä½¿ç”¨<code>contiue</code>æ—¶ï¼Œä½ çš„æ„æ€å°±æ˜¯â€œç›®å‰è¿™ä¸ªitemå·²ç»ç»“æŸäº†ï¼Œæˆ‘ä»¬å»çœ‹çœ‹ä¸‹ä¸€ä¸ªå§ï¼â€</p><h4 id="å…¶ä»–è¯­å¥"><a href="#å…¶ä»–è¯­å¥" class="headerlink" title="å…¶ä»–è¯­å¥"></a>å…¶ä»–è¯­å¥</h4><p>åœ¨å‡½æ•°ç¼–ç¨‹ä¸­ï¼Œå¾ªç¯ç»å¸¸ä¼šè¢«<code>map</code>ï¼Œ<code>filter</code>æˆ–è€…<code>reduce</code>æ›¿ä»£ã€‚å®ƒä»¬æ˜¯ä¸€äº›æ“ä½œé›†åˆçš„å‡½æ•°ï¼Œå¯¹é›†åˆä¸­æ¯ä¸€ä¸ªå…ƒç´ æ‰§è¡Œä¸€æ®µä»£ç ï¼Œå¹¶ä¸”è¿”å›ä¸€ä¸ªæ–°çš„é›†åˆä½œä¸ºç»“æœã€‚</p><p>ä¾‹å¦‚ï¼Œåœ¨æ•°ç»„ä¸Šä½¿ç”¨<code>filter</code>ï¼Œä¼šä¿ç•™ç¬¦åˆæŸäº›æ¡ä»¶çš„å…ƒç´ ã€‚æ¯”å¦‚è¦å¾—åˆ°æœªæ¿€æ´»å¯¹å‹¾ç¬¦å·çš„ChecklistItemå¯¹è±¡ï¼Œä½ å¯ä»¥è¿™æ ·å†™ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">var uncheckedItems = items.filter &#123; item in !item.checked&#125;</span><br></pre></td></tr></table></figure><p>è¿™æ ·å†™æ¯”å¾ªç¯çœ‹èµ·æ¥è¦ç®€å•å¤šäº†ã€‚å‡½æ•°ç¼–ç¨‹æ˜¯ä¸€ä¸ªéå¸¸å¤§çš„è¯é¢˜ï¼Œæ‰€ä»¥åœ¨è¿™é‡Œæˆ‘ä»¬ä¸ä¼šå±•å¼€å¤ªå¤šã€‚</p><h2 id="å¯¹è±¡ï¼ˆObjectsï¼‰"><a href="#å¯¹è±¡ï¼ˆObjectsï¼‰" class="headerlink" title="å¯¹è±¡ï¼ˆObjectsï¼‰"></a>å¯¹è±¡ï¼ˆObjectsï¼‰</h2><p>å°†åŠŸèƒ½å’Œæ•°æ®ç»“åˆåœ¨ä¸€èµ·çš„å¯é‡ç”¨å•å…ƒï¼Œéƒ½æ˜¯å¯¹è±¡ã€‚</p><p>æ•°æ®æ˜¯ç”±å¯¹è±¡ä¸­çš„å®ä¾‹å˜é‡å’Œå®ä¾‹å¸¸é‡ç»„æˆã€‚æˆ‘ä»¬ç»å¸¸ä»¥å¯¹è±¡çš„å±æ€§å½¢å¼å¼•ç”¨å®ƒä»¬ã€‚åŠŸèƒ½ç”±å¯¹è±¡çš„æ–¹æ³•æä¾›ã€‚</p><p>åœ¨ä½ çš„Swiftç¨‹åºä¸­ï¼Œä½ ä½¿ç”¨è¿‡å·²å­˜åœ¨çš„å¯¹è±¡ï¼Œæ¯”å¦‚<code>String</code>ï¼Œ<code>Array</code>ï¼Œ<code>Date</code>ï¼Œ<code>UITableView</code>ï¼Œä»¥åŠä½ è‡ªå·±åˆ›å»ºçš„å¯¹è±¡ã€‚</p><p>å®šä¹‰ä¸€ä¸ªæ–°çš„å¯¹è±¡ï¼Œä½ éœ€è¦ä¸€ä¸ªæ–°çš„Swiftæ–‡ä»¶ï¼Œæ¯”å¦‚MyObject.swiftï¼Œå¹¶ä¸”åŒ…å«ä¸€ä¸ªç±»ï¼ˆ<code>class</code>ï¼‰ã€‚æ¯”å¦‚ï¼š</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyObject</span> </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> text: <span class="type">String</span></span><br><span class="line">  <span class="keyword">var</span> <span class="built_in">count</span> = <span class="number">0</span></span><br><span class="line">    <span class="keyword">let</span> maximum = <span class="number">100</span></span><br><span class="line"> </span><br><span class="line">  <span class="keyword">init</span>() &#123;</span><br><span class="line">    text = <span class="string">"Hello World"</span></span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">doSomething</span><span class="params">()</span></span> &#123;</span><br><span class="line">  <span class="comment">//è¯­å¥</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨<code>class</code>çš„èŠ±æ‹¬å·å†…ï¼Œä½ æ·»åŠ äº†å±æ€§ï¼ˆå®ä¾‹å˜é‡å’Œå®ä¾‹å¸¸é‡ï¼‰å’Œæ–¹æ³•ã€‚</p><p>å±æ€§æœ‰ä¸¤ç§ç±»å‹ï¼š</p><ul><li><p>å­˜å‚¨å±æ€§ï¼Œå®ƒä»¬é€šå¸¸æ˜¯å®ä¾‹å˜é‡å’Œå®ä¾‹å¸¸é‡ã€‚</p></li><li><p>è®¡ç®—å±æ€§ï¼Œä¸å­˜å‚¨ä¸œè¥¿ï¼Œè€Œæ˜¯æ‰§è¡ŒæŸäº›é€»è¾‘</p></li></ul><p>ä¸‹é¢æ˜¯ä¸€ä¸ªå…³äºè®¡ç®—å±æ€§çš„ä¾‹å­ï¼š</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> indexOfSelectedChecklist: <span class="type">Int</span> &#123;</span><br><span class="line">  <span class="keyword">get</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="type">UserDefaults</span>.standard().integerForKey(<span class="string">"ChecklistIndex"</span>)</span><br><span class="line">  &#125;</span><br><span class="line"> <span class="keyword">set</span> &#123;</span><br><span class="line">      <span class="type">UserDefaults</span>.standard().<span class="keyword">set</span>(newValue,forKey: <span class="string">"ChecklistIndex"</span>)</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>indexOfSelectedChecklist</code>å±æ€§å¹¶ä¸å­˜å‚¨ä¸€ä¸ªå€¼ï¼Œå–è€Œä»£ä¹‹çš„æ˜¯ï¼Œæ¯æ¬¡æœ‰äººä½¿ç”¨è¿™ä¸ªå±æ€§æ—¶ï¼Œå®ƒæ‰§è¡Œ<code>get</code>æˆ–è€…<code>set</code>å†…çš„ä»£ç ã€‚å¦ä¸€ä¸ªé€‰æ‹©æ˜¯ï¼Œåˆ†åˆ«å†™ä¸€ä¸ª<code>setIndexOfSelectedChecklist()</code>å’Œ<code>getIndexOfSelectedChecklist()</code>æ–¹æ³•ï¼Œä½†æ˜¯è¿™æ ·è¯»èµ·æ¥ä¸æ˜¯å¾ˆå¥½ã€‚</p><p>å…³é”®å­—<code>@IBOutlet</code>çš„æ„æ€æ˜¯ï¼Œè¿™ä¸ªå±æ€§å¯ä»¥è¢«ç•Œé¢å»ºé€ å™¨ä¸­çš„ç”¨æˆ·æ¥å£å…ƒç´ å¼•ç”¨ï¼Œæ¯”å¦‚labelå’Œbuttonã€‚è¿™ç§å±æ€§é€šå¸¸éƒ½è¢«å£°æ˜ä¸º<code>weak</code>å’Œå¯é€‰å‹ã€‚ç±»ä¼¼çš„ï¼Œ<code>@IBAction</code>å…³é”®å­—è¢«ç”¨äºå’Œç”¨æˆ·äº¤äº’æ—¶è¢«è§¦å‘çš„æ–¹æ³•ã€‚</p><p>è¿™é‡Œæœ‰ä¸‰ç§ç±»å‹çš„æ–¹æ³•ï¼š</p><ol><li><p>å®ä¾‹æ–¹æ³•</p></li><li><p>ç±»æ–¹æ³•</p></li><li><p><code>init</code>æ–¹æ³•</p></li></ol><p>ä½ å·²ç»çŸ¥é“äº†æ–¹æ³•å°±æ˜¯å±äºæŸä¸€ä¸ªå¯¹è±¡çš„å‡½æ•°ã€‚è°ƒç”¨è¿™ç§ç±»å‹çš„æ–¹æ³•ä½ é¦–å…ˆéœ€è¦ä¸€ä¸ªè¿™ä¸ªå¯¹è±¡çš„å®ä¾‹ï¼š</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> myInstance = <span class="type">MyObject</span>()  <span class="comment">//åˆ›å»ºä¸€ä¸ªå¯¹è±¡çš„å®ä¾‹</span></span><br><span class="line">myInstance.doSomething()   <span class="comment">//è°ƒç”¨æ–¹æ³•</span></span><br></pre></td></tr></table></figure><p>ä½ ä¹Ÿå¯ä»¥åˆ›å»ºä¸€ä¸ªç±»æ–¹æ³•ï¼Œè¿™æ ·å°±å¯ä»¥åœ¨æ²¡æœ‰å®ä¾‹çš„æƒ…å†µä¸‹ä½¿ç”¨è¿™ä¸ªæ–¹æ³•ã€‚äº‹å®ä¸Šï¼Œç±»æ–¹æ³•ç»å¸¸è¢«å½“ä½œâ€œå·¥å‚â€æ–¹æ³•ä½¿ç”¨ï¼Œç”¨æ¥åˆ›å»ºæ–°çš„å®ä¾‹ï¼š</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyObject</span> </span>&#123;</span><br><span class="line">...</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">fun</span> <span class="title">makeObject</span>(<span class="title">text</span>: <span class="title">String</span>)-&gt; <span class="title">MyObject</span> </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> m = <span class="type">MyObject</span>()</span><br><span class="line">    m.text = text</span><br><span class="line">    <span class="keyword">return</span> m</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="type">MyInstance</span> = <span class="type">MyObject</span>.makeObject(text: <span class="string">"Hello world"</span>)</span><br></pre></td></tr></table></figure><p><code>init</code>æ–¹æ³•ï¼Œæˆ–è€…å«åšåˆå§‹åŒ–è®¾ç½®ï¼Œåœ¨åˆ›å»ºä¸€ä¸ªæ–°çš„å¯¹è±¡å®ä¾‹çš„è¿‡ç¨‹ä¸­è¢«ä½¿ç”¨ã€‚ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨<code>init</code>æ–¹æ³•æ¥å–ä»£ä¸Šé¢çš„é‚£ä¸ªå·¥å‚æ–¹æ³•ï¼š</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyObject</span> </span>&#123;</span><br><span class="line">...</span><br><span class="line"><span class="keyword">init</span>(text: <span class="type">String</span>) &#123;</span><br><span class="line">    <span class="keyword">self</span>.text = text</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>init</code>æ–¹æ³•çš„ä¸»è¦ç›®çš„æ˜¯å°†å¯¹è±¡ä¸­çš„å®ä¾‹å˜é‡å¡«æ»¡ã€‚ä»»ä½•æ²¡æœ‰å€¼çš„å®ä¾‹å˜é‡å’Œå®ä¾‹å¸¸é‡éƒ½å¿…é¡»åœ¨<code>init</code>æ–¹æ³•ä¸­è¢«ç»™äºˆä¸€ä¸ªå€¼ã€‚</p><p>Swiftä¸å…è®¸å˜é‡æˆ–è€…å¸¸é‡æ²¡æœ‰å€¼ï¼ˆå¯é€‰å‹ä¾‹å¤–ï¼‰ï¼Œå¹¶ä¸”<code>init</code>æ–¹æ³•æ˜¯ä½ ç»™å˜é‡æˆ–è€…å¸¸é‡èµ‹å€¼çš„æœ€åä¸€æ¬¡æœºä¼šã€‚</p><p>å¯¹è±¡å¯ä»¥æ‹¥æœ‰ä¸€ä¸ªä»¥ä¸Šçš„<code>init</code>æ–¹æ³•ï¼›å…·ä½“ä½¿ç”¨å“ªä¸€ä¸ªè¦ä¾æ®å…·ä½“æƒ…å†µè€Œå®šã€‚</p><p>ä¾‹å¦‚ï¼Œä¸€ä¸ª<code>UITableViewController</code>ï¼Œä»æ•…äº‹æ¨¡ç‰ˆä¸­è‡ªåŠ¨è¢«è¯»å–æ—¶ï¼Œä½¿ç”¨<code>init?(coder)</code>åˆå§‹åŒ–ï¼Œæ‰‹åŠ¨ä»nibæ–‡ä»¶ä¸­è¯»å–æ—¶ï¼Œä½¿ç”¨<code>init(nibName,bundle)</code>åˆå§‹åŒ–ï¼Œæˆ–è€…æ²¡æœ‰ä»æ•…äº‹æ¨¡ç‰ˆå’Œnibæ–‡ä»¶ä¸­æ„é€ æ—¶ï¼Œä½¿ç”¨<code>init(style)</code>åˆå§‹åŒ–ã€‚æœ‰æ—¶ä½ ä¼šç”¨åˆ°è¿™ä¸ªï¼Œè€Œæœ‰æ—¶ä½ ä¼šç”¨åˆ°é‚£ä¸ªã€‚</p><p>å½“å¯¹è±¡ä¸å†è¢«ä½¿ç”¨æ—¶ï¼Œä½ å¯ä»¥æä¾›ä¸€ä¸ª<code>deinit</code>æ–¹æ³•ã€‚åœ¨å¯¹è±¡è¢«ç ´åæ‰å‰è°ƒç”¨å®ƒã€‚</p><p>é¡ºä¾¿è¯´ä¸€ä¸‹ï¼Œ<code>class</code>å¹¶ä¸æ˜¯Swiftä¸­å”¯ä¸€å®šä¹‰å¯¹è±¡çš„æ–¹æ³•ã€‚è¿˜å­˜åœ¨å…¶ä»–ç±»å‹çš„å¯¹è±¡ï¼Œæ¯”å¦‚<code>structs</code>å’Œ<code>enums</code>ã€‚</p><h2 id="åè®®ï¼ˆProtocolsï¼‰"><a href="#åè®®ï¼ˆProtocolsï¼‰" class="headerlink" title="åè®®ï¼ˆProtocolsï¼‰"></a>åè®®ï¼ˆProtocolsï¼‰</h2><p>ä¸€ä¸ªåè®®å°±æ˜¯ä¸€ç»„æ–¹æ³•åç§°çš„åˆ—è¡¨ï¼š</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">protocol</span> <span class="title">MyProtocol</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">someMethod</span><span class="params">(value: Int)</span></span></span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">anotherMethod</span><span class="params">()</span></span>-&gt; <span class="type">String</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åè®®å°±ç±»ä¼¼äºå·¥ä½œåˆ—è¡¨ã€‚å®ƒåˆ—å‡ºäº†ä½ çš„å…¬å¸ä¸­æ¯ä¸ªå…·ä½“èŒä½çš„å·¥ä½œã€‚</p><p>ä½†æ˜¯åˆ—è¡¨è‡ªå·±æœ¬èº«å¹¶ä¸å·¥ä½œï¼Œå®ƒä»…ä»…æ˜¯æ‰“å°å‡ºæ¥ç»™å¤§å®¶çœ‹çš„ä¸œè¥¿ã€‚æ‰€ä»¥ä½ éœ€è¦é›‡ä½£å…·ä½“çš„å‘˜å·¥æ¥å®Œæˆåˆ—è¡¨ä¸Šçš„å·¥ä½œã€‚è€Œè¿™äº›å‘˜å·¥ï¼Œå°±æ˜¯å…·ä½“çš„å¯¹è±¡ã€‚</p><p>å¯¹è±¡éœ€è¦è¢«æŒ‡æ˜è‡ªå·±éœ€è¦éµå®ˆçš„åè®®ï¼š</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyObject</span>: <span class="title">MyProtocol</span> </span>&#123;</span><br><span class="line"> ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™æ ·ï¼Œè¿™ä¸ªå¯¹è±¡å°±éœ€è¦å®Œæˆåè®®ä¸­åˆ—å‡ºçš„æ‰€æœ‰æ–¹æ³•ã€‚ï¼ˆå¦åˆ™ï¼Œå°±ç‚’äº†å®ƒï¼‰</p><p>æ­¤æ—¶ï¼Œä½ å°±å¯ä»¥å¼•ç”¨è¿™ä¸ªå¯¹è±¡ï¼ŒåŒæ—¶è¿˜æœ‰åè®®ï¼š</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> m1: <span class="type">MyObject</span> = <span class="type">MyObject</span>()</span><br><span class="line"><span class="keyword">var</span> m2: <span class="type">MyProtocol</span> = <span class="type">MyObject</span>()</span><br></pre></td></tr></table></figure><p>å¯¹äºä»£ç ä¸­ä»»ä½•ä½¿ç”¨<code>m2</code>å˜é‡çš„éƒ¨åˆ†ï¼Œå®ƒæ˜¯å¦æ˜¯<code>MyObject</code>å¯¹è±¡å¹¶ä¸é‡è¦ã€‚<code>m2</code>ç±»å‹æ˜¯<code>MyProtocol</code>ï¼Œä¸æ˜¯<code>MyObject</code>ã€‚</p><p>æ‰€æœ‰ä½ çš„ä»£ç çœ‹åˆ°çš„æ˜¯ï¼Œ<code>m2</code>æ˜¯æŸä¸ªéµå®ˆ<code>MyProtocol</code>åè®®çš„å¯¹è±¡ï¼Œä½†æ˜¯å…·ä½“æ˜¯ä»€ä¹ˆæ ·çš„å¯¹è±¡å¹¶ä¸é‡è¦ã€‚</p><p>æ¢è€Œè¨€ä¹‹ï¼Œä½ å¹¶ä¸å…³å¿ƒä½ é›‡ç”¨çš„å‘˜å·¥ï¼Œæ˜¯ä¸æ˜¯å…¼èŒå…¶ä»–å·¥ä½œï¼Œåªè¦ä»–å’Œä½ éœ€è¦çš„ä¸œè¥¿ä¸å†²çªï¼Œä½ å°±å¯ä»¥é›‡ä½£ä»–ã€‚</p>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;å¯é€‰ç±»å‹å’Œè§£åŒ…&quot;&gt;&lt;a href=&quot;#å¯é€‰ç±»å‹å’Œè§£åŒ…&quot; class=&quot;headerlink&quot; title=&quot;å¯é€‰ç±»å‹å’Œè§£åŒ…&quot;&gt;&lt;/a&gt;å¯é€‰ç±»å‹å’Œè§£åŒ…&lt;/h2&gt;&lt;p&gt;Swiftä¸­ï¼Œåœ¨æ•°ç»„çš„æ–¹æ‹¬å·å†…å¿…é¡»å†™ä¸Šç±»å‹ï¼Œæˆ–è€…åœ¨&lt;code&gt;Array&lt;/code&gt;åé¢çš„å°–æ‹¬å·&lt;code&gt;&amp;lt;&amp;gt;&lt;/code&gt;å†…å†™ä¸Šç±»å‹ã€‚&lt;/p&gt;
&lt;p&gt;å¯¹äºå­—å…¸è€Œè¨€ï¼Œä½ ä¸€å…±éœ€è¦æä¾›ä¸¤ä¸ªç±»å‹ï¼Œä¸€ä¸ªç”¨äºé”®ï¼Œè€Œå¦ä¸€ä¸ªç”¨äºå€¼ã€‚&lt;/p&gt;
&lt;p&gt;Swiftè¦æ±‚æ‰€æœ‰çš„å˜é‡å’Œå¸¸é‡éƒ½å¿…é¡»æœ‰å€¼ã€‚ä½ å¯ä»¥åœ¨å£°æ˜å®ƒä»¬çš„æ—¶å€™ç»™å®ƒä»¬æŒ‡å®šä¸€ä¸ªå€¼ï¼Œä¹Ÿå¯ä»¥é€šè¿‡&lt;code&gt;init&lt;/code&gt;æ–¹æ³•ç»™å®ƒä»¬åˆ†é…å€¼ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="Note" scheme="https://marara.xin/categories/Note/"/>
    
    
      <category term="Swift" scheme="https://marara.xin/tags/Swift/"/>
    
  </entry>
  
  <entry>
    <title>C#ä¸­çš„abstractå’Œvirtual</title>
    <link href="https://marara.xin/2017/10/12/The%20abstract%20and%20virtual%20in%20CSharp/"/>
    <id>https://marara.xin/2017/10/12/The abstract and virtual in CSharp/</id>
    <published>2017-10-12T08:07:11.021Z</published>
    <updated>2017-10-12T15:01:48.390Z</updated>
    
    <content type="html"><![CDATA[<h2 id="abstract-newå’Œoverride"><a href="#abstract-newå’Œoverride" class="headerlink" title="abstract, newå’Œoverride"></a><code>abstract</code>, <code>new</code>å’Œ<code>override</code></h2><ul><li>æŠ½è±¡ï¼ˆ<code>abstract</code>ï¼‰æ–¹æ³•<strong>å¿…é¡»</strong>åœ¨æŠ½è±¡ç±»ä¸­å®šä¹‰ï¼Œä¸”æ²¡æœ‰æ–¹æ³•çš„å®ç°ã€‚</li><li>åŸºç±»ä¸­çš„æŠ½è±¡ï¼ˆ<code>abstract</code>ï¼‰æ–¹æ³•<strong>å¿…é¡»</strong>åœ¨æ´¾ç”Ÿç±»ä¸­é‡å†™ï¼ˆ<code>override</code>ï¼‰ã€‚</li><li>æŠ½è±¡ç±»æ— æ³•åˆ›å»ºåŸºå®ä¾‹ï¼Œåªèƒ½ç»§æ‰¿ååˆ›å»ºã€‚</li><li>æ´¾ç”Ÿç±»ä¸­å¦‚æœé‡æ–°å®šä¹‰å’ŒåŸºç±»åŒåçš„æ–¹æ³•ï¼Œä½¿ç”¨<code>new</code>å…³é”®å­—ã€‚</li><li>æ´¾ç”Ÿç±»ä¸­å¦‚æœè¦é‡å†™åŸºç±»ä¸­åŒåå·²ç»å®ç°çš„æ–¹æ³•ï¼Œåˆ™åŸºç±»ä¸­çš„æ–¹æ³•ç”¨<code>virtual</code>å…³é”®å­—ï¼Œæ´¾ç”Ÿç±»ä¸­çš„åŒåæ–¹æ³•ç”¨<code>override</code>å…³é”®å­—é‡å†™ã€‚</li><li><code>virtual</code>ä¿®é¥°çš„æ³•æ³•å¿…é¡»è¦å®ç°ã€‚</li><li><code>virtual</code>å’Œ<code>abstract</code>ä¿®é¥°çš„æ–¹æ³•å¿…é¡»æ˜¯<code>pubulic</code>ã€‚</li><li><code>virtual</code>æ–¹æ³•<strong>å¿…é¡»</strong>å®ç°ï¼Œ<code>abstract</code>æ–¹æ³•<strong>ä¸ä¸€å®š</strong>è¦å®ç°ã€‚</li><li><code>virtual</code>æ–¹æ³•<strong>å¯ä»¥</strong>è¢«æ´¾ç”Ÿç±»é‡å†™ï¼Œ<code>abstract</code>æ–¹æ³•<strong>å¿…é¡»</strong>åœ¨æ´¾ç”Ÿç±»ä¸­é‡å†™ã€‚</li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;abstract-newå’Œoverride&quot;&gt;&lt;a href=&quot;#abstract-newå’Œoverride&quot; class=&quot;headerlink&quot; title=&quot;abstract, newå’Œoverride&quot;&gt;&lt;/a&gt;&lt;code&gt;abstract&lt;/code&gt;,
      
    
    </summary>
    
      <category term="Note" scheme="https://marara.xin/categories/Note/"/>
    
    
      <category term="C#" scheme="https://marara.xin/tags/C/"/>
    
  </entry>
  
  <entry>
    <title>Scikit-learnçš„æ”¯æŒå‘é‡æœºï¼ˆSVMï¼‰</title>
    <link href="https://marara.xin/2017/10/05/Support%20vector%20machine%20(SVM)%20for%20scikit-learn/"/>
    <id>https://marara.xin/2017/10/05/Support vector machine (SVM) for scikit-learn/</id>
    <published>2017-10-05T09:41:54.682Z</published>
    <updated>2018-06-19T14:58:33.972Z</updated>
    
    <content type="html"><![CDATA[<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=default"></script><p><strong>æ”¯æŒå‘é‡æœºï¼ˆSVMï¼‰</strong>æ˜¯ç”¨äºåˆ†ç±»ï¼Œå›å½’å’Œå¼‚å¸¸å€¼æ£€æµ‹çš„ç›‘ç£å­¦ä¹ æ–¹æ³•ã€‚</p><p>æ”¯æŒå‘é‡æœºçš„ä¼˜ç‚¹åŒ…æ‹¬ï¼š</p><ul><li>åœ¨é«˜ç»´ç©ºé—´ä¸­è¡Œä¹‹æœ‰æ•ˆã€‚</li><li>å½“ç»´æ•°å¤§äºæ ·æœ¬æ•°æ—¶ä»ç„¶å¯ç”¨ã€‚</li><li>åœ¨å†³ç­–å‡½æ•°ä¸­åªä½¿ç”¨è®­ç»ƒç‚¹çš„ä¸€ä¸ªå­é›†ï¼ˆç§°ä¸ºæ”¯æŒå‘é‡ï¼‰ï¼Œå¤§å¤§èŠ‚çœäº†å†…å­˜å¼€é”€ã€‚</li><li>ç”¨é€”å¹¿æ³›ï¼šå†³ç­–å‡½æ•°ä¸­å¯ä»¥ä½¿ç”¨ä¸åŒçš„<a href="http://scikit-learn.org/stable/modules/svm.html#svm-kernels" target="_blank" rel="noopener">æ ¸å‡½æ•°</a>ã€‚æä¾›äº†ä¸€ç§é€šç”¨çš„æ ¸ï¼Œä½†æ˜¯ä¹Ÿå¯ä»¥æŒ‡å®šè‡ªå®šä¹‰çš„æ ¸ã€‚</li><li>è¿”å›çš„åˆ†å‰²ç›´çº¿æ»¡è¶³marginæœ€å¤§çš„æ¡ä»¶ï¼Œæ‰€ä»¥æ˜¯ä¸€ä¸ªrobustçš„è§£ã€‚</li><li><strong>SVMå¯¹æ•°æ®ç‚¹çš„ä¾èµ–æ˜¯ç¨€ç–çš„</strong>ï¼Œåªæœ‰å°‘é‡æ”¯æŒå‘é‡å¯¹æœ€ç»ˆç»“æœæœ‰è´¡çŒ®ã€‚</li></ul><p>è€Œå…¶åŠ£åŠ¿åœ¨äº</p><ul><li>å¦‚æœç‰¹å¾æ•°é‡è¿œå¤§äºæ ·æœ¬æ•°é‡ï¼Œåˆ™è¡¨ç°ä¼šæ¯”è¾ƒå·®ã€‚</li><li>SVMä¸ç›´æ¥æä¾›æ¦‚ç‡ä¼°è®¡ã€‚è¿™ä¸ªå€¼é€šè¿‡äº”æŠ˜äº¤å‰éªŒè¯è®¡ç®—ï¼Œä»£ä»·æ¯”è¾ƒé«˜ï¼ˆè§ä¸‹é¢â€œè·‘åˆ†ä¸æ¦‚ç‡â€ä¸€èŠ‚ï¼‰ã€‚</li><li>é¦–å…ˆSVMçš„ä¼˜åŒ–é—®é¢˜æ¯”è¾ƒå¤æ‚ï¼Œä¸ä»…äººéš¾ä»¥ç†è§£ï¼Œå†™èµ·ç¨‹åºæ¥ä¹Ÿæ¯”è¾ƒå¤æ‚ï¼Œå¿…é¡»è¦ç”¨åˆ°Sequential minimal optimizationï¼ˆSMOï¼‰ã€‚</li><li>å…¶æ¬¡ï¼Œä¼ ç»Ÿçš„SVMåªèƒ½å¤„ç†çº¿æ€§å¯åˆ†çš„é—®é¢˜ï¼Œå¹¶ä¸”å¯¹æ•°æ®ä¸­çš„å™ªéŸ³ä¹Ÿå¾ˆæ•æ„Ÿï¼Œå› æ­¤æˆ‘ä»¬å¿…è¦å¯¹ç®—æ³•è¿›è¡Œæ”¹é€ ã€‚</li></ul><p>Scikit-learnä¸­çš„æ”¯æŒå‘é‡æœºåŒæ—¶æ”¯æŒå¯†é›†æ ·æœ¬å‘é‡ï¼ˆ<code>numpy.ndarray</code>å’Œå¯é€šè¿‡<code>numpy.asarray</code>è½¬åŒ–çš„æ•°æ®ç±»å‹ï¼‰å’Œç¨€ç–æ ·æœ¬å‘é‡ï¼ˆä»»ä½•<code>scipy.sparse</code>å¯¹è±¡ï¼‰ã€‚ä½†æ˜¯å¦‚æœæƒ³ç”¨SVMå¯¹ç¨€ç–æ•°æ®è¿›è¡Œé¢„æµ‹ï¼Œåˆ™å¿…é¡»å…ˆåœ¨è¿™äº›æ•°æ®ä¸Šæ‹Ÿåˆã€‚ä¸ºäº†ä¼˜åŒ–æ€§èƒ½ï¼Œåº”è¯¥ä½¿ç”¨Cé˜¶ï¼ˆC-Orderedï¼‰<code>numpy.ndarray</code>ï¼ˆå¯†é›†çš„ï¼‰æˆ–<code>scipy.sparse.csr_matrix</code>ï¼ˆç¨€ç–çš„ï¼‰ï¼Œå¹¶æŒ‡å®š<code>dtype=float64</code>ã€‚</p><a id="more"></a><h2 id="åˆ†ç±»"><a href="#åˆ†ç±»" class="headerlink" title="åˆ†ç±»"></a>åˆ†ç±»</h2><p>è¦åœ¨æ•°æ®é›†ä¸Šè¿›è¡Œå¤šç±»åˆ«åˆ†ç±»ï¼Œå¯ä»¥ä½¿ç”¨<a href="http://scikit-learn.org/stable/modules/generated/sklearn.svm.SVC.html#sklearn.svm.SVC" target="_blank" rel="noopener"><code>SVC</code></a>ï¼Œ<a href="http://scikit-learn.org/stable/modules/generated/sklearn.svm.NuSVC.html#sklearn.svm.NuSVC" target="_blank" rel="noopener"><code>NuSVC</code></a>å’Œ<a href="http://scikit-learn.org/stable/modules/generated/sklearn.svm.LinearSVC.html#sklearn.svm.LinearSVC" target="_blank" rel="noopener"><code>LinearSVC</code></a>è¿™ä¸‰ä¸ªç±»ã€‚</p><p><img src="http://scikit-learn.org/stable/_images/sphx_glr_plot_iris_001.png" alt="sphx_glr_plot_iris_0012"></p><p> <code>SVC</code>å’Œ<code>NuSVC</code>ä¸¤ç§æ–¹æ³•ç±»ä¼¼ï¼Œä½†æ˜¯æ¥å—çš„å‚æ•°æœ‰ç»†å¾®ä¸åŒï¼Œè€Œä¸”åº•å±‚çš„æ•°å­¦åŸç†ä¸ä¸€æ ·ï¼ˆè§â€œæ•°å­¦åŸç†â€ä¸€èŠ‚ï¼‰ã€‚å¦ä¸€æ–¹é¢ï¼Œ<code>LinearSVC</code>æ˜¯å¯¹æ”¯æŒå‘é‡åˆ†ç±»çš„å¦ä¸€ç§å®ç°ï¼Œä½¿ç”¨äº†çº¿æ€§æ ¸ã€‚æ³¨æ„<code>LinearSVC</code>ä¸æ¥å—å…³é”®å­—<code>kernel</code>ï¼Œå› ä¸ºæ ¸è¢«é¢„è®¾ä¸ºæ˜¯çº¿æ€§çš„ã€‚å…¶ä¸<code>SVC</code>å’Œ<code>NuSVC</code>ç›¸æ¯”è¿˜ç¼ºå°‘äº†ä¸€äº›æˆå‘˜ï¼Œå¦‚<code>support_</code>ã€‚</p><p>å’Œå…¶å®ƒåˆ†ç±»å™¨ä¸€æ ·ï¼Œ<a href="http://scikit-learn.org/stable/modules/generated/sklearn.svm.SVC.html#sklearn.svm.SVC" target="_blank" rel="noopener"><code>SVC</code></a>ï¼Œ<a href="http://scikit-learn.org/stable/modules/generated/sklearn.svm.NuSVC.html#sklearn.svm.NuSVC" target="_blank" rel="noopener"><code>NuSVC</code></a>å’Œ<a href="http://scikit-learn.org/stable/modules/generated/sklearn.svm.LinearSVC.html#sklearn.svm.LinearSVC" target="_blank" rel="noopener"><code>LinearSVC</code></a>æ¥å—ä¸¤ä¸ªæ•°ç»„ï¼šå¤§å°ä¸º<code>[n_samples, n_features]</code>çš„æ•°ç»„Xï¼ŒåŒ…å«è®­ç»ƒæ ·æœ¬ï¼›ä»¥åŠå¤§å°ä¸º<code>[n_samples]</code>çš„æ•°ç»„yï¼ŒåŒ…å«ç±»åˆ«æ ‡ç­¾ï¼ˆä»¥å­—ç¬¦ä¸²ç±»å‹æˆ–æ•´å‹å­˜å‚¨ï¼‰ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">from</span> sklearn <span class="keyword">import</span> svm</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>X = [[<span class="number">0</span>, <span class="number">0</span>], [<span class="number">1</span>, <span class="number">1</span>]]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>y = [<span class="number">0</span>, <span class="number">1</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>clf = svm.SVC()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>clf.fit(X, y)  </span><br><span class="line">SVC(C=<span class="number">1.0</span>, cache_size=<span class="number">200</span>, class_weight=<span class="keyword">None</span>, coef0=<span class="number">0.0</span>,</span><br><span class="line">    decision_function_shape=<span class="keyword">None</span>, degree=<span class="number">3</span>, gamma=<span class="string">'auto'</span>, kernel=<span class="string">'rbf'</span>,</span><br><span class="line">    max_iter=<span class="number">-1</span>, probability=<span class="keyword">False</span>, random_state=<span class="keyword">None</span>, shrinking=<span class="keyword">True</span>,</span><br><span class="line">    tol=<span class="number">0.001</span>, verbose=<span class="keyword">False</span>)</span><br></pre></td></tr></table></figure><p>æ‹Ÿåˆä»¥åå°±å¯ä»¥ç”¨å¾—åˆ°çš„æ¨¡å‹é¢„æµ‹æ–°å€¼</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>clf.predict([[<span class="number">2.</span>, <span class="number">2.</span>]])</span><br><span class="line">array([<span class="number">1</span>])</span><br></pre></td></tr></table></figure><p>SVMçš„å†³ç­–å‡½æ•°ä¾èµ–äºè®­ç»ƒæ•°æ®çš„ä¸€ä¸ªå­é›†ï¼Œç§°ä¸ºæ”¯æŒå‘é‡ã€‚å®ƒä»¬çš„ä¸€äº›å±æ€§å¯ä»¥åœ¨æˆå‘˜å˜é‡<code>support_vectors_</code>ï¼Œ<code>support_</code>å’Œ<code>n_support</code>ä¸­æ‰¾åˆ°</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="comment"># get support vectors</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>clf.support_vectors_</span><br><span class="line">array([[ <span class="number">0.</span>,  <span class="number">0.</span>],</span><br><span class="line">       [ <span class="number">1.</span>,  <span class="number">1.</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="comment"># get indices of support vectors</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>clf.support_ </span><br><span class="line">array([<span class="number">0</span>, <span class="number">1</span>]...)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="comment"># get number of support vectors for each class</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>clf.n_support_ </span><br><span class="line">array([<span class="number">1</span>, <span class="number">1</span>]...)</span><br></pre></td></tr></table></figure><h3 id="å¤šç±»åˆ«åˆ†ç±»"><a href="#å¤šç±»åˆ«åˆ†ç±»" class="headerlink" title="å¤šç±»åˆ«åˆ†ç±»"></a>å¤šç±»åˆ«åˆ†ç±»</h3><p><code>SVC</code>å’Œ<code>NuSVC</code>ä½¿ç”¨â€œä¸€å¯¹å¤šâ€æ–¹æ³•ï¼ˆKnerr et al., 1990ï¼‰æ¥å®ç°å¤šç±»åˆ«åˆ†ç±»ã€‚å¦‚æœ<code>n_class</code>æ˜¯ç±»åˆ«çš„æ•°ç›®ï¼Œåˆ™è¯¥å®ç°ä¼šæ„é€ <code>n_class * (n_class - 1) / 2</code>ä¸ªåˆ†ç±»å™¨ï¼Œæ¯ä¸ªåˆ†ç±»å™¨é’ˆå¯¹ä¸¤ä¸ªç±»åˆ«å¯¹æ•°æ®è¿›è¡Œè®­ç»ƒã€‚ä¸ºäº†æä¾›ä¸€ä¸ªå’Œå…¶å®ƒåˆ†ç±»å™¨ä¸€è‡´çš„æ¥å£ï¼Œé€‰é¡¹<code>decision_function_shape</code>å…è®¸è°ƒç”¨è€…å°†æ‰€æœ‰â€œä¸€å¯¹ä¸€â€åˆ†ç±»å™¨çš„ç»“æœèšåˆè¿›ä¸€ä¸ª<code>(n_samples, n_classes)</code>çš„å†³ç­–å‡½æ•°</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>X = [[<span class="number">0</span>], [<span class="number">1</span>], [<span class="number">2</span>], [<span class="number">3</span>]]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>Y = [<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>clf = svm.SVC(decision_function_shape=<span class="string">'ovo'</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>clf.fit(X, Y) </span><br><span class="line">SVC(C=<span class="number">1.0</span>, cache_size=<span class="number">200</span>, class_weight=<span class="keyword">None</span>, coef0=<span class="number">0.0</span>,</span><br><span class="line">    decision_function_shape=<span class="string">'ovo'</span>, degree=<span class="number">3</span>, gamma=<span class="string">'auto'</span>, kernel=<span class="string">'rbf'</span>,</span><br><span class="line">    max_iter=<span class="number">-1</span>, probability=<span class="keyword">False</span>, random_state=<span class="keyword">None</span>, shrinking=<span class="keyword">True</span>,</span><br><span class="line">    tol=<span class="number">0.001</span>, verbose=<span class="keyword">False</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>dec = clf.decision_function([[<span class="number">1</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>dec.shape[<span class="number">1</span>] <span class="comment"># 4 classes: 4*3/2 = 6</span></span><br><span class="line"><span class="number">6</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>clf.decision_function_shape = <span class="string">"ovr"</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>dec = clf.decision_function([[<span class="number">1</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>dec.shape[<span class="number">1</span>] <span class="comment"># 4 classes</span></span><br><span class="line"><span class="number">4</span></span><br></pre></td></tr></table></figure><p>å¦ä¸€æ–¹é¢ï¼Œ<code>LinearSVC</code>å®ç°äº†â€œä¸€å¯¹å¤šâ€åˆ†ç±»æ³•ï¼Œå› æ­¤ä¼šè®­ç»ƒ<code>n_class</code>ä¸ªæ¨¡å‹ã€‚å¦‚æœåªæœ‰ä¸¤ä¸ªç±»åˆ«ï¼Œé‚£ä¹ˆåªä¼šå¾—åˆ°ä¸€ä¸ªæ¨¡å‹ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>lin_clf = svm.LinearSVC()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>lin_clf.fit(X, Y) </span><br><span class="line">LinearSVC(C=<span class="number">1.0</span>, class_weight=<span class="keyword">None</span>, dual=<span class="keyword">True</span>, fit_intercept=<span class="keyword">True</span>,</span><br><span class="line">     intercept_scaling=<span class="number">1</span>, loss=<span class="string">'squared_hinge'</span>, max_iter=<span class="number">1000</span>,</span><br><span class="line">     multi_class=<span class="string">'ovr'</span>, penalty=<span class="string">'l2'</span>, random_state=<span class="keyword">None</span>, tol=<span class="number">0.0001</span>,</span><br><span class="line">     verbose=<span class="number">0</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>dec = lin_clf.decision_function([[<span class="number">1</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>dec.shape[<span class="number">1</span>]</span><br><span class="line"><span class="number">4</span></span><br></pre></td></tr></table></figure><p>å†³ç­–å‡½æ•°çš„å®Œæ•´æè¿°å¯è§â€œæ•°å­¦åŸç†â€ä¸€èŠ‚ã€‚</p><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ<code>LinearSVC</code>è¿˜å®ç°äº†å¦ä¸€ç§åˆ†ç±»ç­–ç•¥ï¼Œå³æ‰€è°“çš„å¤šç±»åˆ«SVMï¼ˆç”±Crammerå’ŒSingeræå‡ºï¼‰ã€‚é€šè¿‡æŒ‡å®š<code>multi_class=&#39;crammer_singer&#39;</code>ï¼Œå¯ä»¥ä½¿ç”¨è¯¥æ–¹æ³•ã€‚å®ƒå¾—åˆ°çš„ç»“æœæ€»æ˜¯ä¸€è‡´çš„ï¼Œä½†æ˜¯ä¸€å¯¹å¤šåˆ†ç±»æ³•å¹¶ä¸èƒ½ä¿è¯è¿™ä¸€ç‚¹ã€‚ç„¶è€Œåœ¨å®é™…åº”ç”¨ä¸­ï¼Œè¿˜æ˜¯ä¸€å¯¹å¤šåˆ†ç±»æ³•ç”¨çš„æ›´å¤šï¼Œå› ä¸ºé€šå¸¸æ¥è®²è¯¥æ–¹æ³•å¾—åˆ°çš„ç»“æœå˜åŒ–ä¸ä¼šå¤ªå¤§ï¼ˆmostly similarï¼‰ï¼Œè€Œä¸”ç”¨çš„æ—¶é—´æ˜¾è‘—çš„çŸ­ã€‚</p><p>ä¸€å¯¹å¤š<code>LinearSVC</code>å¾—åˆ°çš„å±æ€§ä¸­ï¼Œ<code>coef_</code>æ˜¯<code>n_class * n_features</code>ç»´çŸ©é˜µï¼Œè€Œ<code>intercept_</code>æ˜¯<code>n_class * 1</code>ç»´çš„ã€‚ç³»æ•°ä¸­çš„æ¯ä¸€è¡Œéƒ½å¯¹åº”äºn_classä¸ªâ€œä¸€å¯¹å¤šâ€åˆ†ç±»å™¨ä¸­çš„ä¸€ä¸ªï¼ˆæˆªè·ä¹Ÿæ˜¯ç±»ä¼¼ï¼‰ï¼ŒæŒ‰ç…§æ¯ä¸ªä¸å…¶å®ƒç±»åˆ«è¿›è¡Œæ¯”è¾ƒçš„ç±»åˆ«é¡ºåºæ’åºï¼ˆin the order of the â€œoneâ€ classï¼‰ã€‚</p><p>è€Œåœ¨â€œä¸€å¯¹ä¸€â€<code>SVC</code>ä¸­ï¼Œå±æ€§çš„æ ¼å¼ç•¥å¾®æœ‰äº›å¤æ‚éš¾æ‡‚ã€‚åœ¨æœ‰çº¿æ€§æ ¸çš„æƒ…å†µä¸‹ï¼Œ<code>coef_</code>å’Œ<code>intercept_</code>çš„æ ¼å¼ä¸ä¸Šé¢æ‰€è¿°<code>LinearSVC</code>çš„ç±»ä¼¼ï¼Œåªä¸è¿‡<code>coef</code>çš„å¤§å°ä¸º<code>[n_class * (n_class - 1) / 2, n_features]</code>ï¼ˆå¯¹åº”äºäºŒå…ƒåˆ†ç±»å™¨çš„ä¸ªæ•°ï¼‰ã€‚ç±»åˆ«0åˆ°nçš„é¡ºåºæ˜¯â€œ0 vs 1â€, â€œ0 vs 2â€ , â€¦ â€œ0 vs nâ€, â€œ1 vs 2â€, â€œ1 vs 3â€, â€œ1 vs nâ€, . . . â€œn-1 vs nâ€ã€‚</p><p><code>dual_coef</code>çš„å¤§å°æ˜¯[n_class-1, n_SV]ï¼Œä¸è¿‡æ ¼å¼æœ‰äº›éš¾ä»¥æè¿°ã€‚åˆ—å¯¹åº”äº<code>n_class * (n_class - 1) / 2</code>ä¸ªâ€œä¸€å¯¹ä¸€â€åˆ†ç±»å™¨ä¸­å‡ºç°çš„æ”¯æŒå‘é‡ã€‚æ¯ä¸ªæ”¯æŒå‘é‡è¢«ç”¨äº<code>n_class - 1</code>ä¸ªåˆ†ç±»å™¨ä¸­ã€‚æ¯ä¸€è¡Œä¸­<code>n_class - 1</code>ä¸ªé¡¹ç›®å¯¹åº”äºè¿™äº›åˆ†ç±»å™¨çš„å¯¹å¶ç³»æ•°ï¼ˆdual coefficientï¼‰ã€‚</p><h3 id="å¾—åˆ†å’Œæ¦‚ç‡"><a href="#å¾—åˆ†å’Œæ¦‚ç‡" class="headerlink" title="å¾—åˆ†å’Œæ¦‚ç‡"></a>å¾—åˆ†å’Œæ¦‚ç‡</h3><p><code>SVC</code>ä¸­çš„<code>decision_function</code>æ–¹æ³•å¯¹æ¯ä¸ªæ ·æœ¬éƒ½ä¼šç»™å‡ºåœ¨å„ä¸ªç±»åˆ«ä¸Šçš„åˆ†æ•°ï¼ˆåœ¨äºŒå…ƒåˆ†ç±»é—®é¢˜ä¸­ï¼Œæ˜¯å¯¹æ¯ä¸ªæ ·æœ¬ç»™å‡ºä¸€ä¸ªåˆ†æ•°ï¼‰ã€‚å¦‚æœæ„é€ å‡½æ•°çš„<code>probability</code>è¢«è®¾ä¸º<code>True</code>ï¼Œåˆ™å¯ä»¥å¾—åˆ°å±äºæ¯ä¸ªç±»åˆ«çš„æ¦‚ç‡ä¼°è®¡ï¼ˆé€šè¿‡<code>predict_proba</code>å’Œ<code>predict_log_proba</code>æ–¹æ³•ï¼‰ã€‚åœ¨äºŒå…ƒåˆ†ç±»ä¸­ï¼Œæ¦‚ç‡ä½¿ç”¨Plattç¼©æ”¾è¿›è¡Œè°ƒæ•´ï¼šé€šè¿‡åœ¨è®­ç»ƒæœºä¸Šåšé¢å¤–çš„äº¤å‰æ£€éªŒæ¥æ‹Ÿåˆä¸€ä¸ªåœ¨SVMåˆ†æ•°ä¸Šçš„Logisticå›å½’ã€‚åœ¨å¤šå…ƒåˆ†ç±»ä¸­ï¼Œè¿™ç§æ–¹æ³•è¢«Wu et al. (2004)æ‰©å±•äº†ã€‚</p><p>æ˜¾è€Œæ˜“è§çš„æ˜¯ï¼ŒPlattç¼©æ”¾ä¸­çš„äº¤å‰æ£€éªŒåœ¨å¤§æ•°æ®é›†ä¸Šæ˜¯ä¸€ä¸ªä»£ä»·å¾ˆé«˜çš„æ“ä½œã€‚æ­¤å¤–ï¼Œæ¦‚ç‡ä¼°è®¡ä¸å®é™…å¾—åˆ†å¯èƒ½ä¼šä¸ä¸€è‡´ï¼Œå³ä½¿å¾—åˆ†å–å¾—äº†æœ€å¤§å€¼ï¼Œæ¦‚ç‡å¹¶ä¸ä¸€å®šä¹Ÿèƒ½å–åˆ°æœ€å¤§å€¼ã€‚ï¼ˆä¾‹å¦‚åœ¨äºŒå…ƒåˆ†ç±»ä¸­ï¼ŒæŸä¸ªæ ·æœ¬ç»ç”±<code>predict</code>æ–¹æ³•å¾—åˆ°çš„åˆ†ç±»æ ‡ç­¾ï¼Œå¦‚æœä½¿ç”¨<code>predict_proba</code>è®¡ç®—å¯èƒ½æ¦‚ç‡å°äº1/2ã€‚ï¼‰Plattçš„æ–¹æ³•åœ¨ç†è®ºä¸Šä¹Ÿæœ‰ä¸€äº›é—®é¢˜ã€‚å¦‚æœéœ€è¦æ‹¿åˆ°ç½®ä¿¡åˆ†æ•°ï¼Œè€Œè¿™äº›åˆ†æ•°åˆä¸ä¸€å®šéå¾—æ˜¯æ¦‚ç‡ï¼Œåˆ™å»ºè®®æŠŠ<code>probability</code>ç½®ä¸º<code>False</code>ï¼Œå¹¶ä¸”ä½¿ç”¨<code>decision_function</code>ï¼Œè€Œä¸æ˜¯<code>predict_proba</code>ã€‚</p><blockquote><p>å‚è€ƒæ–‡çŒ®ï¼š</p><ul><li>Wu, Lin and Weng, <a href="http://www.csie.ntu.edu.tw/~cjlin/papers/svmprob/svmprob.pdf" target="_blank" rel="noopener">â€œProbability estimates for multi-class classification by pairwise couplingâ€</a>, JMLR 5:975-1005, 2004.</li><li><a href="http://www.cs.colorado.edu/~mozer/Teaching/syllabi/6622/papers/Platt1999.pdf" target="_blank" rel="noopener">Platt â€œProbabilistic outputs for SVMs and comparisons to regularized likelihood methodsâ€ </a>.</li></ul></blockquote><h3 id="ä¸å¹³è¡¡é—®é¢˜"><a href="#ä¸å¹³è¡¡é—®é¢˜" class="headerlink" title="ä¸å¹³è¡¡é—®é¢˜"></a>ä¸å¹³è¡¡é—®é¢˜</h3><p>åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œä¸€äº›æŒ‡å®šçš„ç±»åˆ«æˆ–æŸå‡ ä¸ªæ ·æœ¬å…³é”®å­—å¯èƒ½æ›´åŠ é‡è¦ï¼Œè¿™æ—¶å¯ä»¥ä½¿ç”¨<code>class_weight</code>å’Œ<code>sample_weight</code>ã€‚</p><p><code>SVC</code>ï¼ˆä¸æ˜¯<code>NuSVC</code>ï¼‰åœ¨<code>fit</code>æ–¹æ³•ä¸­å®ç°äº†å…³é”®å­—<code>class_weight</code>ã€‚è¯¥å…³é”®å­—æ˜¯å­—å…¸ç±»å‹ï¼Œå½¢å¼ä¸º<code>{class_label : value}</code>ï¼Œè¿™é‡Œ<code>value</code>æ˜¯ä¸€ä¸ªæ­£æµ®ç‚¹æ•°ï¼Œå°†ç±»åˆ«<code>class_label</code>çš„å‚æ•°<code>C</code>è®¾ä¸º<code>C * value</code>ã€‚</p><p><img src="http://scikit-learn.org/stable/_images/sphx_glr_plot_separating_hyperplane_unbalanced_001.png" alt="sphx_glr_plot_separating_hyperplane_unbalanced_0011"></p><p> <code>SVC</code>ï¼Œ<code>NuSVC</code>ï¼Œ<code>SVR</code>ï¼Œ<code>NuSVR</code>å’Œ<code>OneClassSVM</code>åŒæ ·åœ¨<code>fit</code>æ–¹æ³•ä¸­é€šè¿‡å…³é”®å­—<code>sample_weight</code>å®ç°äº†å¯¹å•ç‹¬æ ·æœ¬èµ‹äºˆç‰¹æ®Šæƒé‡çš„åŠŸèƒ½ã€‚ä¸<code>class_weight</code>ç±»ä¼¼ï¼Œå®ƒä»¬æŠŠç¬¬iä¸ªæ ·æœ¬çš„å‚æ•°<code>C</code>è®¾ä¸º<code>C * sample_weight[i]</code>ã€‚</p><p><img src="http://scikit-learn.org/stable/_images/sphx_glr_plot_weighted_samples_001.png" alt="sphx_glr_plot_weighted_samples_0011 (1)"></p><blockquote><ul><li><a href="http://scikit-learn.org/stable/auto_examples/svm/plot_iris.html#example-svm-plot-iris-py" target="_blank" rel="noopener">åœ¨irisæ•°æ®é›†ä¸­è¯•éªŒä¸åŒçš„SVMåˆ†ç±»å™¨ï¼Œå¹¶ä½œå›¾æ¯”è¾ƒ</a></li><li><a href="http://scikit-learn.org/stable/auto_examples/svm/plot_separating_hyperplane.html#example-svm-plot-separating-hyperplane-py" target="_blank" rel="noopener">SVMï¼šæœ€å¤§åŒ–é—´éš”åˆ†ç¦»è¶…å¹³é¢</a></li><li><a href="http://scikit-learn.org/stable/auto_examples/svm/plot_separating_hyperplane_unbalanced.html#example-svm-plot-separating-hyperplane-unbalanced-py" target="_blank" rel="noopener">SVMï¼šä¸å¹³è¡¡ç±»åˆ«çš„åˆ†ç¦»è¶…å¹³é¢</a></li><li><a href="http://scikit-learn.org/stable/auto_examples/svm/plot_svm_anova.html#example-svm-plot-svm-anova-py" target="_blank" rel="noopener">SVM-Anovaï¼šå¸¦æœ‰å•å˜é‡ç‰¹å¾é€‰æ‹©çš„SVM</a></li><li><a href="http://scikit-learn.org/stable/auto_examples/svm/plot_svm_nonlinear.html#example-svm-plot-svm-nonlinear-py" target="_blank" rel="noopener">éçº¿æ€§SVM</a></li><li><a href="http://scikit-learn.org/stable/auto_examples/svm/plot_weighted_samples.html#example-svm-plot-weighted-samples-py" target="_blank" rel="noopener">SVMï¼šå¸¦æƒé‡é—®é¢˜çš„ä¾‹å­</a></li></ul></blockquote><h2 id="å›å½’"><a href="#å›å½’" class="headerlink" title="å›å½’"></a>å›å½’</h2><p>æ”¯æŒå‘é‡åˆ†ç±»è¿™æ ·çš„æ–¹æ³•å¯ä»¥ç»æ‰©å±•ç”¨åœ¨å›å½’é—®é¢˜ä¸Šï¼Œç§°ä½œæ”¯æŒå‘é‡å›å½’ã€‚</p><p>æ”¯æŒå‘é‡åˆ†ç±»äº§ç”Ÿçš„æ¨¡å‹ï¼Œå¦‚ä¸Šæ‰€è¿°ï¼Œåªä¾èµ–äºè®­ç»ƒæ•°æ®çš„ä¸€ä¸ªå­é›†ã€‚å…¶åŸå› åœ¨äºï¼Œæ„é€ æ¨¡å‹æ—¶ç”¨åˆ°çš„ä»£ä»·å‡½æ•°å¹¶ä¸å…³å¿ƒé‚£äº›ä¸åœ¨è¾¹ç•Œä¸Šçš„æ•°æ®ç‚¹ã€‚ç±»ä¼¼çš„ï¼Œæ”¯æŒå‘é‡å›å½’æ‰€ç”Ÿæˆçš„æ¨¡å‹ä¹Ÿåªä¾èµ–äºè®­ç»ƒæ•°æ®çš„ä¸€ä¸ªè‡ªå·±ï¼Œå› ä¸ºæ„é€ æ¨¡å‹æ—¶ç”¨åˆ°çš„ä»£ä»·å‡½æ•°ç”¨ä¸ä¸Šé‚£äº›ä¸é¢„æµ‹å€¼å¾ˆæ¥è¿‘çš„è®­ç»ƒæ•°æ®ã€‚</p><p>æ”¯æŒå‘é‡å›å½’æœ‰ä¸‰ç§ä¸åŒå®ç°ï¼š<a href="http://scikit-learn.org/stable/modules/generated/sklearn.svm.SVR.html#sklearn.svm.SVR" target="_blank" rel="noopener"><code>SVR</code></a>, <a href="http://scikit-learn.org/stable/modules/generated/sklearn.svm.NuSVR.html#sklearn.svm.NuSVR" target="_blank" rel="noopener"><code>NuSVR</code></a>å’Œ<a href="http://scikit-learn.org/stable/modules/generated/sklearn.svm.LinearSVR.html#sklearn.svm.LinearSVR" target="_blank" rel="noopener"><code>LinearSVR</code></a>ã€‚<code>LinearSVR</code>æä¾›çš„å®ç°æ¯”<code>SVR</code>å¿«ï¼Œä½†æ˜¯åªä½¿ç”¨çº¿æ€§æ ¸ã€‚<code>NuSVR</code>åˆ™æ˜¯ä½¿ç”¨äº†ä¸€ä¸ªç•¥ä¸åŒçš„æ•°å­¦åŸç†ã€‚ç»†èŠ‚è§åé¢â€œå®ç°ç»†èŠ‚â€éƒ¨åˆ†ã€‚</p><p>ä¸åˆ†ç±»é—®é¢˜ç±»ä¼¼ï¼Œ<code>fit</code>æ–¹æ³•æ¥å—å‘é‡Xå’Œyä½œä¸ºå‚æ•°ï¼Œä¸è¿‡è¿™é‡Œyåº”è¯¥æ˜¯æµ®ç‚¹å‹è€Œä¸æ˜¯æ•´å‹ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">from</span> sklearn <span class="keyword">import</span> svm</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>X = [[<span class="number">0</span>, <span class="number">0</span>], [<span class="number">2</span>, <span class="number">2</span>]]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>y = [<span class="number">0.5</span>, <span class="number">2.5</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>clf = svm.SVR()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>clf.fit(X, y) </span><br><span class="line">SVR(C=<span class="number">1.0</span>, cache_size=<span class="number">200</span>, coef0=<span class="number">0.0</span>, degree=<span class="number">3</span>, epsilon=<span class="number">0.1</span>, gamma=<span class="string">'auto'</span>,</span><br><span class="line">    kernel=<span class="string">'rbf'</span>, max_iter=<span class="number">-1</span>, shrinking=<span class="keyword">True</span>, tol=<span class="number">0.001</span>, verbose=<span class="keyword">False</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>clf.predict([[<span class="number">1</span>, <span class="number">1</span>]])</span><br><span class="line">array([ <span class="number">1.5</span>])</span><br></pre></td></tr></table></figure><blockquote><ul><li><a href="http://scikit-learn.org/stable/auto_examples/svm/plot_svm_regression.html#example-svm-plot-svm-regression-py" target="_blank" rel="noopener">ä½¿ç”¨çº¿æ€§æ ¸å’Œéçº¿æ€§æ ¸è¿›è¡Œæ”¯æŒå‘é‡å›å½’ï¼ˆSVR)</a></li></ul></blockquote><h2 id="å¯†åº¦ä¼°è®¡ä¸æ–°å¥‡å€¼æ£€æµ‹ï¼ˆnovelty-detectionï¼‰"><a href="#å¯†åº¦ä¼°è®¡ä¸æ–°å¥‡å€¼æ£€æµ‹ï¼ˆnovelty-detectionï¼‰" class="headerlink" title="å¯†åº¦ä¼°è®¡ä¸æ–°å¥‡å€¼æ£€æµ‹ï¼ˆnovelty detectionï¼‰"></a>å¯†åº¦ä¼°è®¡ä¸æ–°å¥‡å€¼æ£€æµ‹ï¼ˆnovelty detectionï¼‰</h2><p>å•ç±»åˆ«SVMå¯ç”¨äºæ–°å¥‡å€¼æ£€æµ‹ï¼Œå³ç»™å®šä¸€ç»„æ ·æœ¬ï¼Œæ£€æµ‹å‡ºè¯¥æ•°æ®é›†çš„è½¯è¾¹ç•Œï¼Œä»¥åˆ¤æ–­æ–°æ•°æ®ç‚¹æ˜¯å¦å±äºè¯¥æ•°æ®é›†ã€‚<a href="http://scikit-learn.org/stable/modules/generated/sklearn.svm.OneClassSVM.html#sklearn.svm.OneClassSVM" target="_blank" rel="noopener"><code>OneClassSVM</code></a>ç±»å®ç°è¯¥æ–¹æ³•ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œç”±äºè¿™æ˜¯ä¸€ç§æ— ç›‘ç£å­¦ä¹ ï¼Œæ•°æ®æ²¡æœ‰ç±»åˆ«æ ‡ç­¾ï¼Œå› æ­¤<code>fit</code>æ–¹æ³•åªæ¥å—æ•°ç»„Xä½œä¸ºè¾“å…¥ã€‚è§<a href="http://scikit-learn.org/stable/modules/outlier_detection.html#outlier-detection" target="_blank" rel="noopener">æ–°å¥‡å€¼ä¸å¼‚å¸¸å€¼æ£€æµ‹æ£€æµ‹</a>ä¸€èŠ‚äº†è§£æ›´å¤šç”¨æ³•ã€‚</p><p><img src="http://scikit-learn.org/stable/_images/sphx_glr_plot_oneclass_001.png" alt="sphx_glr_plot_oneclass_0011"></p><blockquote><ul><li><a href="http://scikit-learn.org/stable/auto_examples/svm/plot_oneclass.html#example-svm-plot-oneclass-py" target="_blank" rel="noopener">ä½¿ç”¨éçº¿æ€§æ ¸ï¼ˆRBFï¼‰çš„å•ç±»åˆ«SVM</a></li><li><a href="http://scikit-learn.org/stable/auto_examples/applications/plot_species_distribution_modeling.html#example-applications-plot-species-distribution-modeling-py" target="_blank" rel="noopener">ç§ç±»åˆ†å¸ƒå»ºæ¨¡</a></li></ul></blockquote><h2 id="åº”ç”¨å»ºè®®"><a href="#åº”ç”¨å»ºè®®" class="headerlink" title="åº”ç”¨å»ºè®®"></a>åº”ç”¨å»ºè®®</h2><ul><li><strong>é¿å…æ•°æ®æ‹·è´</strong>ï¼šå¯¹<code>SVC</code>ã€<code>SVR</code>ã€<code>NuSVC</code>å’Œ<code>NuSVR</code>ï¼Œå¦‚æœä¼ ç»™ç‰¹å®šæ–¹æ³•çš„æ•°æ®ä¸æ˜¯ä»¥Cè¯­è¨€æ‰€ä½¿ç”¨çš„é¡ºåºæ’åˆ—ï¼Œè€Œä¸”æ˜¯doubleç²¾åº¦ï¼Œé‚£ä¹ˆè¯¥æ•°æ®ä¼šåœ¨è°ƒç”¨åº•å±‚Cå®ç°ä¹‹å‰è¢«æ‹·è´ä¸€ä»½ã€‚é€šè¿‡æ£€æŸ¥<code>flag</code>å±æ€§ï¼Œå¯ä»¥æ£€æŸ¥ç»™å®šçš„numpyæ•°ç»„æ˜¯å¦æ˜¯ä»¥Cæ ¼å¼çš„è¿ç»­å­˜å‚¨æ–¹å¼æ’åˆ—çš„ã€‚å¯¹<code>LinearSVC</code>å’Œ<code>LogisticRegression</code>ï¼Œä»»ä½•ä»¥numpyæ•°ç»„å½¢å¼ä¼ å…¥çš„è¾“å…¥éƒ½ä¼šè¢«æ‹·è´ï¼Œç„¶åè½¬åŒ–ä¸ºliblinearå†…éƒ¨çš„ç¨€ç–æ•°æ®è¡¨ç¤ºå½¢å¼ï¼ˆåŒç²¾åº¦æµ®ç‚¹æ•°ï¼Œå¯¹éé›¶å…ƒç´ å­˜å‚¨32ä½æ•´å‹çš„ç´¢å¼•ï¼‰ã€‚å¦‚æœä½ æƒ³è®­ç»ƒä¸€ä¸ªå¤§è§„æ¨¡çš„çº¿æ€§åˆ†ç±»å™¨ï¼Œè€Œåˆä¸æƒ³æ‹·è´ä¸€ä¸ªç¨ å¯†çš„numpy C-å­˜å‚¨åŒç²¾åº¦æ•°ç»„ï¼Œæˆ‘ä»¬å»ºè®®ä½¿ç”¨<code>SGDClassifier</code>ã€‚å¯ä»¥å¯¹å®ƒçš„ç›®æ ‡å‡½æ•°è¿›è¡Œé…ç½®ï¼Œä½¿å…¶ä¸<code>LinearSVC</code>æ¨¡å‹æ‰€ä½¿ç”¨çš„åŸºæœ¬ç›¸åŒã€‚</li><li><strong>æ ¸ç¼“å­˜å¤§å°</strong>ï¼šå¯¹<code>SVC</code>ã€<code>SVR</code>ã€<code>NuSVC</code>å’Œ<code>NuSVR</code>ï¼Œæ ¸ç¼“å­˜çš„å¤§å°å¯¹è¾ƒå¤§é—®é¢˜æ±‚è§£çš„è¿è¡Œæ—¶é—´æœ‰éå¸¸å¼ºçš„å½±å“ã€‚å¦‚æœä½ æœ‰è¶³å¤Ÿå†…å­˜ï¼Œå»ºè®®å°†<code>cache_size</code>è®¾ç½®ä¸ºä¸€ä¸ªé«˜äºé»˜è®¤å€¼200ï¼ˆMBï¼‰çš„å€¼ï¼Œæ¯”å¦‚500ï¼ˆMBï¼‰æˆ–1000ï¼ˆMBï¼‰ã€‚</li><li><strong>è®¾ç½®C</strong>ï¼šé»˜è®¤æƒ…å†µä¸‹<code>C</code>è®¾ä¸º1ï¼Œè¿™æ˜¯ä¸€ä¸ªåˆç†çš„é€‰æ‹©ã€‚å¦‚æœæ ·æœ¬ä¸­æœ‰è®¸å¤šå™ªéŸ³è§‚å¯Ÿç‚¹ï¼Œåˆ™åº”è¯¥å‡å°è¿™ä¸ªå€¼ã€‚è¿™æ„å‘³ç€å¯¹ä¼°è®¡ç»“æœè¿›è¡Œæ›´ä¸¥æ ¼çš„æ­£åˆ™åŒ–ã€‚</li><li>SVMç®—æ³•ä¼šå—æ•°æ®å–å€¼èŒƒå›´çš„å½±å“ï¼Œæ‰€ä»¥<strong>å¼ºçƒˆå»ºè®®åœ¨ä½¿ç”¨ä¹‹å‰å¯¹æ•°æ®è¿›è¡Œç¼©æ”¾</strong>ã€‚ä¾‹å¦‚æŠŠè¾“å…¥å‘é‡Xçš„æ¯ä¸ªå±æ€§ç¼©æ”¾åˆ°[0,1]æˆ–[-1,+1]å†…ï¼Œæˆ–è€…è¿›è¡Œæ ‡å‡†åŒ–ä½¿æ•°æ®çš„å‡å€¼ä¸º0æ–¹å·®ä¸º1ã€‚æ³¨æ„åœ¨æµ‹è¯•å‘é‡ä¸Šä¹Ÿè¦è¿›è¡Œ<strong>åŒæ ·çš„</strong>ç¼©æ”¾ï¼Œè¿™æ ·æ‰èƒ½å¾—åˆ°æœ‰æ„ä¹‰çš„ç»“æœã€‚å…³äºæ•°æ®ç¼©æ”¾å’Œæ ‡å‡†åŒ–çš„æ›´å¤šç»†èŠ‚ï¼Œå‚è§<a href="http://scikit-learn.org/stable/modules/preprocessing.html#preprocessing" target="_blank" rel="noopener">å¤„ç†æ•°æ®</a>ä¸€èŠ‚</li><li><code>NuSVC</code>/<code>OneClassVM</code>/<code>NuSVR</code>ä¸­çš„å‚æ•°<code>mu</code>ä¼°è®¡äº†è®­ç»ƒè¯¯å·®å’Œæ”¯æŒå‘é‡çš„æ¯”ç‡</li><li>åœ¨<code>SVC</code>ä¸­ï¼Œå¦‚æœè¦åˆ†ç±»çš„æ•°æ®æ˜¯ä¸å¹³è¡¡çš„ï¼ˆå¦‚æœ‰å¾ˆå¤šæ­£æ•°æ®ä½†æ˜¯å¾ˆå°‘è´Ÿæ•°æ®ï¼‰ï¼Œåº”è¯¥åŠ é€‰é¡¹<code>class_weight=&#39;balanced&#39;</code>ç„¶å/æˆ–è€…å°è¯•ä¸åŒçš„æƒ©ç½šé¡¹å‚æ•°<code>C</code>ã€‚</li><li><code>LinearSVC</code>çš„åº•å±‚å®ç°ä½¿ç”¨äº†éšæœºæ•°ç”Ÿæˆå™¨æ¥åœ¨æ‹Ÿåˆæ¨¡å‹æ—¶é€‰æ‹©ç‰¹å¾ã€‚å› æ­¤å¯¹åŒæ ·çš„è¾“å…¥æ•°æ®æœ‰ç•¥å¾®ä¸åŒçš„ç»“æœä¸æ˜¯æ€ªäº‹ã€‚å¦‚æœå‘ç”Ÿäº†è¿™æ ·çš„æƒ…å†µï¼Œè¯•ä¸€ä¸ªæ›´å°çš„tolå‚æ•°</li><li>åˆ©ç”¨<code>LinearSVC(loss=&#39;l2&#39;, penalty=&#39;l1&#39;, dual=False)</code>æ¥å¼•å…¥L1æƒ©ç½šé¡¹ä¼šäº§ç”Ÿä¸€ä¸ªç¨€ç–è§£ï¼Œå³ç‰¹å¾æƒé‡ä¸­åªæœ‰ä¸€å°‘éƒ¨åˆ†ä¸ä¸º0ï¼Œä¼šå¯¹å†³ç­–å‡½æ•°äº§ç”Ÿè´¡çŒ®ã€‚å¢åŠ <code>C</code>ä¼šäº§ç”Ÿä¸€ä¸ªæ›´å¤æ‚çš„æ¨¡å‹ï¼ˆæœ‰æ›´å¤šç‰¹å¾è¢«é€‰æ‹©ï¼‰ã€‚å¯ä»¥é€šè¿‡<a href="http://scikit-learn.org/stable/modules/generated/sklearn.svm.l1_min_c.html#sklearn.svm.l1_min_c" target="_blank" rel="noopener"><code>l1_min_c</code></a>æ¥è®¡ç®—äº§ç”Ÿâ€œç©ºâ€æ¨¡å‹ï¼ˆæ‰€æœ‰æƒé‡éƒ½æ˜¯0ï¼‰çš„<code>C</code>å€¼ã€‚</li></ul><h2 id="å†…æ ¸å‡½æ•°"><a href="#å†…æ ¸å‡½æ•°" class="headerlink" title="å†…æ ¸å‡½æ•°"></a>å†…æ ¸å‡½æ•°</h2><p>å‡ç»´çš„æ€æƒ³ç®€å•è¯´æ¥å°±æ˜¯ï¼šåœ¨åŸæ¥featureçš„åŸºç¡€ä¸Šäººä¸ºçš„æ„é€ ä¸€äº›æ–°çš„featureï¼Œåœ¨æ›´é«˜ç»´åº¦çš„ç©ºé—´é‡Œï¼ŒåŸæ¥ä¸çº¿æ€§å¯åˆ†çš„é—®é¢˜å°±ä¼šå˜æˆçº¿æ€§å¯åˆ†çš„é—®é¢˜ï¼Œå°±åˆå¯ä»¥ç”¨svmäº†ã€‚</p><blockquote><p><a href="http://www.zhihu.com/question/30371867" target="_blank" rel="noopener">å¯¹é«˜ç»´ç©ºé—´é‡Œçš„çº¿æ€§å¯åˆ†</a></p></blockquote><p>å‡ç»´çš„æ€æƒ³ç¡®å®å¾ˆæ¼‚äº®ï¼Œä½†æ˜¯ç°å®å¾€å¾€æ˜¯å¾ˆéª¨æ„Ÿçš„ï¼šå¦‚æœå¯¹ä¸åŒçš„æ•°æ®é›†ï¼Œæ¯æ¬¡éƒ½è¦å¯»æ‰¾ä¸€ä¸ªåˆé€‚çš„å‡½æ•°ï¼Œæ¥æŠŠä½ç»´ç©ºé—´ä¸­çš„ç‚¹xæ˜ å°„åˆ°é«˜ç»´ç©ºé—´ä¸­å»æ˜¯ä¸€ä»¶å¾ˆå›°éš¾çš„äº‹æƒ…ã€‚<br>ä½†æ˜¯å›æƒ³ä¸€ä¸‹svmé‡Œçš„æœ€ç»ˆè¡¨è¾¾å¼ï¼Œå…¶å®å…·ä½“çš„è¡¨è¾¾å¼å¹¶ä¸åœ¨æœ€ç»ˆç»“æœé‡Œå‡ºç°ï¼Œå‡ºç°çš„åªæœ‰å†…ç§¯ã€‚å¦‚æœæœ‰åŠæ³•ç›´æ¥ç®—å‡ºé«˜ç»´ç©ºé—´ä¸­çš„æ–°å†…ç§¯ï¼Œå°±ä¸éœ€è¦è´¹åŠ›å»æ„é€ ã€‚</p><p>æ ¸å‡½æ•°ï¼ˆKernel methodï¼‰æ­£æ˜¯åŸºäºè¿™ä¸€æ€æƒ³çš„æŠ€å·§ã€‚æˆ‘ä»¬å¯ä»¥æŠŠkernelæƒ³è±¡æˆï¼Œç„¶åä¸å»æ“å¿ƒf(x)ï¼Œè€Œæ˜¯å°è¯•ä¸åŒçš„æ ¸å‡½æ•°å°±å¯ä»¥äº†ã€‚</p><p><strong>æ ¸å‡½æ•°</strong>å¯ä»¥æœ‰ä»¥ä¸‹å‡ ç§é€‰æ‹©ï¼š</p><ul><li>çº¿æ€§ï¼ˆlinearï¼‰æ ¸ï¼š $\langle x,x^{â€˜}\rangle$ ã€‚</li><li>å¤šé¡¹å¼ï¼ˆpolynomialï¼‰æ ¸ï¼š $\left (\gamma \left \langle x, {x}â€™  \right \rangle +r  \right )^{d}$ ã€‚å…¶ä¸­ $d$ ç”±é€‰é¡¹<code>degree</code>æŒ‡å®šï¼Œ$r$ ç”±<code>coef0</code>æŒ‡å®š</li><li>å¾„å‘åŸºGaussianï¼ˆRBFï¼‰å‡½æ•°ï¼š $\ exp( -  \ gamma \ | x-xâ€™\ | ^ 2)$ ã€‚å…¶ä¸­ $\gamma$ ç”±é€‰é¡¹<code>gamma</code>æŒ‡å®šï¼Œå¿…é¡»å¤§äº0</li><li>sigmoidå‡½æ•° $\tanhï¼ˆ\gamma \langle xï¼Œxâ€™\rangle + rï¼‰$ ï¼Œå…¶ä¸­ç”±é€‰é¡¹<code>coef0</code>æŒ‡å®š</li></ul><p>åœ¨åˆå§‹åŒ–æ—¶é€šè¿‡é€‰é¡¹<code>kernel</code>æŒ‡å®šç”¨ä»€ä¹ˆæ ¸</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>linear_svc = svm.SVC(kernel=<span class="string">'linear'</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>linear_svc.kernel</span><br><span class="line"><span class="string">'linear'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>rbf_svc = svm.SVC(kernel=<span class="string">'rbf'</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>rbf_svc.kernel</span><br><span class="line"><span class="string">'rbf'</span></span><br></pre></td></tr></table></figure><h3 id="è‡ªå®šä¹‰æ ¸"><a href="#è‡ªå®šä¹‰æ ¸" class="headerlink" title="è‡ªå®šä¹‰æ ¸"></a>è‡ªå®šä¹‰æ ¸</h3><p>Scikitæä¾›ä¸¤ç§æ–¹æ³•æ¥è‡ªå®šä¹‰æ ¸å‡½æ•°ï¼šç»™å‚æ•°<code>kernel</code>ä¼ å…¥ä¸€ä¸ªpythonå‡½æ•°ï¼Œæˆ–è€…æå‰è®¡ç®—å¥½GramçŸ©é˜µã€‚ä½¿ç”¨è‡ªå®šä¹‰æ ¸çš„åˆ†ç±»å™¨å’Œå…¶å®ƒåˆ†ç±»å™¨æœ‰ç±»ä¼¼çš„è¡Œä¸ºï¼Œä¸è¿‡ä»¥ä¸‹ä¸¤ç‚¹é™¤å¤–ï¼š</p><ul><li><code>support_vectors_</code>åŸŸä¸ºç©ºï¼Œåªåœ¨<code>support_</code>é‡Œé¢å­˜å‚¨æ”¯æŒå‘é‡çš„ç´¢å¼•</li><li>ä¼šä¸º<code>fit()</code>æ–¹æ³•çš„ç¬¬ä¸€ä¸ªå‚æ•°å­˜å‚¨ä¸€ä¸ªå¼•ç”¨ï¼ˆä¸æ˜¯æ‹·è´ï¼‰ï¼Œæ¥ä¸ºä»¥åå¼•ç”¨ä¹‹åšå‡†å¤‡ã€‚å¦‚æœåœ¨è°ƒç”¨<code>fit()</code>ä¹‹åï¼Œåœ¨è°ƒç”¨<code>predict()</code>ä¹‹å‰ä¿®æ”¹è¿™ä¸ªæ•°ç»„ï¼Œåˆ™ä¼šäº§ç”Ÿä¸€äº›ä¸å¯é¢„çŸ¥çš„ç»“æœã€‚</li></ul><h4 id="ä½¿ç”¨Pythonå‡½æ•°ä½œä¸ºæ ¸"><a href="#ä½¿ç”¨Pythonå‡½æ•°ä½œä¸ºæ ¸" class="headerlink" title="ä½¿ç”¨Pythonå‡½æ•°ä½œä¸ºæ ¸"></a>ä½¿ç”¨Pythonå‡½æ•°ä½œä¸ºæ ¸</h4><p>å¯ä»¥åœ¨æ„é€ å‡½æ•°ä¸­å‘å‚æ•°<code>kernel</code>ä¼ è¿›ä¸€ä¸ªå‡½æ•°ï¼Œæ¥ä½¿ç”¨è‡ªå®šä¹‰çš„æ ¸ã€‚è¯¥å‡½æ•°å¿…é¡»æ¥å—ä¸¤ä¸ªå¤§å°åˆ†åˆ«ä¸º<code>(n_samples_1, n_features)</code>, <code>(n_samples_2, n_features)</code>çš„çŸ©é˜µä½œä¸ºå‚æ•°ï¼Œè¿”å›ä¸€ä¸ªå¤§å°ä¸º<code>(n_samples_1, n_samples_2)</code>çš„æ ¸çŸ©é˜µã€‚</p><p>å¦‚ä¸‹ä»£ç å®šä¹‰äº†ä¸€ä¸ªçº¿æ€§æ ¸ï¼Œå¹¶ä½¿ç”¨è¯¥æ ¸åˆ›å»ºäº†ä¸€ä¸ªåˆ†ç±»å™¨å®ä¾‹</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">from</span> sklearn <span class="keyword">import</span> svm</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="function"><span class="keyword">def</span> <span class="title">my_kernel</span><span class="params">(X, Y)</span>:</span></span><br><span class="line"><span class="meta">... </span>    <span class="keyword">return</span> np.dot(X, Y.T)</span><br><span class="line">...</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>clf = svm.SVC(kernel=my_kernel)</span><br></pre></td></tr></table></figure><blockquote><p><a href="http://scikit-learn.org/stable/auto_examples/svm/plot_custom_kernel.html#example-svm-plot-custom-kernel-py" target="_blank" rel="noopener">ä½¿ç”¨è‡ªå®šä¹‰æ ¸çš„SVM</a></p></blockquote><h2 id="æ•°å­¦åŸç†"><a href="#æ•°å­¦åŸç†" class="headerlink" title="æ•°å­¦åŸç†"></a>æ•°å­¦åŸç†</h2><p>æ”¯æŒå‘é‡æœºçš„åŸç†æ˜¯åœ¨é«˜ç»´ç”šè‡³æ— é™ç»´ç©ºé—´ä¸­æ„å»ºä¸€ä¸ªè¶…å¹³é¢æˆ–è€…è‹¥å¹²è¶…å¹³é¢ç»„æˆçš„é›†åˆï¼Œå¹¶è—‰æ­¤ç”¨äºåˆ†ç±»ã€å›å½’æˆ–å…¶å®ƒä»»åŠ¡ã€‚ä»ç›´è§‰ä¸Šæ¥è®²ï¼Œå¥½çš„åˆ†éš”é¢æ˜¯ç”±ä½¿å¾—å‡½æ•°é—´éš”æœ€å¤§çš„è¶…å¹³é¢å¾—åˆ°ï¼ˆå³è¯¥è¶…å¹³é¢åˆ°ä»»ä½•ç±»åˆ«æœ€è¿‘è®­ç»ƒæ•°æ®ç‚¹çš„è·ç¦»éƒ½å–å¾—æœ€å¤§å€¼ï¼‰ï¼Œå› ä¸ºæ€»ä½“ä¸Šæ¥è®²ï¼Œé—´éš”è¶Šå¤§ï¼Œåˆ†ç±»å™¨çš„æ³›åŒ–è¯¯å·®è¶Šå°ã€‚</p><p><img src="http://scikit-learn.org/stable/_images/sphx_glr_plot_separating_hyperplane_0011.png" alt="sphx_glr_plot_separating_hyperplane_0011"></p><h3 id="SVC"><a href="#SVC" class="headerlink" title="SVC"></a>SVC</h3><p>ç»™å®šå¯èƒ½å±äºæŸä¸¤ç§ç±»åˆ«çš„è®­ç»ƒå‘é‡ $x_i \in \mathbb{R}, \ i=1,2,â€¦,n$ å’Œå‘é‡ $y \in \left\{ 1,-1 \right\}^{n}$ ï¼ŒSVCè§£å†³çš„é¦–è¦é—®é¢˜æ˜¯</p><script type="math/tex; mode=display">\min_{\omega ,b,\zeta} \frac{1}{2}\omega^{T}\omega + C \sum_{i=1}^{n}\zeta_i \\subject \ to \ y_i (\omega^{T}\phi(x_i)+b) \geqslant 1-\zeta_i, \\\zeta_i \geqslant 0,i=1,2,...,n</script><p>å…¶å¯¹å¶å½¢å¼ä¸º</p><script type="math/tex; mode=display">\min_{\alpha} \frac{1}{2} \alpha^{T}Q\alpha-e^{T}\alpha \\subject\ to\ y^{T}\alpha=0\\0 \leqslant \alpha_i \leqslant C,i=1,2,...,n</script><p>å…¶ä¸­ $e$ æ˜¯å…¨ $1$ å‘é‡ï¼Œ $C &gt; 0$ æ˜¯ä¸Šç•Œï¼Œ $Q$ æ˜¯ä¸€ä¸ªåŠæ­£å®šçŸ©é˜µï¼Œ$Q_{ij} \equiv y_i y_j K(x_i,x_j)$ ï¼Œå…¶ä¸­ $K(x_i,x_j) \equiv \phi(x_i)^{T} \phi(x_j)$ æ˜¯æ ¸ã€‚è¿™é‡Œè®­ç»ƒå‘é‡é€šè¿‡å‡½æ•°è¢«éšå¼æ˜ å°„åˆ°ä¸€ä¸ªé«˜ç»´ï¼ˆç”šè‡³æ— é™ç»´ï¼‰ç©ºé—´ $\phi$ ã€‚</p><p>å†³ç­–å‡½æ•°æ˜¯ <strong>æ³¨æ„</strong>ï¼šè™½ç„¶ä»<a href="http://www.csie.ntu.edu.tw/~cjlin/libsvm/" target="_blank" rel="noopener"><code>libsvm</code></a>å’Œ<a href="http://www.csie.ntu.edu.tw/~cjlin/liblinear/" target="_blank" rel="noopener"><code>liblinear</code></a>å¯¼å‡ºçš„SVMæ¨¡å‹ä½¿ç”¨ $C$ ä½œä¸ºæ­£åˆ™åŒ–å‚æ•°ï¼Œä½†å®é™…ä¸Šå…¶å®ƒæ›´å¤šé¢„æµ‹å™¨ä½¿ç”¨çš„æ˜¯<code>alpha</code>ã€‚è¿™ä¸¤ä¸ªå‚æ•°ä¹‹é—´çš„å…³ç³»æ˜¯</p><script type="math/tex; mode=display">\mathop{\rm sgn}(\sum_{i=1}^n y_i \alpha_i K(x_i,x_j)+\rho)</script><p>è¿™äº›å‚æ•°å¯ä»¥é€šè¿‡å„ä¸ªæˆå‘˜å˜é‡è®¿é—®ï¼š<code>dual_coef_</code>å­˜æ”¾ä¹˜ç§¯ï¼Œ<code>support_vectors</code>å­˜æ”¾æ”¯æŒå‘é‡ï¼Œ<code>intercept_</code>å­˜æ”¾ç‹¬ç«‹é¡¹ï¼š</p><blockquote><p>å‚è€ƒæ–‡çŒ®ï¼š</p><ul><li><a href="http://citeseerx.ist.psu.edu/viewdoc/summary?doi=10.1.1.17.7215" target="_blank" rel="noopener">â€œAutomatic Capacity Tuning of Very Large VC-dimension Classifiersâ€</a>, I. Guyon, B. Boser, V. Vapnik - Advances in neural information processing 1993.</li><li><a href="http://link.springer.com/article/10.1007%2FBF00994018" target="_blank" rel="noopener">â€œSupport-vector networksâ€</a>, C. Cortes, V. Vapnik - Machine Learning, 20, 273-297 (1995).</li></ul></blockquote><h3 id="NuSVC"><a href="#NuSVC" class="headerlink" title="NuSVC"></a>NuSVC</h3><p>å…¶æä¾›äº†ä¸€ä¸ªæ–°çš„å‚æ•°ï¼Œæ§åˆ¶æ”¯æŒå‘é‡çš„ä¸ªæ•°å’Œè®­ç»ƒè¯¯å·®ã€‚å‚æ•° $v \in \left (0,1 \right ]$ æ˜¯è®­ç»ƒè¯¯å·®çš„ä¸Šé™å’Œæ”¯æŒå‘é‡çš„ä¸‹é™ã€‚</p><p>å¯ä»¥çœ‹åˆ°<code>v-SVC</code>æ˜¯<code>C-SVC</code>çš„ä¸€ç§é‡å‚æ•°åŒ–å½¢å¼ï¼Œå› æ­¤ä¸¤è€…åœ¨æ•°å­¦ä¸Šæ˜¯ç­‰ä»·çš„ã€‚</p><h3 id="SVR"><a href="#SVR" class="headerlink" title="SVR"></a>SVR</h3><p>ç»™å®šè®­ç»ƒå‘é‡ç»„ $x_i \in \mathbb{R}^p ,\ i=1,2,â€¦,n$ å’Œå‘é‡ $y \in \mathbb{R}^n ,\ \varepsilon-SVR$ è¦è§£å†³çš„ä¸»è¦é—®é¢˜å¦‚ä¸‹æ‰€ç¤ºï¼š</p><script type="math/tex; mode=display">\min_{\omega ,b,\zeta, \zeta^*} \frac{1}{2}\omega^{T}\omega + C \sum_{i=1}^{n}(\zeta_i+\zeta^*) \\subject \ to \ y_i - \omega^T \phi(x_i) - b \leqslant \varepsilon + \zeta_i, \\\omega^T \phi(x_i) + b - y_i \leqslant \varepsilon + \zeta_i^*, \\\zeta_i, \zeta_{i}^* \geqslant 0,i=1,2,...,n</script><p>å…¶å¯¹å¶ä¸º</p><script type="math/tex; mode=display">\min_{\alpha, \alpha^*} \frac{1}{2} (\alpha - \alpha^*)^{T}Q(\alpha - \alpha^*) + \varepsilon e^T (\alpha + \alpha^*) -y^T (\alpha - \alpha^*)\\subject\ to\ e^{T} (\alpha - \alpha^*) =0\\0 \leqslant \alpha_i,\alpha_i^* \leqslant C,i=1,2,...,n</script><p>å…¶ä¸­ $e$ æ˜¯å…¨ $1$ å‘é‡ï¼Œ$C &gt; 0$ æ˜¯ä¸Šç•Œï¼Œ$Q$ æ˜¯ä¸€ä¸ªåŠæ­£å®šçŸ©é˜µï¼Œ $Q_{ij} \equiv K(x_i,x_j) = \phi(x_i)^T \phi(x_j)$ æ˜¯å†…æ ¸ã€‚è¿™é‡Œè®­ç»ƒå‘é‡é€šè¿‡å‡½æ•°è¢«éšå¼æ˜ å°„åˆ°ä¸€ä¸ªé«˜ç»´ï¼ˆç”šè‡³æ— é™ç»´ï¼‰ç©ºé—´ $\phi$ ã€‚</p><p>å†³ç­–å‡½æ•°ä¸º</p><script type="math/tex; mode=display">\sum_{i=1}^n (\alpha - \alpha^*)K(x_i,x) + \rho</script><p>è¿™äº›å‚æ•°å¯ä»¥é€šè¿‡å„ä¸ªæˆå‘˜å˜é‡è®¿é—®ã€‚å…¶ä¿æŒçš„å·® $\alpha - \alpha^*$ ï¼Œå…¶ä¸­å˜é‡<code>dual_coef_</code>å­˜å‚¨ï¼Œ<code>support_vectors_</code>å­˜å‚¨æ”¯æŒå‘é‡ï¼Œ<code>intercept_</code>å­˜å‚¨ç‹¬ç«‹é¡¹ $\rho$ ã€‚</p><blockquote><p>å‚è€ƒæ–‡çŒ®ï¼š</p><ul><li><a href="http://citeseerx.ist.psu.edu/viewdoc/summary?doi=10.1.1.114.4288" target="_blank" rel="noopener">â€œA Tutorial on Support Vector Regressionâ€</a>, Alex J. Smola, Bernhard SchÃ¶lkopf - Statistics and Computing archive Volume 14 Issue 3, August 2004, p. 199-222.</li></ul></blockquote><h2 id="åº•å±‚å®ç°"><a href="#åº•å±‚å®ç°" class="headerlink" title="åº•å±‚å®ç°"></a>åº•å±‚å®ç°</h2><p>åœ¨åº•å±‚ï¼Œä½¿ç”¨ <a href="http://www.csie.ntu.edu.tw/~cjlin/libsvm/" target="_blank" rel="noopener">libsvm</a> å’Œ <a href="http://www.csie.ntu.edu.tw/~cjlin/liblinear/" target="_blank" rel="noopener">liblinear</a> æ¥å¤„ç†æ‰€æœ‰è®¡ç®—é€»è¾‘ã€‚è¿™äº›åº“æ˜¯è¢«Cå’ŒCythonåŒ…è£…çš„ã€‚</p><blockquote><p><strong>å‚è€ƒæ–‡çŒ®</strong>ï¼š</p><ul><li><a href="http://www.csie.ntu.edu.tw/~cjlin/papers/libsvm.pdf" target="_blank" rel="noopener">LIBSVM: a library for Support Vector Machines</a></li><li><a href="http://www.csie.ntu.edu.tw/~cjlin/liblinear/" target="_blank" rel="noopener">LIBLINEAR â€“ A Library for Large Linear Classification</a></li></ul></blockquote>]]></content>
    
    <summary type="html">
    
      &lt;script type=&quot;text/javascript&quot; src=&quot;http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=default&quot;&gt;&lt;/script&gt;

&lt;p&gt;&lt;strong&gt;æ”¯æŒå‘é‡æœºï¼ˆSVMï¼‰&lt;/strong&gt;æ˜¯ç”¨äºåˆ†ç±»ï¼Œå›å½’å’Œå¼‚å¸¸å€¼æ£€æµ‹çš„ç›‘ç£å­¦ä¹ æ–¹æ³•ã€‚&lt;/p&gt;
&lt;p&gt;æ”¯æŒå‘é‡æœºçš„ä¼˜ç‚¹åŒ…æ‹¬ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;åœ¨é«˜ç»´ç©ºé—´ä¸­è¡Œä¹‹æœ‰æ•ˆã€‚&lt;/li&gt;
&lt;li&gt;å½“ç»´æ•°å¤§äºæ ·æœ¬æ•°æ—¶ä»ç„¶å¯ç”¨ã€‚&lt;/li&gt;
&lt;li&gt;åœ¨å†³ç­–å‡½æ•°ä¸­åªä½¿ç”¨è®­ç»ƒç‚¹çš„ä¸€ä¸ªå­é›†ï¼ˆç§°ä¸ºæ”¯æŒå‘é‡ï¼‰ï¼Œå¤§å¤§èŠ‚çœäº†å†…å­˜å¼€é”€ã€‚&lt;/li&gt;
&lt;li&gt;ç”¨é€”å¹¿æ³›ï¼šå†³ç­–å‡½æ•°ä¸­å¯ä»¥ä½¿ç”¨ä¸åŒçš„&lt;a href=&quot;http://scikit-learn.org/stable/modules/svm.html#svm-kernels&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;æ ¸å‡½æ•°&lt;/a&gt;ã€‚æä¾›äº†ä¸€ç§é€šç”¨çš„æ ¸ï¼Œä½†æ˜¯ä¹Ÿå¯ä»¥æŒ‡å®šè‡ªå®šä¹‰çš„æ ¸ã€‚&lt;/li&gt;
&lt;li&gt;è¿”å›çš„åˆ†å‰²ç›´çº¿æ»¡è¶³marginæœ€å¤§çš„æ¡ä»¶ï¼Œæ‰€ä»¥æ˜¯ä¸€ä¸ªrobustçš„è§£ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;SVMå¯¹æ•°æ®ç‚¹çš„ä¾èµ–æ˜¯ç¨€ç–çš„&lt;/strong&gt;ï¼Œåªæœ‰å°‘é‡æ”¯æŒå‘é‡å¯¹æœ€ç»ˆç»“æœæœ‰è´¡çŒ®ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;è€Œå…¶åŠ£åŠ¿åœ¨äº&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å¦‚æœç‰¹å¾æ•°é‡è¿œå¤§äºæ ·æœ¬æ•°é‡ï¼Œåˆ™è¡¨ç°ä¼šæ¯”è¾ƒå·®ã€‚&lt;/li&gt;
&lt;li&gt;SVMä¸ç›´æ¥æä¾›æ¦‚ç‡ä¼°è®¡ã€‚è¿™ä¸ªå€¼é€šè¿‡äº”æŠ˜äº¤å‰éªŒè¯è®¡ç®—ï¼Œä»£ä»·æ¯”è¾ƒé«˜ï¼ˆè§ä¸‹é¢â€œè·‘åˆ†ä¸æ¦‚ç‡â€ä¸€èŠ‚ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;é¦–å…ˆSVMçš„ä¼˜åŒ–é—®é¢˜æ¯”è¾ƒå¤æ‚ï¼Œä¸ä»…äººéš¾ä»¥ç†è§£ï¼Œå†™èµ·ç¨‹åºæ¥ä¹Ÿæ¯”è¾ƒå¤æ‚ï¼Œå¿…é¡»è¦ç”¨åˆ°Sequential minimal optimizationï¼ˆSMOï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;å…¶æ¬¡ï¼Œä¼ ç»Ÿçš„SVMåªèƒ½å¤„ç†çº¿æ€§å¯åˆ†çš„é—®é¢˜ï¼Œå¹¶ä¸”å¯¹æ•°æ®ä¸­çš„å™ªéŸ³ä¹Ÿå¾ˆæ•æ„Ÿï¼Œå› æ­¤æˆ‘ä»¬å¿…è¦å¯¹ç®—æ³•è¿›è¡Œæ”¹é€ ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Scikit-learnä¸­çš„æ”¯æŒå‘é‡æœºåŒæ—¶æ”¯æŒå¯†é›†æ ·æœ¬å‘é‡ï¼ˆ&lt;code&gt;numpy.ndarray&lt;/code&gt;å’Œå¯é€šè¿‡&lt;code&gt;numpy.asarray&lt;/code&gt;è½¬åŒ–çš„æ•°æ®ç±»å‹ï¼‰å’Œç¨€ç–æ ·æœ¬å‘é‡ï¼ˆä»»ä½•&lt;code&gt;scipy.sparse&lt;/code&gt;å¯¹è±¡ï¼‰ã€‚ä½†æ˜¯å¦‚æœæƒ³ç”¨SVMå¯¹ç¨€ç–æ•°æ®è¿›è¡Œé¢„æµ‹ï¼Œåˆ™å¿…é¡»å…ˆåœ¨è¿™äº›æ•°æ®ä¸Šæ‹Ÿåˆã€‚ä¸ºäº†ä¼˜åŒ–æ€§èƒ½ï¼Œåº”è¯¥ä½¿ç”¨Cé˜¶ï¼ˆC-Orderedï¼‰&lt;code&gt;numpy.ndarray&lt;/code&gt;ï¼ˆå¯†é›†çš„ï¼‰æˆ–&lt;code&gt;scipy.sparse.csr_matrix&lt;/code&gt;ï¼ˆç¨€ç–çš„ï¼‰ï¼Œå¹¶æŒ‡å®š&lt;code&gt;dtype=float64&lt;/code&gt;ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="Note" scheme="https://marara.xin/categories/Note/"/>
    
    
      <category term="Machine Learning" scheme="https://marara.xin/tags/Machine-Learning/"/>
    
      <category term="Python" scheme="https://marara.xin/tags/Python/"/>
    
      <category term="SVM" scheme="https://marara.xin/tags/SVM/"/>
    
  </entry>
  
  <entry>
    <title>æ•°æ®è¡¨æŸ¥è¯¢</title>
    <link href="https://marara.xin/2017/09/19/Query%20database/"/>
    <id>https://marara.xin/2017/09/19/Query database/</id>
    <published>2017-09-19T05:53:24.000Z</published>
    <updated>2017-10-30T03:16:04.028Z</updated>
    
    <content type="html"><![CDATA[<p>æ•°æ®æŸ¥è¯¢æ˜¯æ•°æ®åº“æ“ä½œçš„æ ¸å¿ƒæ“ä½œã€‚SQLæä¾›äº†<code>SELECT</code>è¯­å¥è¿›è¡Œæ•°æ®æŸ¥è¯¢ï¼Œå…¶ä¸€èˆ¬æ ¼å¼ä¸ºï¼š</p><p><code>SELECT [ALL | DISTINCT] &lt;ç›®æ ‡åˆ—è¡¨è¾¾å¼&gt; FROM &lt;è¡¨åæˆ–è§†å›¾å&gt; (&lt;SELECT è¯­å¥&gt;) [AS] &lt;åˆ«å&gt; [WHERE&lt;æ¡ä»¶è¡¨è¾¾å¼&gt;]</code></p><a id="more"></a><p>ä»¥ä¸‹æ“ä½œï¼Œéƒ½ä»¥ä¸‹è¡¨ä¸ºæ¨¡å‹ã€‚</p><h5 id="Student"><a href="#Student" class="headerlink" title="Student"></a>Student</h5><div class="table-container"><table><thead><tr><th style="text-align:center">Sno</th><th style="text-align:center">Sname</th><th style="text-align:center">Ssex</th><th style="text-align:center">Sage</th><th style="text-align:center">Sdept</th></tr></thead><tbody><tr><td style="text-align:center">201215121</td><td style="text-align:center">Yong Li</td><td style="text-align:center">M</td><td style="text-align:center">20</td><td style="text-align:center">CS</td></tr><tr><td style="text-align:center">201215122</td><td style="text-align:center">Chen Liu</td><td style="text-align:center">F</td><td style="text-align:center">19</td><td style="text-align:center">CS</td></tr><tr><td style="text-align:center">201215123</td><td style="text-align:center">Min Wang</td><td style="text-align:center">F</td><td style="text-align:center">18</td><td style="text-align:center">MA</td></tr><tr><td style="text-align:center">201215125</td><td style="text-align:center">Li Zhang</td><td style="text-align:center">M</td><td style="text-align:center">19</td><td style="text-align:center">IS</td></tr></tbody></table></div><h5 id="Course"><a href="#Course" class="headerlink" title="Course"></a>Course</h5><div class="table-container"><table><thead><tr><th style="text-align:center">Cno</th><th style="text-align:center">Cname</th><th style="text-align:center">Cpno</th><th style="text-align:center">Ccredit</th></tr></thead><tbody><tr><td style="text-align:center">1</td><td style="text-align:center">Data base</td><td style="text-align:center">5</td><td style="text-align:center">4</td></tr><tr><td style="text-align:center">2</td><td style="text-align:center">Mathematics</td><td style="text-align:center"></td><td style="text-align:center">2</td></tr><tr><td style="text-align:center">3</td><td style="text-align:center">Information system</td><td style="text-align:center">1</td><td style="text-align:center">4</td></tr><tr><td style="text-align:center">4</td><td style="text-align:center">Operating system</td><td style="text-align:center">6</td><td style="text-align:center">3</td></tr><tr><td style="text-align:center">5</td><td style="text-align:center">Data structure</td><td style="text-align:center">7</td><td style="text-align:center">4</td></tr><tr><td style="text-align:center">6</td><td style="text-align:center">Data processing</td><td style="text-align:center"></td><td style="text-align:center">2</td></tr><tr><td style="text-align:center">7</td><td style="text-align:center">PASCAL language</td><td style="text-align:center">6</td><td style="text-align:center">4</td></tr></tbody></table></div><h5 id="SC"><a href="#SC" class="headerlink" title="SC"></a>SC</h5><div class="table-container"><table><thead><tr><th style="text-align:center">Sno</th><th style="text-align:center">Cno</th><th style="text-align:center">Grade</th></tr></thead><tbody><tr><td style="text-align:center">201215121</td><td style="text-align:center">1</td><td style="text-align:center">92</td></tr><tr><td style="text-align:center">201215121</td><td style="text-align:center">2</td><td style="text-align:center">85</td></tr><tr><td style="text-align:center">201215121</td><td style="text-align:center">3</td><td style="text-align:center">88</td></tr><tr><td style="text-align:center">201215122</td><td style="text-align:center">2</td><td style="text-align:center">90</td></tr><tr><td style="text-align:center">201215122</td><td style="text-align:center">3</td><td style="text-align:center">80</td></tr></tbody></table></div><h2 id="å•è¡¨æŸ¥è¯¢"><a href="#å•è¡¨æŸ¥è¯¢" class="headerlink" title="å•è¡¨æŸ¥è¯¢"></a>å•è¡¨æŸ¥è¯¢</h2><h3 id="é€‰æ‹©è¡¨ä¸­çš„è‹¥å¹²åˆ—"><a href="#é€‰æ‹©è¡¨ä¸­çš„è‹¥å¹²åˆ—" class="headerlink" title="é€‰æ‹©è¡¨ä¸­çš„è‹¥å¹²åˆ—"></a>é€‰æ‹©è¡¨ä¸­çš„è‹¥å¹²åˆ—</h3><p>é€‰æ‹©è¡¨ä¸­çš„å…¨éƒ¨æˆ–è‹¥å¹²åˆ—å³å…³ç³»ä»£æ•°çš„æŠ•å½±è¿ç®—ã€‚</p><h4 id="æŸ¥è¯¢æŒ‡å®šåˆ—"><a href="#æŸ¥è¯¢æŒ‡å®šåˆ—" class="headerlink" title="æŸ¥è¯¢æŒ‡å®šåˆ—"></a>æŸ¥è¯¢æŒ‡å®šåˆ—</h4><h5 id="æŸ¥è¯¢å…¨ä½“å­¦ç”Ÿçš„å­¦å·å’Œå§“å"><a href="#æŸ¥è¯¢å…¨ä½“å­¦ç”Ÿçš„å­¦å·å’Œå§“å" class="headerlink" title="æŸ¥è¯¢å…¨ä½“å­¦ç”Ÿçš„å­¦å·å’Œå§“å"></a>æŸ¥è¯¢å…¨ä½“å­¦ç”Ÿçš„å­¦å·å’Œå§“å</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> SNO, SNAME </span><br><span class="line"><span class="keyword">from</span> Student;</span><br></pre></td></tr></table></figure><blockquote><p>ç›®æ ‡è¡¨è¾¾å¼ä¸­çš„å„åˆ—å…ˆåé¡ºåºå¯ä»¥ä¸åŒ</p></blockquote><h4 id="æŸ¥è¯¢å…¨éƒ¨åˆ—"><a href="#æŸ¥è¯¢å…¨éƒ¨åˆ—" class="headerlink" title="æŸ¥è¯¢å…¨éƒ¨åˆ—"></a>æŸ¥è¯¢å…¨éƒ¨åˆ—</h4><h5 id="æŸ¥è¯¢å…¨ä½“å­¦ç”Ÿçš„è¯¦ç»†è®°å½•"><a href="#æŸ¥è¯¢å…¨ä½“å­¦ç”Ÿçš„è¯¦ç»†è®°å½•" class="headerlink" title="æŸ¥è¯¢å…¨ä½“å­¦ç”Ÿçš„è¯¦ç»†è®°å½•"></a>æŸ¥è¯¢å…¨ä½“å­¦ç”Ÿçš„è¯¦ç»†è®°å½•</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> * </span><br><span class="line"><span class="keyword">from</span> Student;</span><br></pre></td></tr></table></figure><h4 id="æŸ¥è¯¢ç»è¿‡è®¡ç®—çš„å€¼"><a href="#æŸ¥è¯¢ç»è¿‡è®¡ç®—çš„å€¼" class="headerlink" title="æŸ¥è¯¢ç»è¿‡è®¡ç®—çš„å€¼"></a>æŸ¥è¯¢ç»è¿‡è®¡ç®—çš„å€¼</h4><h5 id="æŸ¥è¯¢å…¨ä½“å­¦ç”Ÿçš„å§“ååŠå‡ºç”Ÿå¹´ä»½"><a href="#æŸ¥è¯¢å…¨ä½“å­¦ç”Ÿçš„å§“ååŠå‡ºç”Ÿå¹´ä»½" class="headerlink" title="æŸ¥è¯¢å…¨ä½“å­¦ç”Ÿçš„å§“ååŠå‡ºç”Ÿå¹´ä»½"></a>æŸ¥è¯¢å…¨ä½“å­¦ç”Ÿçš„å§“ååŠå‡ºç”Ÿå¹´ä»½</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> SNAME, <span class="number">2017</span>-SAGE </span><br><span class="line"><span class="keyword">from</span> Student;</span><br></pre></td></tr></table></figure><blockquote><p>æŸ¥è¯¢ç»“æœä¸­ç¬¬ 2 åˆ—ä¸æ˜¯åˆ—åï¼Œè€Œæ˜¯ä¸€ä¸ªè®¡ç®—è¡¨è¾¾å¼ï¼Œç”¨å½“å‰å¹´ä»½å‡å»å­¦ç”Ÿå¹´é¾„ï¼Œæ‰€å¾—åˆ°çš„å³æ˜¯å­¦ç”Ÿçš„å‡ºç”Ÿå¹´ä»½ã€‚</p></blockquote><h5 id="æŸ¥è¯¢æ‰€æœ‰å­¦ç”Ÿå§“åã€å‡ºç”Ÿå¹´ä»½å’Œæ‰€åœ¨é™¢ç³»ï¼Œè¦æ±‚ç”¨å°å†™å­—æ¯è¡¨ç¤ºç³»å"><a href="#æŸ¥è¯¢æ‰€æœ‰å­¦ç”Ÿå§“åã€å‡ºç”Ÿå¹´ä»½å’Œæ‰€åœ¨é™¢ç³»ï¼Œè¦æ±‚ç”¨å°å†™å­—æ¯è¡¨ç¤ºç³»å" class="headerlink" title="æŸ¥è¯¢æ‰€æœ‰å­¦ç”Ÿå§“åã€å‡ºç”Ÿå¹´ä»½å’Œæ‰€åœ¨é™¢ç³»ï¼Œè¦æ±‚ç”¨å°å†™å­—æ¯è¡¨ç¤ºç³»å"></a>æŸ¥è¯¢æ‰€æœ‰å­¦ç”Ÿå§“åã€å‡ºç”Ÿå¹´ä»½å’Œæ‰€åœ¨é™¢ç³»ï¼Œè¦æ±‚ç”¨å°å†™å­—æ¯è¡¨ç¤ºç³»å</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> SNAME, <span class="number">2017</span>-SAGE, <span class="keyword">lower</span>(SDEPT) </span><br><span class="line"><span class="keyword">from</span> Student;</span><br></pre></td></tr></table></figure><h5 id="æŸ¥è¯¢æ‰€æœ‰å­¦ç”Ÿå§“åã€å‡ºç”Ÿå¹´ä»½å’Œæ‰€åœ¨é™¢ç³»ï¼Œè¦æ±‚ç”¨å°å†™å­—æ¯è¡¨ç¤ºç³»åï¼Œå¹¶åˆ†åˆ«ä½¿ç”¨åˆ«åæ ‡è¯†"><a href="#æŸ¥è¯¢æ‰€æœ‰å­¦ç”Ÿå§“åã€å‡ºç”Ÿå¹´ä»½å’Œæ‰€åœ¨é™¢ç³»ï¼Œè¦æ±‚ç”¨å°å†™å­—æ¯è¡¨ç¤ºç³»åï¼Œå¹¶åˆ†åˆ«ä½¿ç”¨åˆ«åæ ‡è¯†" class="headerlink" title="æŸ¥è¯¢æ‰€æœ‰å­¦ç”Ÿå§“åã€å‡ºç”Ÿå¹´ä»½å’Œæ‰€åœ¨é™¢ç³»ï¼Œè¦æ±‚ç”¨å°å†™å­—æ¯è¡¨ç¤ºç³»åï¼Œå¹¶åˆ†åˆ«ä½¿ç”¨åˆ«åæ ‡è¯†"></a>æŸ¥è¯¢æ‰€æœ‰å­¦ç”Ÿå§“åã€å‡ºç”Ÿå¹´ä»½å’Œæ‰€åœ¨é™¢ç³»ï¼Œè¦æ±‚ç”¨å°å†™å­—æ¯è¡¨ç¤ºç³»åï¼Œå¹¶åˆ†åˆ«ä½¿ç”¨åˆ«åæ ‡è¯†</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> SNAME <span class="keyword">as</span> <span class="keyword">NAME</span>, <span class="number">2017</span>-SAGE <span class="keyword">as</span> BIRTHDAY, <span class="keyword">lower</span>(SDEPT) <span class="keyword">as</span> DEPARTMENT </span><br><span class="line"><span class="keyword">from</span> Student;</span><br></pre></td></tr></table></figure><blockquote><p>å…¶ä¸­<code>as</code>å¯ä»¥çœç•¥</p></blockquote><h3 id="é€‰æ‹©è¡¨ä¸­è‹¥å¹²å…ƒç»„"><a href="#é€‰æ‹©è¡¨ä¸­è‹¥å¹²å…ƒç»„" class="headerlink" title="é€‰æ‹©è¡¨ä¸­è‹¥å¹²å…ƒç»„"></a>é€‰æ‹©è¡¨ä¸­è‹¥å¹²å…ƒç»„</h3><h4 id="æ¶ˆé™¤å–å€¼é‡å¤çš„è¡Œ"><a href="#æ¶ˆé™¤å–å€¼é‡å¤çš„è¡Œ" class="headerlink" title="æ¶ˆé™¤å–å€¼é‡å¤çš„è¡Œ"></a>æ¶ˆé™¤å–å€¼é‡å¤çš„è¡Œ</h4><h5 id="æŸ¥è¯¢é€‰ä¿®äº†è¯¾ç¨‹çš„å­¦ç”Ÿå­¦å·"><a href="#æŸ¥è¯¢é€‰ä¿®äº†è¯¾ç¨‹çš„å­¦ç”Ÿå­¦å·" class="headerlink" title="æŸ¥è¯¢é€‰ä¿®äº†è¯¾ç¨‹çš„å­¦ç”Ÿå­¦å·"></a>æŸ¥è¯¢é€‰ä¿®äº†è¯¾ç¨‹çš„å­¦ç”Ÿå­¦å·</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="keyword">distinct</span> SNO </span><br><span class="line"><span class="keyword">from</span> SC;</span><br></pre></td></tr></table></figure><blockquote><p>å¦‚æœæ²¡æœ‰<code>distinct</code>å…³é”®è¯ï¼Œåˆ™é»˜è®¤ä¸º<code>all</code>ã€‚</p></blockquote><h4 id="æŸ¥è¯¢æ»¡è¶³æ¡ä»¶çš„å…ƒç»„"><a href="#æŸ¥è¯¢æ»¡è¶³æ¡ä»¶çš„å…ƒç»„" class="headerlink" title="æŸ¥è¯¢æ»¡è¶³æ¡ä»¶çš„å…ƒç»„"></a>æŸ¥è¯¢æ»¡è¶³æ¡ä»¶çš„å…ƒç»„</h4><h5 id="æ¯”è¾ƒå¤§å°"><a href="#æ¯”è¾ƒå¤§å°" class="headerlink" title="æ¯”è¾ƒå¤§å°"></a>æ¯”è¾ƒå¤§å°</h5><h6 id="æŸ¥è¯¢æ‰€æœ‰å¹´é¾„å°äº20å²çš„å­¦ç”Ÿå§“ååŠå¹´é¾„"><a href="#æŸ¥è¯¢æ‰€æœ‰å¹´é¾„å°äº20å²çš„å­¦ç”Ÿå§“ååŠå¹´é¾„" class="headerlink" title="æŸ¥è¯¢æ‰€æœ‰å¹´é¾„å°äº20å²çš„å­¦ç”Ÿå§“ååŠå¹´é¾„"></a>æŸ¥è¯¢æ‰€æœ‰å¹´é¾„å°äº20å²çš„å­¦ç”Ÿå§“ååŠå¹´é¾„</h6><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> SNAME, SAGE </span><br><span class="line"><span class="keyword">from</span> Student </span><br><span class="line"><span class="keyword">where</span> SAGE&lt;<span class="number">20</span>;</span><br></pre></td></tr></table></figure><h5 id="ç¡®å®šèŒƒå›´"><a href="#ç¡®å®šèŒƒå›´" class="headerlink" title="ç¡®å®šèŒƒå›´"></a>ç¡®å®šèŒƒå›´</h5><h6 id="æŸ¥è¯¢å¹´é¾„åœ¨20-23å²ä¹‹é—´çš„å­¦ç”Ÿå§“åï¼Œç³»åˆ«å’Œå¹´é¾„ã€‚"><a href="#æŸ¥è¯¢å¹´é¾„åœ¨20-23å²ä¹‹é—´çš„å­¦ç”Ÿå§“åï¼Œç³»åˆ«å’Œå¹´é¾„ã€‚" class="headerlink" title="æŸ¥è¯¢å¹´é¾„åœ¨20~23å²ä¹‹é—´çš„å­¦ç”Ÿå§“åï¼Œç³»åˆ«å’Œå¹´é¾„ã€‚"></a>æŸ¥è¯¢å¹´é¾„åœ¨20~23å²ä¹‹é—´çš„å­¦ç”Ÿå§“åï¼Œç³»åˆ«å’Œå¹´é¾„ã€‚</h6><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> SNAME, SDEPT, SAGE </span><br><span class="line"><span class="keyword">from</span> Student </span><br><span class="line"><span class="keyword">where</span> SAGE <span class="keyword">between</span> <span class="number">20</span> <span class="keyword">and</span> <span class="number">23</span>;</span><br></pre></td></tr></table></figure><h6 id="æŸ¥è¯¢å¹´é¾„ä¸åœ¨20-23å²ä¹‹é—´çš„å­¦ç”Ÿå§“åï¼Œç³»åˆ«å’Œå¹´é¾„ã€‚"><a href="#æŸ¥è¯¢å¹´é¾„ä¸åœ¨20-23å²ä¹‹é—´çš„å­¦ç”Ÿå§“åï¼Œç³»åˆ«å’Œå¹´é¾„ã€‚" class="headerlink" title="æŸ¥è¯¢å¹´é¾„ä¸åœ¨20~23å²ä¹‹é—´çš„å­¦ç”Ÿå§“åï¼Œç³»åˆ«å’Œå¹´é¾„ã€‚"></a>æŸ¥è¯¢å¹´é¾„ä¸åœ¨20~23å²ä¹‹é—´çš„å­¦ç”Ÿå§“åï¼Œç³»åˆ«å’Œå¹´é¾„ã€‚</h6><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> SNAME, SDEPT, SAGE </span><br><span class="line"><span class="keyword">from</span> Student </span><br><span class="line"><span class="keyword">where</span> SAGE <span class="keyword">not</span> <span class="keyword">between</span> <span class="number">20</span> <span class="keyword">and</span> <span class="number">23</span>;</span><br></pre></td></tr></table></figure><h5 id="ç¡®å®šé›†åˆ"><a href="#ç¡®å®šé›†åˆ" class="headerlink" title="ç¡®å®šé›†åˆ"></a>ç¡®å®šé›†åˆ</h5><h6 id="æŸ¥è¯¢CSï¼ŒMAï¼ŒISå­¦ç”Ÿçš„å§“åå’Œæ€§åˆ«"><a href="#æŸ¥è¯¢CSï¼ŒMAï¼ŒISå­¦ç”Ÿçš„å§“åå’Œæ€§åˆ«" class="headerlink" title="æŸ¥è¯¢CSï¼ŒMAï¼ŒISå­¦ç”Ÿçš„å§“åå’Œæ€§åˆ«"></a>æŸ¥è¯¢CSï¼ŒMAï¼ŒISå­¦ç”Ÿçš„å§“åå’Œæ€§åˆ«</h6><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> SNAME, SSEX </span><br><span class="line"><span class="keyword">from</span> Student </span><br><span class="line"><span class="keyword">where</span> SDEPT <span class="keyword">in</span> (<span class="string">'CS'</span>, <span class="string">'MA'</span>, <span class="string">'IS'</span>);</span><br></pre></td></tr></table></figure><h6 id="æŸ¥è¯¢ä¸åœ¨CSï¼ŒMAï¼ŒISå­¦ç”Ÿçš„å§“åå’Œæ€§åˆ«"><a href="#æŸ¥è¯¢ä¸åœ¨CSï¼ŒMAï¼ŒISå­¦ç”Ÿçš„å§“åå’Œæ€§åˆ«" class="headerlink" title="æŸ¥è¯¢ä¸åœ¨CSï¼ŒMAï¼ŒISå­¦ç”Ÿçš„å§“åå’Œæ€§åˆ«"></a>æŸ¥è¯¢ä¸åœ¨CSï¼ŒMAï¼ŒISå­¦ç”Ÿçš„å§“åå’Œæ€§åˆ«</h6><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> SNAME, SSEX </span><br><span class="line"><span class="keyword">from</span> Student </span><br><span class="line"><span class="keyword">where</span> SDEPT <span class="keyword">not</span> <span class="keyword">in</span> (<span class="string">'CS'</span>, <span class="string">'MA'</span>, <span class="string">'IS'</span>);</span><br></pre></td></tr></table></figure><h5 id="å­—ç¬¦åŒ¹é…"><a href="#å­—ç¬¦åŒ¹é…" class="headerlink" title="å­—ç¬¦åŒ¹é…"></a>å­—ç¬¦åŒ¹é…</h5><p>è°“è¯<code>LIKE</code>å¯ä»¥ç”¨æ¥è¿›è¡Œå­—ç¬¦ä¸²çš„åŒ¹é…ã€‚å…¶ä¸€èˆ¬è¯­æ³•æ ¼å¼ä¸ºï¼š</p><p><code>[NOT] LIKE &#39;&lt;åŒ¹é…ä¸²&gt;&#39; [ESCAPE &#39;&lt;è½¬ç å­—ç¬¦&gt;&#39;]</code></p><ul><li><code>%</code>ä»£è¡¨ä»»æ„é•¿åº¦ï¼ˆé•¿åº¦å¯ä»¥æ˜¯0ï¼‰çš„å­—ç¬¦ä¸²ã€‚</li><li><code>_</code>ä»£è¡¨ä»»æ„å•ä¸ªå­—ç¬¦ã€‚</li></ul><blockquote><p>åœ¨æŸ¥è¯¢åŒ¹é…å­—ç¬¦ä¸²ä¸­å¦‚æœæœ¬èº«å«æœ‰<code>%</code>æˆ–<code>_</code>ï¼Œè¿™æ—¶éœ€è¦ä½¿ç”¨<code>ESCAPE &#39;&lt;è½¬ç å­—ç¬¦&gt;&#39;</code>çŸ­è¯­å¯¹é€šé…ç¬¦è¿›è¡Œè½¬ä¹‰ã€‚</p></blockquote><h6 id="æŸ¥è¯¢å­¦å·ä¸ºâ€™201215121â€™çš„å­¦ç”Ÿçš„è¯¦ç»†æƒ…å†µ"><a href="#æŸ¥è¯¢å­¦å·ä¸ºâ€™201215121â€™çš„å­¦ç”Ÿçš„è¯¦ç»†æƒ…å†µ" class="headerlink" title="æŸ¥è¯¢å­¦å·ä¸ºâ€™201215121â€™çš„å­¦ç”Ÿçš„è¯¦ç»†æƒ…å†µ"></a>æŸ¥è¯¢å­¦å·ä¸ºâ€™201215121â€™çš„å­¦ç”Ÿçš„è¯¦ç»†æƒ…å†µ</h6><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> * </span><br><span class="line"><span class="keyword">from</span> Student </span><br><span class="line"><span class="keyword">where</span> SNO <span class="keyword">like</span> <span class="string">'201215121'</span>;</span><br></pre></td></tr></table></figure><h6 id="æŸ¥è¯¢æ‰€æœ‰å§“â€™Liuâ€™çš„å­¦ç”Ÿå§“åï¼Œå­¦å·å’Œæ€§åˆ«"><a href="#æŸ¥è¯¢æ‰€æœ‰å§“â€™Liuâ€™çš„å­¦ç”Ÿå§“åï¼Œå­¦å·å’Œæ€§åˆ«" class="headerlink" title="æŸ¥è¯¢æ‰€æœ‰å§“â€™Liuâ€™çš„å­¦ç”Ÿå§“åï¼Œå­¦å·å’Œæ€§åˆ«"></a>æŸ¥è¯¢æ‰€æœ‰å§“â€™Liuâ€™çš„å­¦ç”Ÿå§“åï¼Œå­¦å·å’Œæ€§åˆ«</h6><figure class="highlight sql"><figcaption><span>lite</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> SNAME, SNO, SSEX </span><br><span class="line"><span class="keyword">from</span> Student</span><br><span class="line"><span class="keyword">where</span> SNAME <span class="keyword">like</span> <span class="string">'Liu%'</span>;</span><br></pre></td></tr></table></figure><h6 id="æŸ¥è¯¢DB-Designè¯¾ç¨‹çš„è¯¾ç¨‹å·å’Œå­¦åˆ†"><a href="#æŸ¥è¯¢DB-Designè¯¾ç¨‹çš„è¯¾ç¨‹å·å’Œå­¦åˆ†" class="headerlink" title="æŸ¥è¯¢DB_Designè¯¾ç¨‹çš„è¯¾ç¨‹å·å’Œå­¦åˆ†"></a>æŸ¥è¯¢DB_Designè¯¾ç¨‹çš„è¯¾ç¨‹å·å’Œå­¦åˆ†</h6><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> CNO, CCREDIT </span><br><span class="line"><span class="keyword">from</span> Course </span><br><span class="line"><span class="keyword">where</span> CNAME <span class="keyword">like</span> <span class="string">'DB\_Design'</span> escape <span class="string">'\';</span></span><br></pre></td></tr></table></figure><h5 id="æ¶‰åŠç©ºå€¼çš„æŸ¥è¯¢"><a href="#æ¶‰åŠç©ºå€¼çš„æŸ¥è¯¢" class="headerlink" title="æ¶‰åŠç©ºå€¼çš„æŸ¥è¯¢"></a>æ¶‰åŠç©ºå€¼çš„æŸ¥è¯¢</h5><h6 id="æŸ¥è¯¢æ‰€æœ‰æœ‰æˆç»©çš„å­¦ç”Ÿçš„å­¦å·å’Œæˆç»©"><a href="#æŸ¥è¯¢æ‰€æœ‰æœ‰æˆç»©çš„å­¦ç”Ÿçš„å­¦å·å’Œæˆç»©" class="headerlink" title="æŸ¥è¯¢æ‰€æœ‰æœ‰æˆç»©çš„å­¦ç”Ÿçš„å­¦å·å’Œæˆç»©"></a>æŸ¥è¯¢æ‰€æœ‰æœ‰æˆç»©çš„å­¦ç”Ÿçš„å­¦å·å’Œæˆç»©</h6><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> SNO, GRADE </span><br><span class="line"><span class="keyword">from</span> SC </span><br><span class="line"><span class="keyword">where</span> GRADE <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">null</span>;</span><br></pre></td></tr></table></figure><h5 id="å¤šé‡æ¡ä»¶æŸ¥è¯¢"><a href="#å¤šé‡æ¡ä»¶æŸ¥è¯¢" class="headerlink" title="å¤šé‡æ¡ä»¶æŸ¥è¯¢"></a>å¤šé‡æ¡ä»¶æŸ¥è¯¢</h5><h6 id="æŸ¥æ–°CSç³»å¹´é¾„åœ¨20å²ä»¥ä¸‹çš„å­¦ç”Ÿå§“å"><a href="#æŸ¥æ–°CSç³»å¹´é¾„åœ¨20å²ä»¥ä¸‹çš„å­¦ç”Ÿå§“å" class="headerlink" title="æŸ¥æ–°CSç³»å¹´é¾„åœ¨20å²ä»¥ä¸‹çš„å­¦ç”Ÿå§“å"></a>æŸ¥æ–°CSç³»å¹´é¾„åœ¨20å²ä»¥ä¸‹çš„å­¦ç”Ÿå§“å</h6><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> SNAME </span><br><span class="line"><span class="keyword">from</span> SC</span><br><span class="line"><span class="keyword">where</span> SAGE&lt;<span class="number">20</span> <span class="keyword">and</span> SDEPT=<span class="string">'CS'</span>;</span><br></pre></td></tr></table></figure><h3 id="ORDER-BY-å­å¥"><a href="#ORDER-BY-å­å¥" class="headerlink" title="ORDER BY å­å¥"></a>ORDER BY å­å¥</h3><p>å¯ä»¥ç”¨<code>ORDER BY</code>å­å¥å¯¹æŸ¥è¯¢ç»“æœè¿›è¡Œå‡åºï¼ˆ<code>ASC</code>ï¼‰æˆ–é™åºï¼ˆ<code>DESC</code>ï¼‰æ’åˆ—ã€‚é»˜è®¤ä¸ºå‡åºã€‚</p><h6 id="æŸ¥è¯¢é€‰ä¿®äº†3å·è¯¾ç¨‹çš„å­¦ç”Ÿçš„å­¦å·å’Œæˆç»©ï¼ŒæŸ¥è¯¢ç»“æœæŒ‰åˆ†æ•°é™åºæ’åˆ—ã€‚"><a href="#æŸ¥è¯¢é€‰ä¿®äº†3å·è¯¾ç¨‹çš„å­¦ç”Ÿçš„å­¦å·å’Œæˆç»©ï¼ŒæŸ¥è¯¢ç»“æœæŒ‰åˆ†æ•°é™åºæ’åˆ—ã€‚" class="headerlink" title="æŸ¥è¯¢é€‰ä¿®äº†3å·è¯¾ç¨‹çš„å­¦ç”Ÿçš„å­¦å·å’Œæˆç»©ï¼ŒæŸ¥è¯¢ç»“æœæŒ‰åˆ†æ•°é™åºæ’åˆ—ã€‚"></a>æŸ¥è¯¢é€‰ä¿®äº†3å·è¯¾ç¨‹çš„å­¦ç”Ÿçš„å­¦å·å’Œæˆç»©ï¼ŒæŸ¥è¯¢ç»“æœæŒ‰åˆ†æ•°é™åºæ’åˆ—ã€‚</h6><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> SNO, Grade </span><br><span class="line"><span class="keyword">from</span> SC</span><br><span class="line"><span class="keyword">where</span> Cno=<span class="string">'3'</span></span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span> GRADE <span class="keyword">desc</span>;</span><br></pre></td></tr></table></figure><h3 id="èšé›†å‡½æ•°"><a href="#èšé›†å‡½æ•°" class="headerlink" title="èšé›†å‡½æ•°"></a>èšé›†å‡½æ•°</h3><p>ä¸ºè¿›ä¸€æ­¥æ–¹ä¾¿ç”¨æˆ·ï¼Œå¢å¼ºæ£€ç´¢åŠŸèƒ½ï¼ŒSQLæä¾›äº†å¦‚ä¸‹èšé›†å‡½æ•°ï¼š</p><div class="table-container"><table><thead><tr><th style="text-align:center">å‡½æ•°å</th><th style="text-align:center">åŠŸèƒ½</th></tr></thead><tbody><tr><td style="text-align:center">COUNT(*)</td><td style="text-align:center">ç»Ÿè®¡å…ƒç»„ä¸ªæ•°</td></tr><tr><td style="text-align:center">COUNT([DISTINCT\ALL] &lt;åˆ—å&gt;)</td><td style="text-align:center">ç»Ÿè®¡ä¸€åˆ—ä¸­å€¼å¾—ä¸ªæ•°</td></tr><tr><td style="text-align:center">SUM([DISTINCT\ALL] &lt;åˆ—å&gt;)</td><td style="text-align:center">è®¡ç®—ä¸€åˆ—å€¼å¾—æ€»å’Œï¼ˆæ­¤åˆ—å¿…é¡»æ˜¯æ•°å€¼ç±»å‹ï¼‰</td></tr><tr><td style="text-align:center">AVG([DISTINCT\ALL] &lt;åˆ—å&gt;)</td><td style="text-align:center">è®¡ç®—ä¸€åˆ—å€¼å¾—å¹³å‡å€¼ï¼ˆæ­¤åˆ—å¿…é¡»æ˜¯æ•°å€¼ç±»å‹ï¼‰</td></tr><tr><td style="text-align:center">MAX([DISTINCT\ALL] &lt;åˆ—å&gt;)</td><td style="text-align:center">æ±‚ä¸€åˆ—å€¼ä¸­çš„æœ€å¤§å€¼</td></tr><tr><td style="text-align:center">MIN([DISTINCT\ALL] &lt;åˆ—å&gt;)</td><td style="text-align:center">æ±‚ä¸€åˆ—å€¼ä¸­çš„æœ€å°å€¼</td></tr></tbody></table></div><h6 id="æŸ¥è¯¢å­¦ç”Ÿæ€»äººæ•°"><a href="#æŸ¥è¯¢å­¦ç”Ÿæ€»äººæ•°" class="headerlink" title="æŸ¥è¯¢å­¦ç”Ÿæ€»äººæ•°"></a>æŸ¥è¯¢å­¦ç”Ÿæ€»äººæ•°</h6><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="keyword">count</span>(*)</span><br><span class="line"><span class="keyword">from</span> Student;</span><br></pre></td></tr></table></figure><h6 id="æŸ¥è¯¢é€‰ä¿®äº†è¯¾ç¨‹çš„å­¦ç”Ÿäººæ•°"><a href="#æŸ¥è¯¢é€‰ä¿®äº†è¯¾ç¨‹çš„å­¦ç”Ÿäººæ•°" class="headerlink" title="æŸ¥è¯¢é€‰ä¿®äº†è¯¾ç¨‹çš„å­¦ç”Ÿäººæ•°"></a>æŸ¥è¯¢é€‰ä¿®äº†è¯¾ç¨‹çš„å­¦ç”Ÿäººæ•°</h6><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="keyword">count</span>(<span class="keyword">distinct</span> SNO)</span><br><span class="line"><span class="keyword">from</span> SC;</span><br></pre></td></tr></table></figure><h6 id="è®¡ç®—é€‰ä¿®1å·è¯¾ç¨‹çš„å­¦ç”Ÿå¹³å‡æˆç»©"><a href="#è®¡ç®—é€‰ä¿®1å·è¯¾ç¨‹çš„å­¦ç”Ÿå¹³å‡æˆç»©" class="headerlink" title="è®¡ç®—é€‰ä¿®1å·è¯¾ç¨‹çš„å­¦ç”Ÿå¹³å‡æˆç»©"></a>è®¡ç®—é€‰ä¿®1å·è¯¾ç¨‹çš„å­¦ç”Ÿå¹³å‡æˆç»©</h6><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="keyword">avg</span>(Grade)</span><br><span class="line"><span class="keyword">from</span> SC</span><br><span class="line"><span class="keyword">where</span> SNO=<span class="string">'1'</span>;</span><br></pre></td></tr></table></figure><h6 id="æŸ¥æ–°é€‰ä¿®1å·è¯¾ç¨‹çš„å­¦ç”Ÿæœ€é«˜åˆ†æ•°"><a href="#æŸ¥æ–°é€‰ä¿®1å·è¯¾ç¨‹çš„å­¦ç”Ÿæœ€é«˜åˆ†æ•°" class="headerlink" title="æŸ¥æ–°é€‰ä¿®1å·è¯¾ç¨‹çš„å­¦ç”Ÿæœ€é«˜åˆ†æ•°"></a>æŸ¥æ–°é€‰ä¿®1å·è¯¾ç¨‹çš„å­¦ç”Ÿæœ€é«˜åˆ†æ•°</h6><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="keyword">max</span>(Grade)</span><br><span class="line"><span class="keyword">from</span> SC</span><br><span class="line"><span class="keyword">where</span> CNO=<span class="string">'1'</span>;</span><br></pre></td></tr></table></figure><h3 id="GROUP-BYå­å¥"><a href="#GROUP-BYå­å¥" class="headerlink" title="GROUP BYå­å¥"></a>GROUP BYå­å¥</h3><p><code>GROUP BY</code>å­å¥å°†æŸ¥è¯¢ç»“æœæŒ‰æŸä¸€åˆ—æˆ–å¤šåˆ—çš„å€¼åˆ†ç»„ï¼Œå€¼ç›¸ç­‰ä¸ºä¸€ç»„ã€‚</p><p><strong>åˆ†ç»„åèšé›†å‡½æ•°å°†ä½œç”¨ä¸æ¯ä¸€ä¸ªç»„ï¼Œå³æ¯ä¸€ç»„éƒ½æœ‰ä¸€ä¸ªå‡½æ•°å€¼ã€‚</strong></p><h6 id="æ±‚å„ä¸ªè¯¾ç¨‹å·åŠç›¸åº”çš„é€‰è¯¾äººæ•°"><a href="#æ±‚å„ä¸ªè¯¾ç¨‹å·åŠç›¸åº”çš„é€‰è¯¾äººæ•°" class="headerlink" title="æ±‚å„ä¸ªè¯¾ç¨‹å·åŠç›¸åº”çš„é€‰è¯¾äººæ•°"></a>æ±‚å„ä¸ªè¯¾ç¨‹å·åŠç›¸åº”çš„é€‰è¯¾äººæ•°</h6><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> CNO, <span class="keyword">count</span>(SNO)</span><br><span class="line"><span class="keyword">from</span> SC</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> CNO;</span><br></pre></td></tr></table></figure><h6 id="æŸ¥è¯¢å¹³å‡æˆç»©å¤§äºç­‰äº90åˆ†çš„å­¦ç”Ÿå­¦å·å’Œå¹³å‡æˆç»©"><a href="#æŸ¥è¯¢å¹³å‡æˆç»©å¤§äºç­‰äº90åˆ†çš„å­¦ç”Ÿå­¦å·å’Œå¹³å‡æˆç»©" class="headerlink" title="æŸ¥è¯¢å¹³å‡æˆç»©å¤§äºç­‰äº90åˆ†çš„å­¦ç”Ÿå­¦å·å’Œå¹³å‡æˆç»©"></a>æŸ¥è¯¢å¹³å‡æˆç»©å¤§äºç­‰äº90åˆ†çš„å­¦ç”Ÿå­¦å·å’Œå¹³å‡æˆç»©</h6><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> SNO, <span class="keyword">avg</span>(Grade)</span><br><span class="line"><span class="keyword">from</span> SC</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> SNO</span><br><span class="line"><span class="keyword">having</span> <span class="keyword">avg</span>(Grade)&gt;=<span class="number">90</span></span><br></pre></td></tr></table></figure><blockquote><p><code>WHERE</code>å­å¥ä¸­æ˜¯ä¸èƒ½ç”¨èšé›†å‡½æ•°ä½œä¸ºæ¡ä»¶è¡¨è¾¾å¼ï¼Œåº”ç”¨<code>HAVING</code></p></blockquote><h2 id="è¿æ¥æŸ¥è¯¢"><a href="#è¿æ¥æŸ¥è¯¢" class="headerlink" title="è¿æ¥æŸ¥è¯¢"></a>è¿æ¥æŸ¥è¯¢</h2><h3 id="ç­‰å€¼äºéç­‰å€¼è¿æ¥æŸ¥è¯¢"><a href="#ç­‰å€¼äºéç­‰å€¼è¿æ¥æŸ¥è¯¢" class="headerlink" title="ç­‰å€¼äºéç­‰å€¼è¿æ¥æŸ¥è¯¢"></a>ç­‰å€¼äºéç­‰å€¼è¿æ¥æŸ¥è¯¢</h3><p>è¿æ¥æŸ¥è¯¢çš„WHEREå­å¥ä¸­ç”¨æ¥è¿æ¥ä¸¤ä¸ªè¡¨çš„æ¡ä»¶ç§°ä¸ºè¿æ¥æ¡ä»¶æˆ–è¿æ¥è°“è¯ï¼Œæ ¼å¼ä¸ºï¼š</p><p><code>[&lt;è¡¨å1&gt;.] &lt;åˆ—å1&gt;&lt;æ¯”è¾ƒè¿ç®—ç¬¦&gt; [&lt;è¡¨å2&gt;.] &lt;åˆ—å2&gt;</code></p><p><code>[&lt;è¡¨å1&gt;.] &lt;åˆ—å1&gt;BETWEEN [&lt;è¡¨å2&gt;.] &lt;åˆ—å2&gt;AND [&lt;è¡¨å3&gt;.] &lt;åˆ—å3&gt;</code></p><h6 id="æŸ¥è¯¢æ¯ä¸ªå­¦ç”ŸåŠå…¶é€‰ä¿®è¯¾ç¨‹æƒ…å†µ"><a href="#æŸ¥è¯¢æ¯ä¸ªå­¦ç”ŸåŠå…¶é€‰ä¿®è¯¾ç¨‹æƒ…å†µ" class="headerlink" title="æŸ¥è¯¢æ¯ä¸ªå­¦ç”ŸåŠå…¶é€‰ä¿®è¯¾ç¨‹æƒ…å†µ"></a>æŸ¥è¯¢æ¯ä¸ªå­¦ç”ŸåŠå…¶é€‰ä¿®è¯¾ç¨‹æƒ…å†µ</h6><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> Student.*, SC.*</span><br><span class="line"><span class="keyword">from</span> Student, SC</span><br><span class="line"><span class="keyword">where</span> Student.SNO=SC.SNO;</span><br></pre></td></tr></table></figure><h6 id="æŸ¥è¯¢é€‰ä¿®2å·è¯¾ç¨‹ä¸”æˆç»©åœ¨90åˆ†ä»¥ä¸Šçš„æ‰€æœ‰å­¦ç”Ÿçš„å­¦å·å’Œå§“å"><a href="#æŸ¥è¯¢é€‰ä¿®2å·è¯¾ç¨‹ä¸”æˆç»©åœ¨90åˆ†ä»¥ä¸Šçš„æ‰€æœ‰å­¦ç”Ÿçš„å­¦å·å’Œå§“å" class="headerlink" title="æŸ¥è¯¢é€‰ä¿®2å·è¯¾ç¨‹ä¸”æˆç»©åœ¨90åˆ†ä»¥ä¸Šçš„æ‰€æœ‰å­¦ç”Ÿçš„å­¦å·å’Œå§“å"></a>æŸ¥è¯¢é€‰ä¿®2å·è¯¾ç¨‹ä¸”æˆç»©åœ¨90åˆ†ä»¥ä¸Šçš„æ‰€æœ‰å­¦ç”Ÿçš„å­¦å·å’Œå§“å</h6><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> Student.SNO, Sname</span><br><span class="line"><span class="keyword">from</span> Student, SC</span><br><span class="line"><span class="keyword">where</span> Student.SNO=SC.SNO <span class="keyword">and</span> SC.CNO=<span class="string">'2'</span> <span class="keyword">and</span> SC.Grade&gt;<span class="number">90</span>;</span><br></pre></td></tr></table></figure><h3 id="è‡ªèº«è¿æ¥"><a href="#è‡ªèº«è¿æ¥" class="headerlink" title="è‡ªèº«è¿æ¥"></a>è‡ªèº«è¿æ¥</h3><h6 id="æŸ¥è¯¢æ¯ä¸€é—¨è¯¾çš„é—´æ¥å…ˆä¿®è¯¾"><a href="#æŸ¥è¯¢æ¯ä¸€é—¨è¯¾çš„é—´æ¥å…ˆä¿®è¯¾" class="headerlink" title="æŸ¥è¯¢æ¯ä¸€é—¨è¯¾çš„é—´æ¥å…ˆä¿®è¯¾"></a>æŸ¥è¯¢æ¯ä¸€é—¨è¯¾çš„é—´æ¥å…ˆä¿®è¯¾</h6><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> FIRST.CNO, SECOND.CPNO</span><br><span class="line"><span class="keyword">from</span> Course <span class="keyword">FIRST</span>, Course <span class="keyword">SECOND</span></span><br><span class="line"><span class="keyword">where</span> FIRST.SPNO=SECOND.CNO;</span><br></pre></td></tr></table></figure><h3 id="å¤–è¿æ¥"><a href="#å¤–è¿æ¥" class="headerlink" title="å¤–è¿æ¥"></a>å¤–è¿æ¥</h3><h6 id="æŸ¥è¯¢æ¯ä¸ªå­¦ç”ŸåŠå…¶é€‰ä¿®è¯¾ç¨‹æƒ…å†µ-1"><a href="#æŸ¥è¯¢æ¯ä¸ªå­¦ç”ŸåŠå…¶é€‰ä¿®è¯¾ç¨‹æƒ…å†µ-1" class="headerlink" title="æŸ¥è¯¢æ¯ä¸ªå­¦ç”ŸåŠå…¶é€‰ä¿®è¯¾ç¨‹æƒ…å†µ"></a>æŸ¥è¯¢æ¯ä¸ªå­¦ç”ŸåŠå…¶é€‰ä¿®è¯¾ç¨‹æƒ…å†µ</h6><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> Student.SNO, SNAME, SSEX, SAGE, SDEPT, CNO, GRADE</span><br><span class="line"><span class="keyword">from</span> Student <span class="keyword">left</span> <span class="keyword">outer</span> <span class="keyword">join</span> SC <span class="keyword">on</span> (Student.SNO=SC.SNO);</span><br></pre></td></tr></table></figure><h3 id="å¤šè¡¨è¿æ¥"><a href="#å¤šè¡¨è¿æ¥" class="headerlink" title="å¤šè¡¨è¿æ¥"></a>å¤šè¡¨è¿æ¥</h3><h6 id="æŸ¥è¯¢æ¯ä¸ªå­¦ç”Ÿçš„å­¦å·ï¼Œå§“åï¼Œé€‰ä¿®çš„è¯¾ç¨‹åç§°åŠæˆç»©"><a href="#æŸ¥è¯¢æ¯ä¸ªå­¦ç”Ÿçš„å­¦å·ï¼Œå§“åï¼Œé€‰ä¿®çš„è¯¾ç¨‹åç§°åŠæˆç»©" class="headerlink" title="æŸ¥è¯¢æ¯ä¸ªå­¦ç”Ÿçš„å­¦å·ï¼Œå§“åï¼Œé€‰ä¿®çš„è¯¾ç¨‹åç§°åŠæˆç»©"></a>æŸ¥è¯¢æ¯ä¸ªå­¦ç”Ÿçš„å­¦å·ï¼Œå§“åï¼Œé€‰ä¿®çš„è¯¾ç¨‹åç§°åŠæˆç»©</h6><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> Student.SNO, SNAME, CNAME, GRADE</span><br><span class="line"><span class="keyword">from</span> Student, SC, Course</span><br><span class="line"><span class="keyword">where</span> Student.SNO=SC.SNO <span class="keyword">and</span> SC.CNO=Course.CNO;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æ•°æ®æŸ¥è¯¢æ˜¯æ•°æ®åº“æ“ä½œçš„æ ¸å¿ƒæ“ä½œã€‚SQLæä¾›äº†&lt;code&gt;SELECT&lt;/code&gt;è¯­å¥è¿›è¡Œæ•°æ®æŸ¥è¯¢ï¼Œå…¶ä¸€èˆ¬æ ¼å¼ä¸ºï¼š&lt;/p&gt;
&lt;p&gt;&lt;code&gt;SELECT [ALL | DISTINCT] &amp;lt;ç›®æ ‡åˆ—è¡¨è¾¾å¼&amp;gt; FROM &amp;lt;è¡¨åæˆ–è§†å›¾å&amp;gt; (&amp;lt;SELECT è¯­å¥&amp;gt;) [AS] &amp;lt;åˆ«å&amp;gt; [WHERE&amp;lt;æ¡ä»¶è¡¨è¾¾å¼&amp;gt;]&lt;/code&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="Note" scheme="https://marara.xin/categories/Note/"/>
    
    
      <category term="MySQL" scheme="https://marara.xin/tags/MySQL/"/>
    
      <category term="DataBase" scheme="https://marara.xin/tags/DataBase/"/>
    
  </entry>
  
  <entry>
    <title>VPSæ­è½½sså®ç°ç§‘å­¦ä¸Šç½‘</title>
    <link href="https://marara.xin/2017/09/18/The%20Usage%20of%20traffic-proxy%20in%20Shadowsocks%20at%20VPS/"/>
    <id>https://marara.xin/2017/09/18/The Usage of traffic-proxy in Shadowsocks at VPS/</id>
    <published>2017-09-18T13:01:35.000Z</published>
    <updated>2017-09-18T13:17:10.000Z</updated>
    
    <content type="html"><![CDATA[<p>ç®€è€Œè¨€ä¹‹ï¼Œæƒ³ä½¿ç”¨shadowsocksç¿»å¢™ï¼Œéœ€è¦ä¸€ä¸ªå®¢æˆ·ç«¯å’Œä¸€ä¸ªæœåŠ¡ç«¯ã€‚</p><p>è¿™ç¯‡æ–‡ç« ä¸»è¦æ˜¯å¦‚ä½•åœ¨VPSä¸Šé…ç½®shadowsocksï¼Œå¹¶ä½¿ç”¨ä»£ç†å®ç°ç§‘å­¦ä¸Šç½‘ã€‚</p><a id="more"></a><h2 id="ç™»å½•VPSæœåŠ¡å™¨"><a href="#ç™»å½•VPSæœåŠ¡å™¨" class="headerlink" title="ç™»å½•VPSæœåŠ¡å™¨"></a>ç™»å½•VPSæœåŠ¡å™¨</h2><p>åœ¨ç»ˆç«¯ä¸­è¾“å…¥ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh -i [PATH_TO_PRIVATE_KEY] [USERNAME]@[EXTERNAL_IP_ADDRESS]</span><br></pre></td></tr></table></figure><blockquote><ul><li><code>[PATH_TO_PRIVATE_KEY]</code>æ˜¯ç§é’¥è·¯å¾„ã€‚</li><li><code>[USERNAME]</code>æ˜¯è¿æ¥åˆ°VPSçš„ç”¨æˆ·çš„åç§°ã€‚</li><li><code>[EXTERNAL_IP_ADDRESS]</code> æ˜¯VPSçš„å¤–éƒ¨IPåœ°å€ã€‚</li></ul></blockquote><h2 id="ä¸‹è½½shadowsockså®¢æˆ·ç«¯"><a href="#ä¸‹è½½shadowsockså®¢æˆ·ç«¯" class="headerlink" title="ä¸‹è½½shadowsockså®¢æˆ·ç«¯"></a>ä¸‹è½½shadowsockså®¢æˆ·ç«¯</h2><h3 id="CentOS"><a href="#CentOS" class="headerlink" title="CentOS"></a>CentOS</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">yum install python-setuptools &amp;&amp; easy_install pip</span><br><span class="line">pip install shadowsocks</span><br></pre></td></tr></table></figure><h3 id="Debian-Ubuntu"><a href="#Debian-Ubuntu" class="headerlink" title="Debian/Ubuntu:"></a>Debian/Ubuntu:</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">apt-get install python-pip</span><br><span class="line">pip install shadowsocks</span><br></pre></td></tr></table></figure><p>æœ‰æ—¶Ubuntuä¼šé‡åˆ°ç¬¬ä¸€ä¸ªå‘½ä»¤å®‰è£…python-pipæ—¶æ‰¾ä¸åˆ°åŒ…çš„æƒ…å†µã€‚pipå®˜æ–¹ç»™å‡ºäº†ä¸€ä¸ªå®‰è£…è„šæœ¬ï¼Œå¯ä»¥è‡ªåŠ¨å®‰è£…pipã€‚å…ˆä¸‹è½½è„šæœ¬ï¼Œç„¶åæ‰§è¡Œå³å¯ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">wget https://bootstrap.pypa.io/get-pip.py</span><br><span class="line">python get-pip.py</span><br></pre></td></tr></table></figure><p>æˆ–è€…ä½¿ç”¨easy_installå®‰è£…ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo easy_install shadowsocks</span><br></pre></td></tr></table></figure><h2 id="ç¼–å†™é…ç½®æ–‡ä»¶"><a href="#ç¼–å†™é…ç½®æ–‡ä»¶" class="headerlink" title="ç¼–å†™é…ç½®æ–‡ä»¶"></a>ç¼–å†™é…ç½®æ–‡ä»¶</h2><p>shadowsockså¯åŠ¨æ—¶çš„å‚æ•°ï¼Œå¦‚æœåŠ¡å™¨ç«¯å£ï¼Œä»£ç†ç«¯å£ï¼Œç™»å½•å¯†ç ç­‰ï¼Œå¯ä»¥é€šè¿‡å¯åŠ¨æ—¶çš„å‘½ä»¤è¡Œå‚æ•°æ¥è®¾å®šï¼Œä¹Ÿå¯ä»¥é€šè¿‡jsonæ ¼å¼çš„é…ç½®æ–‡ä»¶è®¾å®šã€‚æ¨èä½¿ç”¨é…ç½®æ–‡ä»¶ï¼Œæ–¹ä¾¿æŸ¥çœ‹å’Œä¿®æ”¹ã€‚</p><p>ç”¨viæ–°å»ºä¸€ä¸ªé…ç½®æ–‡ä»¶ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vi /etc/shadowsocks.json</span><br></pre></td></tr></table></figure><p>ç„¶åè¾“å…¥å¦‚ä¸‹å†…å®¹ï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&#123; </span><br><span class="line">   <span class="attr">"server"</span>: <span class="string">"0.0.0.0"</span>,</span><br><span class="line">    <span class="attr">"server_ipv6"</span>: <span class="string">"::"</span>,</span><br><span class="line">    <span class="attr">"server_port"</span>: <span class="number">443</span>,</span><br><span class="line">    <span class="attr">"local_address"</span>: <span class="string">"127.0.0.1"</span>,</span><br><span class="line">    <span class="attr">"local_port"</span>: <span class="number">1081</span>,</span><br><span class="line">    <span class="attr">"port_password"</span>:&#123;</span><br><span class="line">        <span class="attr">"port_1"</span>:<span class="string">"password_1"</span>,</span><br><span class="line">        <span class="attr">"port_2"</span>:<span class="string">"pawwword_2"</span></span><br><span class="line">        &#125;,</span><br><span class="line">    <span class="attr">"timeout"</span>: <span class="number">120</span>,</span><br><span class="line">    <span class="attr">"udp_timeout"</span>: <span class="number">60</span>,</span><br><span class="line">    <span class="attr">"method"</span>: <span class="string">"chacha20"</span>,</span><br><span class="line">    <span class="attr">"protocol"</span>: <span class="string">"auth_sha1_v4_compatible"</span>,</span><br><span class="line">    <span class="attr">"protocol_param"</span>: <span class="string">""</span>,</span><br><span class="line">    <span class="attr">"obfs"</span>: <span class="string">"tls1.2_ticket_auth_compatible"</span>,</span><br><span class="line">    <span class="attr">"obfs_param"</span>: <span class="string">""</span>,</span><br><span class="line">    <span class="attr">"dns_ipv6"</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="attr">"connect_verbose_info"</span>: <span class="number">1</span>,</span><br><span class="line">    <span class="attr">"redirect"</span>: <span class="string">""</span>,</span><br><span class="line">    <span class="attr">"fast_open"</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="attr">"workers"</span>: <span class="number">1</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç®€å•è¯´æ˜ä¸€ä¸‹å„ä¸ªé…ç½®é¡¹ï¼š</p><h3 id="server"><a href="#server" class="headerlink" title="server"></a>server</h3><p>ä½ çš„VPSæœåŠ¡å™¨çš„IPåœ°å€</p><h3 id="server-port"><a href="#server-port" class="headerlink" title="server_port"></a>server_port</h3><p>ä½ çš„shadowsocksæœåŠ¡ç«¯å£ã€‚ä¸€èˆ¬å¯ä»¥å¡«ä¸€ä¸ª1025åˆ°49151ä¹‹é—´çš„æ•°å­—ã€‚ä¸è¿‡éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™é‡Œçš„æ˜¯å¤–éƒ¨ç«¯å£ï¼Œä½¿ç”¨æ—¶åº”é¿å…å’Œå…¶å®ƒç«¯å£é‡å¤</p><h3 id="local-address"><a href="#local-address" class="headerlink" title="local_address"></a>local_address</h3><p>æœ¬åœ°IPåœ°å€ï¼Œä½œä¸ºæœåŠ¡å™¨ä½¿ç”¨çš„æ—¶å€™å¯ä»¥ä¸ç”¨å…³æ³¨ï¼Œå¡«127.0.0.1å³å¯ã€‚</p><h3 id="local-port"><a href="#local-port" class="headerlink" title="local_port"></a>local_port</h3><p>æœ¬åœ°ç«¯å£ï¼Œä¹Ÿä¸ç”¨å…³æ³¨ã€‚</p><h3 id="port-password"><a href="#port-password" class="headerlink" title="port_password"></a>port_password</h3><p>ä½ çš„shadowsocksç«¯å£å’ŒæœåŠ¡å¯†ç ï¼Œå®¢æˆ·ç«¯è¿æ¥æ—¶éœ€è¦å¡«å†™çš„ã€‚å¦‚æœéœ€è¦å¤šäººå…±äº«ï¼Œåˆ™æ¯ä¸ªä¹‹é—´ç”¨ <code>,</code> éš”å¼€ã€‚ç«¯å£ä½¿ç”¨æ—¶åº”æ³¨æ„æ˜¯å¦è¢«é˜²ç«å¢™éš”ç¦»ã€‚</p><h3 id="timeout"><a href="#timeout" class="headerlink" title="timeout"></a>timeout</h3><p>è¶…æ—¶æ—¶é—´ï¼Œå¦‚æœå½“å¿ƒç½‘ç»œä¸å¥½å¯ä»¥è®¾ç½®å¤§ä¸€ç‚¹ã€‚</p><h3 id="method"><a href="#method" class="headerlink" title="method"></a>method</h3><p>åŠ å¯†æ–¹å¼ã€‚</p><h3 id="fast-open"><a href="#fast-open" class="headerlink" title="fast_open"></a>fast_open</h3><p>åœ¨Ubuntuä¸Šå»ºè®®å¡«Trueã€‚</p><p>å¡«å¥½ä»¥åä¿å­˜é€€å‡ºã€‚</p><h3 id="å¯åŠ¨shadowsocks"><a href="#å¯åŠ¨shadowsocks" class="headerlink" title="å¯åŠ¨shadowsocks"></a>å¯åŠ¨shadowsocks</h3><p>å¦‚æœå·²ç»å†™å¥½äº†é…ç½®æ–‡ä»¶ï¼Œå¯åŠ¨shadowsocksæœåŠ¡å™¨çš„å‘½ä»¤å¦‚ä¸‹ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssserver -c /etc/shadowsocks.json</span><br></pre></td></tr></table></figure><p>åå°å¯åŠ¨å’Œåœæ­¢shadowsocksæœåŠ¡å™¨ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ssserver -c /etc/shadowsocks.json -d start</span><br><span class="line">ssserver -c /etc/shadowsocks.json -d stop</span><br></pre></td></tr></table></figure><p>shadowsocksçš„æ—¥å¿—ä¿å­˜åœ¨</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/var/log/shadowsocks.log</span><br></pre></td></tr></table></figure><h2 id="å®‰è£…é”é€Ÿ"><a href="#å®‰è£…é”é€Ÿ" class="headerlink" title="å®‰è£…é”é€Ÿ"></a>å®‰è£…é”é€Ÿ</h2><h3 id="å®‰è£…ï¼š"><a href="#å®‰è£…ï¼š" class="headerlink" title="å®‰è£…ï¼š"></a>å®‰è£…ï¼š</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget -N --no-check-certificate https://raw.githubusercontent.com/91yun/serverspeeder/master/serverspeeder-all.sh &amp;&amp; bash serverspeeder-all.sh</span><br></pre></td></tr></table></figure><h3 id="å¸è½½ï¼š"><a href="#å¸è½½ï¼š" class="headerlink" title="å¸è½½ï¼š"></a>å¸è½½ï¼š</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chattr -i /serverspeeder/etc/apx* &amp;&amp; /serverspeeder/bin/serverSpeeder.sh uninstall -f</span><br></pre></td></tr></table></figure><h3 id="å¼€å¯ï¼š"><a href="#å¼€å¯ï¼š" class="headerlink" title="å¼€å¯ï¼š"></a>å¼€å¯ï¼š</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">service serverSpeeder start</span><br></pre></td></tr></table></figure><h3 id="æŸ¥çœ‹çŠ¶æ€ï¼š"><a href="#æŸ¥çœ‹çŠ¶æ€ï¼š" class="headerlink" title="æŸ¥çœ‹çŠ¶æ€ï¼š"></a>æŸ¥çœ‹çŠ¶æ€ï¼š</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">service serverSpeeder status</span><br></pre></td></tr></table></figure><blockquote><p>éœ€è¦åœ¨<code>root</code>æ¨¡å¼ä¸‹è¿›è¡Œ</p></blockquote>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ç®€è€Œè¨€ä¹‹ï¼Œæƒ³ä½¿ç”¨shadowsocksç¿»å¢™ï¼Œéœ€è¦ä¸€ä¸ªå®¢æˆ·ç«¯å’Œä¸€ä¸ªæœåŠ¡ç«¯ã€‚&lt;/p&gt;
&lt;p&gt;è¿™ç¯‡æ–‡ç« ä¸»è¦æ˜¯å¦‚ä½•åœ¨VPSä¸Šé…ç½®shadowsocksï¼Œå¹¶ä½¿ç”¨ä»£ç†å®ç°ç§‘å­¦ä¸Šç½‘ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="Tutorial" scheme="https://marara.xin/categories/Tutorial/"/>
    
    
      <category term="ShadowSocks" scheme="https://marara.xin/tags/ShadowSocks/"/>
    
  </entry>
  
  <entry>
    <title>MySQLä¿®æ”¹rootç”¨æˆ·å¯†ç </title>
    <link href="https://marara.xin/2017/09/08/Changes%20the%20root%20user%20password%20for%20MySQL/"/>
    <id>https://marara.xin/2017/09/08/Changes the root user password for MySQL/</id>
    <published>2017-09-08T12:00:20.000Z</published>
    <updated>2017-09-19T05:56:44.000Z</updated>
    
    <content type="html"><![CDATA[<p>æ–°å®‰è£…äº†MySQLï¼Œå®‰è£…ä¹‹åç²—å¿ƒæŠŠå¯†ç ç»™æä¸¢äº†ï¼Œè¿›å…¥MySQLæ—¶æŠ¥é”™ï¼šERROR 1045 (28000): Access denied for user â€˜rootâ€™@â€™localhostâ€™ (using password: NO).</p><p>é€šè¿‡ä»¥ä¸‹æ­¥éª¤ä¿®æ”¹å¯†ç ã€‚</p><a id="more"></a><h3 id="Step-1"><a href="#Step-1" class="headerlink" title="Step 1"></a>Step 1</h3><p>å…³é—­MySQLæœåŠ¡</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo /usr/local/mysql/support-files/mysql.server stop</span><br></pre></td></tr></table></figure><blockquote><p>â‘  é€šè¿‡DMGå®‰è£…çš„MySQLé€šè¿‡â€™<code>&#39;System Prefrences&#39; &gt; MySQL &gt; &#39;Stop MySQL Server&#39;</code>æ¥ç»“æŸMySQLæœåŠ¡ã€‚</p><p>å¦‚æœæŠ¥é”™ï¼šERROR! MySQL server PID file could not be found! åˆ™ç›´æ¥ç”¨ â‘  çš„æ–¹æ³•å…³é—­å³å¯ã€‚</p><p>åŒç†æ‰“å¼€æœåŠ¡ä¸ºï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;</span> sudo /usr/local/mysql/support-files/mysql.server start</span><br><span class="line"><span class="meta">&gt;</span></span><br></pre></td></tr></table></figure></blockquote><h3 id="Step-2"><a href="#Step-2" class="headerlink" title="Step 2"></a>Step 2</h3><p>ä½¿ç”¨å®‰å…¨æ¨¡å¼å¯åŠ¨MySQL</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo /usr/local/mysql/bin/mysqld_safe --skip-grant-tables</span><br></pre></td></tr></table></figure><h3 id="Step-3"><a href="#Step-3" class="headerlink" title="Step 3"></a>Step 3</h3><p>åœ¨æ–°çš„Terminalä¸­è¾“å…¥ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql -u root</span><br></pre></td></tr></table></figure><p>åœ¨æ‰“å¼€çš„MySQLå‘½ä»¤è¡Œçª—å£ä¾æ¬¡è¾“å…¥ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">UPDATE mysql.user SET authentication_string=PASSWORD(&apos;YOUR_NEW_PASSWORD&apos;) WHERE User=&apos;root&apos;;</span><br><span class="line">FLUSH PRIVILEGES;</span><br><span class="line">\q</span><br></pre></td></tr></table></figure><blockquote><p>è¿™é‡Œæ³¨æ„ç»“å°¾çš„ <code>;</code>ä¸èƒ½å°‘ã€‚</p><p><code>YOUR_NEW_PASSWORD</code> æ˜¯ä½ çš„æ–°å¯†ç </p><p>5.7ä¹‹å‰çš„ç‰ˆæœ¬ï¼Œmysql.userè¡¨é‡Œé¢çš„<code>authentication_string</code>å­—æ®µæ”¹æˆäº†ï¼š<code>password</code></p></blockquote><h3 id="æµ‹è¯•"><a href="#æµ‹è¯•" class="headerlink" title="æµ‹è¯•"></a>æµ‹è¯•</h3><p>é‡å¯MySQLåè¿è¡Œä»¥ä¸‹å‘½ä»¤æµ‹è¯•å¯†ç æ˜¯å¦ä¿®æ”¹æˆåŠŸ</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql -u root -p</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æ–°å®‰è£…äº†MySQLï¼Œå®‰è£…ä¹‹åç²—å¿ƒæŠŠå¯†ç ç»™æä¸¢äº†ï¼Œè¿›å…¥MySQLæ—¶æŠ¥é”™ï¼šERROR 1045 (28000): Access denied for user â€˜rootâ€™@â€™localhostâ€™ (using password: NO).&lt;/p&gt;
&lt;p&gt;é€šè¿‡ä»¥ä¸‹æ­¥éª¤ä¿®æ”¹å¯†ç ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="Tutorial" scheme="https://marara.xin/categories/Tutorial/"/>
    
    
      <category term="MySQL" scheme="https://marara.xin/tags/MySQL/"/>
    
  </entry>
  
  <entry>
    <title>Git å¿«é€Ÿå¼€å§‹ç®€æ˜æ•™ç¨‹</title>
    <link href="https://marara.xin/2017/03/19/The%20introductory%20of%20Git/"/>
    <id>https://marara.xin/2017/03/19/The introductory of Git/</id>
    <published>2017-03-19T12:18:00.000Z</published>
    <updated>2017-09-19T06:06:09.000Z</updated>
    
    <content type="html"><![CDATA[<p>Git æ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼ç‰ˆæœ¬ç®¡ç†ç³»ç»Ÿï¼Œå³æ¯ä¸ªç»ˆç«¯éƒ½æœ‰ä¸€å¥—å®Œæ•´çš„é¡¹ç›®ä»£ç ï¼ˆåŒ…æ‹¬å†å²æ–‡ä»¶ï¼‰ã€‚ä¸ºäº†ä½¿ç”¨ Gitï¼Œå…ˆè¦å®‰è£… Gitã€‚å¯ä»¥åœ¨ Command Line æˆ–è€… Terminal ä¸­è¾“å…¥<code>git</code>å‘½ä»¤æ£€æŸ¥æ˜¯å¦å·²ç»å®‰è£…ã€‚</p><a id="more"></a><blockquote><h2 id="å¼€å§‹ä½¿ç”¨"><a href="#å¼€å§‹ä½¿ç”¨" class="headerlink" title="å¼€å§‹ä½¿ç”¨"></a>å¼€å§‹ä½¿ç”¨</h2></blockquote><h3 id="åˆ›å»ºæœ¬åœ°å·¥ä½œç›®å½•"><a href="#åˆ›å»ºæœ¬åœ°å·¥ä½œç›®å½•" class="headerlink" title="åˆ›å»ºæœ¬åœ°å·¥ä½œç›®å½•"></a>åˆ›å»ºæœ¬åœ°å·¥ä½œç›®å½•</h3><p>å…ˆè¦åˆ›å»ºä¸€ä¸ªæ–‡ä»¶å¤¹æ¥ä¿å­˜é¡¹ç›®ä»£ç ã€‚ä¾‹å¦‚æˆ‘ä½¿ç”¨å¦‚ä¸‹ç›®å½•ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/Users/renfei/Sites/project</span><br></pre></td></tr></table></figure><p>å‘½ä»¤è¡Œä¸­<code>cd</code>åˆ°è¿™ä¸ªç›®å½•ï¼Œç„¶åæ‰§è¡Œ<code>git init</code> å‘½ä»¤æ¥åˆå§‹åŒ–ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">bogon:~ renfei$ cd /Users/renfei/Sites/project </span><br><span class="line">bogon:project renfei$ git init</span><br><span class="line">Initialized empty Git repository in /Users/renfei/Sites/project/.git/</span><br></pre></td></tr></table></figure><h3 id="æ·»åŠ è¿œç¨‹ä»“åº“"><a href="#æ·»åŠ è¿œç¨‹ä»“åº“" class="headerlink" title="æ·»åŠ è¿œç¨‹ä»“åº“"></a>æ·»åŠ è¿œç¨‹ä»“åº“</h3><p>ä½¿ç”¨<code>git remote add</code>å‘½ä»¤ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bogon:buaa-weixin renfei$ git remote add proj https://renfeisong@bitbucket.org/developers/proj.git</span><br></pre></td></tr></table></figure><p>ä¸Šé¢çš„ proj æ˜¯ä¸€ä¸ªæœ¬åœ°åˆ«åï¼Œå¯ä»¥èµ·å¾—çŸ­ä¸€äº›ï¼Œä»¥ä¾¿ä»¥åä½¿ç”¨ã€‚åé¢çš„åœ°å€åˆ™æ˜¯è¿œç¨‹ä»“åº“å¾—åœ°å€ã€‚æ·»åŠ ä¹‹åï¼Œå¯ä»¥ä½¿ç”¨<code>git remote</code>å‘½ä»¤æŸ¥çœ‹å½“å‰å·²æœ‰çš„è¿œç¨‹ä»“åº“ã€‚</p><h3 id="ä»è¿œç¨‹ä»“åº“å¾—åˆ°æ•°æ®"><a href="#ä»è¿œç¨‹ä»“åº“å¾—åˆ°æ•°æ®" class="headerlink" title="ä»è¿œç¨‹ä»“åº“å¾—åˆ°æ•°æ®"></a>ä»è¿œç¨‹ä»“åº“å¾—åˆ°æ•°æ®</h3><p>ä½¿ç”¨ <code>git fetch</code> å‘½ä»¤ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">bogon:project renfei$ git fetch proj</span><br><span class="line">remote: Counting objects: 39, done.</span><br><span class="line">remote: Compressing objects: 100% (34/34), done.</span><br><span class="line">remote: Total 39 (delta 5), reused 0 (delta 0)</span><br><span class="line">Unpacking objects: 100% (39/39), done.</span><br><span class="line">From https://bitbucket.org/renfeisong/project</span><br><span class="line"> * [new branch]      develop    -&gt; proj/develop</span><br><span class="line"> * [new branch]      master     -&gt; proj/master</span><br></pre></td></tr></table></figure><p>ä¼šçœ‹åˆ°å¾—åˆ°äº†æœåŠ¡å™¨ä¸Šçš„æ–‡ä»¶ï¼Œä»¥åŠä¸¤ä¸ªåˆ†æ”¯ï¼Œdevelop å’Œ masterã€‚è¿™é‡Œå¾—åˆ°å¾—åˆ†æ”¯æ•°ç›®å–å†³äºè¿œç¨‹ä»“åº“çš„å†…å®¹ã€‚è™½ç„¶å¾—åˆ°äº†è¿™äº›ä¸œè¥¿ï¼Œä½†æ˜¯ç°åœ¨è¿™äº›æ–‡ä»¶è¿˜æ²¡æœ‰å‡ºç°åœ¨ä½ çš„å·¥ä½œç›®å½•ä¸­ã€‚</p><p>è¿™æ˜¯å› ä¸ºï¼Œæˆ‘ä»¬éœ€è¦åˆ©ç”¨<code>git checkout</code>å‘½ä»¤ã€Œæ£€å‡ºã€ï¼ˆå®é™…å°±æ˜¯æŠŠå·¥ä½œç›®å½•åˆ‡æ¢åˆ°æŸä¸ªåˆ†æ”¯ï¼‰ï¼Œæ‰å¯ä»¥çœ‹åˆ°å¯¹åº”åˆ†æ”¯ä¸‹çš„é‚£äº›æ–‡ä»¶ã€‚</p><h3 id="åˆ‡æ¢åˆ†æ”¯"><a href="#åˆ‡æ¢åˆ†æ”¯" class="headerlink" title="åˆ‡æ¢åˆ†æ”¯"></a>åˆ‡æ¢åˆ†æ”¯</h3><p>ä½¿ç”¨ <code>checkout</code> å‘½ä»¤ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">bogon:project renfei$ git checkout develop</span><br><span class="line">Branch develop set up to track remote branch develop from proj.</span><br><span class="line">Switched to a new branch 'develop'</span><br></pre></td></tr></table></figure><p>ä¾‹å­ä¸­æˆ‘ä»¬åˆ‡æ¢åˆ°äº† develop åˆ†æ”¯ï¼Œå…¶ä¸­å¯¹åº”çš„æ–‡ä»¶å°±éƒ½å‡ºç°äº†ï¼ˆå¦‚æœæœ‰çš„è¯ï¼‰ã€‚</p><h2 id="å†è¯´åˆ†æ”¯"><a href="#å†è¯´åˆ†æ”¯" class="headerlink" title="å†è¯´åˆ†æ”¯"></a>å†è¯´åˆ†æ”¯</h2><p>åˆ†æ”¯æ˜¯ Git çš„ä¸€ä¸ªå¾ˆé‡è¦çš„åŠŸèƒ½ï¼Œå› æ­¤æœ‰å¿…è¦è§£é‡Šä¸€ä¸‹ã€‚å¦‚æœæŠŠéšç€æ—¶é—´çš„æ¨ç§»ï¼Œä»£ç çš„å˜åŒ–æƒ³è±¡æˆå‰è¿›çš„è·¯çº¿ï¼Œé‚£ä¹ˆåˆ†æ”¯å°±æ˜¯ä»è·¯çº¿ä¸Šçš„æŸä¸€ç‚¹è¡ç”Ÿå‡ºæ¥çš„ä¸€æ¡æ”¯çº¿ï¼Œåœ¨è¿™æ¡æ”¯çº¿ä¸Šçš„å¼€å‘ä¸ä¼šå¯¹åŸå…ˆè·¯çº¿çš„ä»£ç é€ æˆä»»ä½•å½±å“ã€‚ä¾‹å¦‚ï¼Œç°åœ¨æˆ‘ä»¬æœ‰ä¸€ä¸ª master åˆ†æ”¯å’Œä¸€ä¸ª develop åˆ†æ”¯ï¼Œmaster åˆ†æ”¯å‘å¸ƒç¨³å®šç‰ˆæœ¬çš„åº”ç”¨ï¼Œè€Œ develop åˆ†æ”¯åˆ™è¿›è¡Œæ—¥å¸¸å¼€å‘ã€‚ä¸€æ—¦è¾¾åˆ°æŸä¸ªè¿›åº¦èŠ‚ç‚¹ï¼Œdevelop åˆ†æ”¯ä¸Šçš„ä»£ç è¶³å¤Ÿç¨³å®šå¯ä»¥å‘å¸ƒï¼Œå°±æŠŠ develop åˆ†æ”¯åˆå¹¶ï¼ˆmergeï¼‰åˆ° master åˆ†æ”¯ï¼ŒåŒæ—¶ç»§ç»­ develop åˆ†æ”¯çš„å¼€å‘ã€‚</p><p>å†å¦‚ï¼Œdevelop åˆ†æ”¯å¼€å‘çš„è¿‡ç¨‹ä¸­å‡ºç°äº†æŸä¸ª bugï¼Œä¸€ä¸ªå¼€å‘äººå‘˜æƒ³è§£å†³è¿™ä¸ª bugï¼Œé‚£ä¹ˆä¸ºäº†ä¸å½±å“å…¶ä»–äººçš„å·¥ä½œï¼Œä»–å¯ä»¥ä» develop åˆ†æ”¯å†åˆ›å»ºä¸€ä¸ªæ–°çš„åˆ†æ”¯ hotfixï¼Œç„¶ååœ¨è¿™ä¸ªåˆ†æ”¯ä¸‹ä¿®æ”¹ï¼Œå®ŒæˆåæŠŠå®ƒåˆå¹¶å› develop åˆ†æ”¯ï¼Œå¹¶åˆ é™¤ hotfix åˆ†æ”¯ï¼ˆå®ƒçš„å†å²ä½¿å‘½å·²ç»å®Œæˆï¼‰ã€‚</p><p>å¯ä»¥çœ‹å‡ºï¼Œæ¯ä¸ªåˆ†æ”¯éƒ½æœ‰ä¸€å¥—ä»£ç ã€‚æ¯ä¸ªå¼€å‘äººå‘˜æœ¬åœ°éƒ½ä¿å­˜äº†å…¨éƒ¨åˆ†æ”¯çš„å…¨éƒ¨ä»£ç ï¼ˆè¿™äº›ä»£ç è¿åŒå…¶ä»–ä¿¡æ¯è¢« git æœ‰åºåœ°ç»„ç»‡åœ¨äº†å·¥ä½œç›®å½•ä¸‹ .git ç›®å½•ä¸­ï¼Œè¿™ä¸ªç›®å½•åº”å½“æ˜¯éšè—çš„ï¼‰ï¼Œå½“é€šè¿‡<code>checkout branch_name</code>åˆ‡æ¢åˆ†æ”¯æ—¶ï¼Œå·¥ä½œç›®å½•ä¸‹å¯è§çš„æ–‡ä»¶ä¹Ÿä¼šè¢«åˆ‡æ¢æˆå½“å‰åˆ†æ”¯ä¸‹çš„æ–‡ä»¶ã€‚è€Œå…¶ä»–åˆ†æ”¯çš„æ–‡ä»¶ä¹Ÿå¹¶æ²¡æœ‰ä¸¢å¤±ï¼Œæ‰€ä»¥éå¸¸æ–¹ä¾¿ï¼Œä½ å¯ä»¥æ ¹æ®éœ€è¦åˆ‡æ¢åˆ†æ”¯è¿›è¡Œä¸åŒçš„å·¥ä½œã€‚</p><blockquote><h2 id="æ–‡ä»¶æ“ä½œ"><a href="#æ–‡ä»¶æ“ä½œ" class="headerlink" title="æ–‡ä»¶æ“ä½œ"></a>æ–‡ä»¶æ“ä½œ</h2></blockquote><h3 id="æ·»åŠ æ–°æ–‡ä»¶"><a href="#æ·»åŠ æ–°æ–‡ä»¶" class="headerlink" title="æ·»åŠ æ–°æ–‡ä»¶"></a>æ·»åŠ æ–°æ–‡ä»¶</h3><p>åœ¨å·¥ä½œç›®å½•ä¸­åˆ›å»ºçš„æ–°æ–‡ä»¶å¤„äº untracked çŠ¶æ€ï¼Œå³æ²¡æœ‰è¢« git è·Ÿè¸ªã€‚æ–°æ–‡ä»¶ä¸ä¼šè‡ªåŠ¨è¢« git è·Ÿè¸ªï¼Œå› ä¸ºè®¸å¤šä¸´æ—¶æ–‡ä»¶ã€æ—¥å¿—æ–‡ä»¶ä¸éœ€è¦ä¿å­˜åˆ°ä»“åº“ä¸­ã€‚å¦‚æœè¦å¾€ä»“åº“ä¸­æ·»åŠ æ–‡ä»¶ï¼Œä½¿ç”¨ <code>git add</code> å‘½ä»¤ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bogon:project renfei$ git add *</span><br></pre></td></tr></table></figure><p>ä¸Šè¿°åšæ³•æ·»åŠ æ‰€æœ‰æ–‡ä»¶ã€‚å¦‚æœåŒ…å«æ–‡ä»¶å¤¹ï¼Œåˆ™ä¼šé€’å½’åœ°æ·»åŠ é‡Œé¢çš„æ–‡ä»¶ã€‚ä¹Ÿå¯ä»¥æ·»åŠ å•ç‹¬çš„æ–‡ä»¶æˆ–è€…åœ¨æ–‡ä»¶åä¸­ä½¿ç”¨é€šé…ç¬¦ã€‚</p><p>è¦æŸ¥çœ‹å½“å‰çŠ¶æ€ï¼ˆå“ªäº›æ–‡ä»¶ untrackedï¼Œå“ªäº›æ–‡ä»¶å¤„äºå…¶ä»–çŠ¶æ€ç­‰ï¼‰å¯ä»¥ä½¿ç”¨ <code>git status</code> å‘½ä»¤ã€‚</p><p>æ‰§è¡Œ <code>git add</code> åï¼Œæ–°æ·»åŠ çš„æ–‡ä»¶çŠ¶æ€ï¼ˆå¯é€šè¿‡<code>git status</code>æŸ¥çœ‹ï¼‰å˜ä¸º change to be committedï¼Œæˆ–è€…ç§°ä¸º stagedï¼Œæš‚å­˜ã€‚æ„æ€å°±æ˜¯ï¼Œåªè¦æŠŠå®ƒ commit ä¸Šå»å°±å¯ä»¥äº†ã€‚</p><h3 id="ä¿®æ”¹æ–‡ä»¶"><a href="#ä¿®æ”¹æ–‡ä»¶" class="headerlink" title="ä¿®æ”¹æ–‡ä»¶"></a>ä¿®æ”¹æ–‡ä»¶</h3><p>å¦‚æœä¿®æ”¹äº†æŸä¸ªå·²è·Ÿè¸ªçš„æ–‡ä»¶ï¼Œé‚£ä¹ˆè¿™ä¸ªæ–‡ä»¶ä¼šå˜ä¸º modifiedï¼Œnot stagedï¼Œæœªæš‚å­˜ã€‚æ­¤æ—¶å¿…é¡»å†æ¬¡ <code>git add</code> è¿™ä¸ªæ–‡ä»¶ä½¿å®ƒå˜æˆ staged çŠ¶æ€ï¼Œæ‰èƒ½å¤Ÿè¢« commit ä¸Šå»ã€‚</p><h3 id="æäº¤"><a href="#æäº¤" class="headerlink" title="æäº¤"></a>æäº¤</h3><p>å½“æœ‰æ–‡ä»¶çŠ¶æ€ä¸ºæš‚å­˜çš„ï¼ˆstagedï¼‰æ—¶ï¼Œå°±å¯ä»¥æ‰§è¡Œ <code>git commit</code> å‘½ä»¤ã€‚è¿™ä¸ªå‘½ä»¤ä¼šæäº¤æš‚å­˜çš„æ–‡ä»¶ã€‚git è¦æ±‚ä¸ºæ¯æ¬¡æäº¤æ·»åŠ ä¸€ä¸ªè¯´æ˜ï¼Œå› æ­¤ä¸€èˆ¬ä½¿ç”¨ä¸€ä¸ª<code>-m</code>é€‰é¡¹æ¥æ·»åŠ è¯´æ˜ã€‚ä¾‹å¦‚ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">bogon:project renfei$ git commit -m "background admin site (backend) added"</span><br><span class="line">[develop 7d17136] background admin site (backend) added</span><br><span class="line"> 16 files changed, 10372 insertions(+)</span><br><span class="line"> create mode 100644 bootstrap/v2/css/bootstrap-responsive.css</span><br><span class="line"> create mode 100644 bootstrap/v2/css/bootstrap-responsive.min.css</span><br><span class="line"> create mode 100644 bootstrap/v2/css/bootstrap.css</span><br><span class="line"> create mode 100644 bootstrap/v2/css/bootstrap.min.css</span><br><span class="line"> create mode 100644 bootstrap/v2/img/glyphicons-halflings-white.png</span><br><span class="line"> create mode 100644 bootstrap/v2/img/glyphicons-halflings.png</span><br><span class="line"> create mode 100644 bootstrap/v2/js/bootstrap.js</span><br><span class="line"> create mode 100644 bootstrap/v2/js/bootstrap.min.js</span><br><span class="line"> create mode 100644 define.php</span><br><span class="line"> create mode 100644 index.php</span><br><span class="line"> create mode 100644 jquery/jquery-1.10.2.min.js</span><br><span class="line"> create mode 100644 login.php</span><br><span class="line"> create mode 100644 logout.php</span><br><span class="line"> create mode 100644 pref.php</span><br><span class="line"> create mode 100644 signup.php</span><br><span class="line"> create mode 100644 util.php</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªæ“ä½œå®Œæˆåï¼Œä»£ç å°±è¢«æäº¤åˆ°äº†æœ¬åœ°ä»“åº“ã€‚æ¯æ¬¡è¿›è¡Œ commit åéƒ½ä¼šå¯¹æ•´ä¸ªé¡¹ç›®åšä¸€ä¸ªå¿«ç…§ï¼Œä»¥åå¯ä»¥éšæ—¶å›æ»šåˆ°æŸä¸ªå¿«ç…§ä¸­ã€‚</p><p>å¦‚æœå¸Œæœ›çœç•¥ add è¿‡ç¨‹è€Œç›´æ¥æäº¤æ‰€æœ‰è·Ÿè¸ªçš„æ–‡ä»¶ï¼Œå¯ä»¥ç»™ <code>commit</code> å‘½ä»¤åŠ ä¸Š<code>-a</code>é€‰é¡¹ã€‚å¦‚ä¸‹ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bogon:project renfei$ git commit -a -m "background admin site (backend) added"</span><br></pre></td></tr></table></figure><h3 id="æ¨é€åˆ°è¿œç¨‹ä»“åº“"><a href="#æ¨é€åˆ°è¿œç¨‹ä»“åº“" class="headerlink" title="æ¨é€åˆ°è¿œç¨‹ä»“åº“"></a>æ¨é€åˆ°è¿œç¨‹ä»“åº“</h3><p><code>commit</code>ä»…ä»…æŠŠæ›´æ”¹æäº¤åˆ°äº†æœ¬åœ°ä»“åº“ã€‚å¦‚æœæƒ³æ¨é€åˆ°è¿œç¨‹ä»“åº“ï¼Œéœ€è¦ä½¿ç”¨ <code>git push</code> å‘½ä»¤ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">bogon:project renfei$ git push proj develop</span><br><span class="line">Counting objects: 25, done.</span><br><span class="line">Delta compression using up to 8 threads.</span><br><span class="line">Compressing objects: 100% (22/22), done.</span><br><span class="line">Writing objects: 100% (24/24), 122.16 KiB | 0 bytes/s, done.</span><br><span class="line">Total 24 (delta 1), reused 0 (delta 0)</span><br><span class="line">To https://renfeisong@bitbucket.org/renfeisong/project.git</span><br><span class="line">   d4eeb86..7d17136  develop -&gt; develop</span><br></pre></td></tr></table></figure><p>å…¶ä¸­ <code>proj</code> æ˜¯ä¹‹å‰è®¾å®šçš„ä»£å·ï¼Œè€Œ <code>develop</code> è¡¨ç¤ºæ¨é€æœ¬åœ°ä»“åº“çš„ <code>develop</code> åˆ†æ”¯ã€‚</p><h3 id="æ›´æ–°æœ¬åœ°ä»“åº“"><a href="#æ›´æ–°æœ¬åœ°ä»“åº“" class="headerlink" title="æ›´æ–°æœ¬åœ°ä»“åº“"></a>æ›´æ–°æœ¬åœ°ä»“åº“</h3><p>æ­¤æ—¶ï¼Œå¯ä»¥éšæ—¶ä½¿ç”¨ <code>git pull</code> å‘½ä»¤æ¥ä»è¿œç¨‹ä»“åº“æ‹‰å–æ›´æ–°ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">bogon:project renfei$ git pull</span><br><span class="line">Already up-to-date.</span><br></pre></td></tr></table></figure><p>å¦‚æœæ²¡æœ‰æ›´æ–°ï¼Œå°±ä¼šæ˜¾ç¤º <code>Already up-to-date</code>.</p><blockquote><h2 id="è¡¥å……"><a href="#è¡¥å……" class="headerlink" title="è¡¥å……"></a>è¡¥å……</h2></blockquote><p>Git è¿˜æœ‰å¾ˆå¤šå¾ˆå¤šåŠŸèƒ½ï¼Œæ¯”å¦‚ä»ä»“åº“ç§»é™¤æ–‡ä»¶ã€é‡å‘½åã€æ¯”è¾ƒç­‰ã€‚å¯ä»¥å‚è€ƒ Pro Git è¿™æœ¬ä¹¦ï¼Œæ˜¯åŸºäº CC åè®®å‘å¸ƒçš„ã€‚åœ°å€ï¼š<a href="http://git-scm.com/book/zh" target="_blank" rel="noopener">http://git-scm.com/book/zh</a></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;Git æ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼ç‰ˆæœ¬ç®¡ç†ç³»ç»Ÿï¼Œå³æ¯ä¸ªç»ˆç«¯éƒ½æœ‰ä¸€å¥—å®Œæ•´çš„é¡¹ç›®ä»£ç ï¼ˆåŒ…æ‹¬å†å²æ–‡ä»¶ï¼‰ã€‚ä¸ºäº†ä½¿ç”¨ Gitï¼Œå…ˆè¦å®‰è£… Gitã€‚å¯ä»¥åœ¨ Command Line æˆ–è€… Terminal ä¸­è¾“å…¥&lt;code&gt;git&lt;/code&gt;å‘½ä»¤æ£€æŸ¥æ˜¯å¦å·²ç»å®‰è£…ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="Tutorial" scheme="https://marara.xin/categories/Tutorial/"/>
    
    
      <category term="Git" scheme="https://marara.xin/tags/Git/"/>
    
      <category term="Terminal" scheme="https://marara.xin/tags/Terminal/"/>
    
  </entry>
  
  <entry>
    <title>Ubuntu é…ç½® Apache, MySQL, PHP ä»¥åŠ phpMyAdmin è¿‡ç¨‹è®°å½•</title>
    <link href="https://marara.xin/2017/03/17/The%20process%20of%20configures%20Apache,%20MySQL,%20PHP,%20and%20phpMyAdmin%20at%20Ubuntu/"/>
    <id>https://marara.xin/2017/03/17/The process of configures Apache, MySQL, PHP, and phpMyAdmin at Ubuntu/</id>
    <published>2017-03-17T06:14:49.000Z</published>
    <updated>2017-09-08T12:14:02.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Apache"><a href="#Apache" class="headerlink" title="Apache"></a>Apache</h2><h3 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> sudo apt-get install apache2</span></span><br></pre></td></tr></table></figure><p>è£…å¥½åï¼Œé…ç½®æ–‡ä»¶åº”è¯¥ä½äº<code>/etc/apache2</code>ä¸­ï¼Œé»˜è®¤æƒ…å†µä¸‹æ— éœ€ä¿®æ”¹å³å¯ä½¿ç”¨ã€‚é»˜è®¤çš„ç½‘ç«™ç›®å½•ä¸º<code>/var/www/</code>ã€‚</p><a id="more"></a><p>å¯åŠ¨ Apache çš„æ–¹æ³•ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> sudo /etc/init.d/apache2 start</span></span><br></pre></td></tr></table></figure><p>é‡å¯ Apacheï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> sudo /etc/init.d/apache2 restart</span></span><br></pre></td></tr></table></figure><p>åœæ­¢ Apacheï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> sudo /etc/init.d/apache2 stop</span></span><br></pre></td></tr></table></figure><p>ä¸Šè¿°å‘½ä»¤ä¹Ÿå¯ä»¥å†™æˆè¿™ç§å½¢å¼ï¼ˆä»¥å¯åŠ¨ä¸ºä¾‹ï¼‰ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> sudo service apache2 start</span></span><br></pre></td></tr></table></figure><h3 id="æµ‹è¯•"><a href="#æµ‹è¯•" class="headerlink" title="æµ‹è¯•"></a>æµ‹è¯•</h3><p>è£…å¥½å¹¶å¯åŠ¨ Apache æœåŠ¡åï¼Œæœ¬åœ°æœåŠ¡å™¨åº”è¯¥å°±å¯ä»¥ç”¨äº†ã€‚å¯ä»¥åˆ©ç”¨<code>curl</code>è®¿é—® localhost æ¥æµ‹è¯•ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> curl localhost</span></span><br></pre></td></tr></table></figure><p>Apache çš„é”™è¯¯æ—¥å¿—æ–‡ä»¶é»˜è®¤ä¸º<code>/var/log/apache2/error.log</code>ã€‚</p><h3 id="å…¶ä»–"><a href="#å…¶ä»–" class="headerlink" title="å…¶ä»–"></a>å…¶ä»–</h3><p>å¯åŠ¨çš„æ—¶å€™å¯èƒ½ä¼šå‡ºç°å¦‚ä¸‹è­¦å‘Šï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apache2: Could not determine the server's fully qualified domain name, using 127.0.0.1 for ServerName</span><br></pre></td></tr></table></figure><p>è¯´æ˜ä½ æ²¡æœ‰æŒ‡å®š<code>ServerName</code>ã€‚å¦‚æœæƒ³å»æ‰è¿™ä¸ªé”™è¯¯ï¼Œå¯ä»¥ä¿®æ”¹<code>/etc/apache2/apache2.conf</code>æ–‡ä»¶ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> sudo vi /etc/apache2/apache2.conf</span></span><br></pre></td></tr></table></figure><p>æ·»åŠ å¦‚ä¸‹è¡Œï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ServerName localhost</span><br></pre></td></tr></table></figure><blockquote><h2 id="PHP"><a href="#PHP" class="headerlink" title="PHP"></a>PHP</h2></blockquote><h3 id="å®‰è£…-PHP"><a href="#å®‰è£…-PHP" class="headerlink" title="å®‰è£… PHP"></a>å®‰è£… PHP</h3><p>åŒæ ·ä½¿ç”¨<code>apt-get</code>å‘½ä»¤å®‰è£… PHPï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> sudo apt-get install php5</span></span><br></pre></td></tr></table></figure><p>æ‰§è¡Œä¹‹åï¼ŒPHP åº”è¯¥å°±å·²ç»éƒ¨ç½²å®Œæ¯•äº†ã€‚å¯ä»¥ä½¿ç”¨<code>phpinfo()</code>å‡½æ•°æ¥æµ‹è¯• PHP æ˜¯å¦å·²ç»å°±ç»ªï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> sudo vi /var/www/phpinfo.php</span></span><br></pre></td></tr></table></figure><p>åœ¨æ–‡ä»¶é‡Œè¾“å…¥ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php phpinfo(); ?&gt;</span><br></pre></td></tr></table></figure><p>ç„¶å<code>curl localhost/phpinfo.php</code>æ¥æŸ¥çœ‹ã€‚</p><h3 id="å®‰è£…å…¶ä»–-PHP-æ¨¡å—"><a href="#å®‰è£…å…¶ä»–-PHP-æ¨¡å—" class="headerlink" title="å®‰è£…å…¶ä»– PHP æ¨¡å—"></a>å®‰è£…å…¶ä»– PHP æ¨¡å—</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> sudo apt-get install php5-mysql php5-curl php5-gd php5-intl php-pear php5-imagick php5-imap php5-mcrypt php5-memcache php5-ming php5-ps php5-pspell php5-recode php5-snmp php5-sqlite php5-tidy php5-xmlrpc php5-xsl</span></span><br></pre></td></tr></table></figure><blockquote><h2 id="MySQL"><a href="#MySQL" class="headerlink" title="MySQL"></a>MySQL</h2></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> sudo apt-get install mysql-server</span></span><br></pre></td></tr></table></figure><p>å®‰è£…è¿‡ç¨‹ä¸­éœ€è¦è®¾å®š root è´¦æˆ·çš„å¯†ç ã€‚è‡³æ­¤ï¼ŒLAMP ç¯å¢ƒå·²ç»é…å¥½ã€‚</p><blockquote><h2 id="phpMyAdmin"><a href="#phpMyAdmin" class="headerlink" title="phpMyAdmin"></a>phpMyAdmin</h2></blockquote><h3 id="å®‰è£…-1"><a href="#å®‰è£…-1" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h3><p>é¦–å…ˆæ‰§è¡Œï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> sudo apt-get install phpmyadmin</span></span><br></pre></td></tr></table></figure><p>å®‰è£…è¿‡ç¨‹æ¯”è¾ƒé•¿ï¼Œä¼šæœ‰å‡ ä¸ªé€‰é¡¹ï¼Œä¾æ¬¡å¦‚ä¸‹ï¼š</p><p>ï¼ˆ1ï¼‰é€‰æ‹©æœåŠ¡å™¨è½¯ä»¶ã€‚è¿™é‡Œé€‰æ‹©åˆšåˆšå®‰è£…çš„ Apache2ã€‚</p><p>ï¼ˆ2ï¼‰é€‰æ‹©æ‰‹åŠ¨è®¾å®šã€‚</p><p>ï¼ˆ3ï¼‰è¾“å…¥ä¹‹å‰å®‰è£… MySQL æ—¶è®¾çš„ MySQL root è´¦æˆ·çš„å¯†ç ã€‚</p><p>ï¼ˆ4ï¼‰è®¾å®š phpMyAdmin çš„ç™»å½•å¯†ç ã€‚</p><p>æ³¨æ„ï¼ŒphpMyAdmin çš„é…ç½®æ–‡ä»¶ä¸ºï¼š<code>/etc/phpmyadmin/config.inc.php</code>ã€‚</p><h3 id="åŒ…å«-pma-çš„é…ç½®æ–‡ä»¶åˆ°-Apache"><a href="#åŒ…å«-pma-çš„é…ç½®æ–‡ä»¶åˆ°-Apache" class="headerlink" title="åŒ…å« pma çš„é…ç½®æ–‡ä»¶åˆ° Apache"></a>åŒ…å« pma çš„é…ç½®æ–‡ä»¶åˆ° Apache</h3><p>å®‰è£…åï¼Œè¿˜ä¸èƒ½ç«‹å³ä½¿ç”¨ phpMyAdminï¼Œå› ä¸ºå®ƒä¸åœ¨ç½‘ç«™ç›®å½•ä¸‹ã€‚ä¸ºäº†æ­£å¸¸ä½¿ç”¨ï¼Œåªéœ€æŠŠ phpMyAdmin çš„é…ç½®æ–‡ä»¶åŒ…å«åˆ° Apache çš„é…ç½®ä¸­ã€‚ç¼–è¾‘<code>apache2.conf</code>ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> sudo vi /etc/apache2/apache2.conf</span></span><br></pre></td></tr></table></figure><p>åœ¨æ–‡ä»¶ä¸­æ·»åŠ å¦‚ä¸‹è¡Œï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Include /etc/phpmyadmin/apache.conf</span><br></pre></td></tr></table></figure><p>é‡å¯æœåŠ¡å™¨ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> sudo service apache2 restart</span></span><br></pre></td></tr></table></figure><p>è‡³æ­¤ï¼Œä½ å°±å¯ä»¥é€šè¿‡<code>yourdomain/phpmyadmin</code>æ¥è®¿é—® phpMyAdmin äº†ã€‚</p><h3 id="mcrypt-æ¨¡å—ä¸¢å¤±çš„é”™è¯¯"><a href="#mcrypt-æ¨¡å—ä¸¢å¤±çš„é”™è¯¯" class="headerlink" title="mcrypt æ¨¡å—ä¸¢å¤±çš„é”™è¯¯"></a>mcrypt æ¨¡å—ä¸¢å¤±çš„é”™è¯¯</h3><p>ä¸€ä¸ª bug å¯èƒ½å¯¼è‡´è®¿é—® phpMyAdmin æ—¶å‡ºç° mcrypt æ¨¡å—ä¸¢å¤±çš„é”™è¯¯ã€‚å¦‚æœé‡åˆ°ï¼Œåˆ™å¯ä»¥é‡‡ç”¨ä¸‹é¢çš„åŠæ³•ä¿®å¤ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> sudo ln -s /etc/php5/conf.d/mcrypt.ini /etc/php5/mods-available/</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> sudo php5enmod mcrypt</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> sudo service apache2 restart</span></span><br></pre></td></tr></table></figure><blockquote><h2 id="å…¨å±€ç¦ç”¨-Index"><a href="#å…¨å±€ç¦ç”¨-Index" class="headerlink" title="å…¨å±€ç¦ç”¨ Index"></a>å…¨å±€ç¦ç”¨ Index</h2></blockquote><p>Index å°±æ˜¯è®¿é—®ä¸€ä¸ªä¸å­˜åœ¨ index.htmlã€index.php ç­‰æ–‡ä»¶çš„ç›®å½•æ—¶æœåŠ¡å™¨åˆ—å‡ºçš„æ–‡ä»¶åˆ—è¡¨ï¼Œè¿™æ ·ä¼šå¯¹ç”¨æˆ·å±•ç¤ºæ–‡ä»¶ç»“æ„ï¼Œå¦‚æœæƒ³ç¦ç”¨ï¼Œå¯ä»¥ä¿®æ”¹ Apache çš„é…ç½®æ–‡ä»¶ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> sudo vi /etc/apache2/apache2.conf</span></span><br></pre></td></tr></table></figure><p>æ‰¾åˆ°å¹¶ä¿®æ”¹ä¸º</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;Directory /var/www/&gt;</span><br><span class="line">        Options -Indexes</span><br><span class="line">        Options FollowSymLinks</span><br><span class="line">        AllowOverride None</span><br><span class="line">        Require all granted</span><br><span class="line">&lt;/Directory&gt;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;Apache&quot;&gt;&lt;a href=&quot;#Apache&quot; class=&quot;headerlink&quot; title=&quot;Apache&quot;&gt;&lt;/a&gt;Apache&lt;/h2&gt;&lt;h3 id=&quot;å®‰è£…&quot;&gt;&lt;a href=&quot;#å®‰è£…&quot; class=&quot;headerlink&quot; title=&quot;å®‰è£…&quot;&gt;&lt;/a&gt;å®‰è£…&lt;/h3&gt;&lt;figure class=&quot;highlight shell&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;bash&quot;&gt; sudo apt-get install apache2&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;è£…å¥½åï¼Œé…ç½®æ–‡ä»¶åº”è¯¥ä½äº&lt;code&gt;/etc/apache2&lt;/code&gt;ä¸­ï¼Œé»˜è®¤æƒ…å†µä¸‹æ— éœ€ä¿®æ”¹å³å¯ä½¿ç”¨ã€‚é»˜è®¤çš„ç½‘ç«™ç›®å½•ä¸º&lt;code&gt;/var/www/&lt;/code&gt;ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="Tutorial" scheme="https://marara.xin/categories/Tutorial/"/>
    
    
      <category term="MySQL" scheme="https://marara.xin/tags/MySQL/"/>
    
      <category term="Ubuntu" scheme="https://marara.xin/tags/Ubuntu/"/>
    
  </entry>
  
</feed>
